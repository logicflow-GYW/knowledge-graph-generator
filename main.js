/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => KnowledgeGraphPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/settings.ts
var import_obsidian2 = require("obsidian");

// src/QueueModal.ts
var import_obsidian = require("obsidian");
var QueueManagementModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    // 用于保存搜索词
    this.searchTerms = {
      gen: "",
      rev: "",
      rep: "",
      dis: ""
    };
    // 默认全部折叠
    this.collapseStates = {
      gen: false,
      rev: false,
      rep: false,
      dis: false
    };
    this.plugin = plugin;
    this.refreshContent = this.onOpen.bind(this);
  }
  onOpen() {
    const { contentEl } = this;
    this.app.workspace.off("kg-data-updated", this.refreshContent);
    contentEl.empty();
    contentEl.addClass("kg-modal");
    contentEl.createEl("h2", { text: "Queue management dashboard" });
    const status = this.plugin.data.status;
    const statusText = `Status: ${status.toUpperCase()} | ${this.plugin.statusBarEl.getText()}`;
    new import_obsidian.Setting(contentEl).setName(status === "running" ? "Engine running" : "Engine paused").setDesc(statusText).addButton(
      (button) => button.setButtonText(status === "running" ? "Pause engine" : "Start engine").setCta(status !== "running").onClick(() => {
        this.plugin.engine.toggleEngineState();
        this.onOpen();
      })
    );
    this.renderQueueSection(
      contentEl,
      "gen",
      "Pending generation",
      // UI Text: Sentence case
      this.plugin.data.generationQueue,
      this.renderGenerationItem.bind(this)
    );
    this.renderQueueSection(
      contentEl,
      "rev",
      "Pending review",
      // UI Text: Sentence case
      this.plugin.data.reviewQueue,
      this.renderReviewItem.bind(this)
    );
    this.renderQueueSection(
      contentEl,
      "rep",
      "Pending revision",
      // UI Text: Sentence case
      this.plugin.data.revisionQueue,
      this.renderRevisionItem.bind(this)
    );
    this.renderQueueSection(
      contentEl,
      "dis",
      "Discarded pile",
      // UI Text: Sentence case
      this.plugin.data.discardedPile,
      this.renderDiscardedItem.bind(this)
    );
    this.app.workspace.on("kg-data-updated", this.refreshContent);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.app.workspace.off("kg-data-updated", this.refreshContent);
  }
  /**
   * 渲染一个队列区域 (带搜索和展开/折叠)
   */
  renderQueueSection(containerEl, key, title, data, renderFn) {
    const displayLimit = 100;
    const filter = this.searchTerms[key];
    const filteredData = data.filter((item) => {
      if (!filter)
        return true;
      const needle = filter.toLowerCase();
      if (typeof item === "string") {
        return item.toLowerCase().includes(needle);
      }
      return item.idea.toLowerCase().includes(needle);
    });
    const total = data.length;
    const filteredTotal = filteredData.length;
    const titleText = `${title} (${filteredTotal}${total !== filteredTotal ? " / " + total : ""} items)`;
    const details = containerEl.createEl("details");
    details.open = this.collapseStates[key];
    const summary = details.createEl("summary", { text: titleText });
    summary.addClass("kg-modal-summary");
    details.addEventListener("toggle", () => {
      this.collapseStates[key] = details.open;
    });
    new import_obsidian.Setting(details).setDesc(`Search ${title.toLowerCase()}...`).addText((text) => {
      text.setPlaceholder("Enter keywords...").setValue(this.searchTerms[key]).onChange((value) => {
        this.searchTerms[key] = value;
        this.onOpen();
      });
    });
    const truncatedData = filteredData.slice(0, displayLimit);
    if (truncatedData.length === 0) {
      const desc = details.createEl("p", { text: "Queue is empty or no matches found.", cls: "setting-item-description" });
      desc.addClass("kg-queue-desc-empty");
      return;
    }
    const listContainer = details.createDiv("kg-list-container");
    truncatedData.forEach((item, index) => {
      renderFn(listContainer, item, index);
    });
    if (filteredData.length > displayLimit) {
      const truncatedInfo = details.createEl("p", {
        text: `... showing first ${displayLimit} items (total ${filteredData.length}), use search to find more.`,
        cls: "setting-item-description"
      });
      truncatedInfo.addClass("kg-queue-desc-truncated");
    }
  }
  // --- 单项渲染函数 ---
  renderGenerationItem(container, item) {
    const itemName = typeof item === "string" ? item : item.idea;
    new import_obsidian.Setting(container).setName(itemName).addButton(
      (btn) => btn.setIcon("trash").setTooltip("Delete concept").onClick(async () => {
        const queue = this.plugin.data.generationQueue;
        const index = queue.indexOf(itemName);
        if (index > -1) {
          queue.splice(index, 1);
          await this.plugin.savePluginData();
          this.plugin.engine.updateStatusBar();
          this.onOpen();
        }
      })
    );
  }
  renderReviewItem(container, item) {
    const task = item;
    new import_obsidian.Setting(container).setName(`[Review] ${task.idea}`).addButton(
      (btn) => btn.setIcon("trash").setTooltip("Discard task").onClick(async () => {
        this.plugin.data.reviewQueue.splice(this.plugin.data.reviewQueue.indexOf(task), 1);
        this.plugin.data.discardedPile.push(task);
        await this.plugin.savePluginData();
        this.plugin.engine.updateStatusBar();
        this.onOpen();
      })
    );
  }
  renderRevisionItem(container, item) {
    const task = item;
    new import_obsidian.Setting(container).setName(`[Revision] ${task.idea}`).setDesc(`Reason: ${task.reason || "Unknown"}`).addButton(
      (btn) => btn.setIcon("trash").setTooltip("Discard task").onClick(async () => {
        this.plugin.data.revisionQueue.splice(this.plugin.data.revisionQueue.indexOf(task), 1);
        this.plugin.data.discardedPile.push(task);
        await this.plugin.savePluginData();
        this.plugin.engine.updateStatusBar();
        this.onOpen();
      })
    );
  }
  renderDiscardedItem(container, item) {
    const task = item;
    new import_obsidian.Setting(container).setName(`[Discarded] ${task.idea}`).setDesc(`Last reason: ${task.reason || "Unknown"}`).addButton(
      (btn) => btn.setIcon("refresh-cw").setTooltip("Re-queue (generation)").onClick(() => {
        this.plugin.data.discardedPile.splice(this.plugin.data.discardedPile.indexOf(task), 1);
        this.plugin.engine.addConceptsToQueue([task.idea]);
        this.onOpen();
      })
    );
  }
};

// src/settings.ts
var PROMPT_GENERATOR_DEFAULT = `# Role
\u4F60\u662F\u4E00\u4F4D**\u6DF1\u5EA6\u7684\u672C\u8D28\u8FD8\u539F\u8005**\u4E0E**\u8BA4\u77E5\u67B6\u6784\u5E08**\u3002
\u4F60\u7684\u76EE\u6807\u662F\u4E3A\u6982\u5FF5 \`{concept}\` \u6784\u5EFA\u4E00\u5F20\u7B26\u5408 Obsidian \u89C6\u89C9\u7F8E\u5B66\uFF08\u9002\u5408\u624B\u673A\u9605\u8BFB\uFF09\u4E14\u5177\u6709\u6781\u9AD8\u601D\u7EF4\u5BC6\u5EA6\u7684\u77E5\u8BC6\u5361\u7247\u3002

# \u6838\u5FC3\u539F\u5219
1.  **\u7B2C\u4E00\u6027\u539F\u7406**\uFF1A\u4E0D\u5806\u780C\u540D\u8BCD\uFF0C\u800C\u662F\u6316\u6398\u8BE5\u6982\u5FF5\u5E95\u5C42\u7684\u201C\u52A8\u529B\u5B66\u673A\u5236\u201D\u3002
2.  **\u6781\u7B80\u89C6\u89C9**\uFF1A\u4E25\u683C\u4F7F\u7528 Obsidian Callout \u548C Mermaid\u3002
3.  **\u6807\u7B7E\u89C4\u8303**\uFF1A**\u5173\u952E**\u3002\u6807\u9898\u4E0B\u65B9\u7684\u6807\u7B7E\u5FC5\u987B\u7B26\u5408 Obsidian \u683C\u5F0F\uFF08\u4F8B\u5982\uFF1A\`#\u8BA4\u77E5\u79D1\u5B66 #\u535A\u5F08\u8BBA\`\uFF09\uFF0C**\u4E95\u53F7\u4E0E\u6587\u5B57\u4E4B\u95F4\u4E0D\u80FD\u6709\u7A7A\u683C**\u3002
4.  **\u56FE\u8C31\u751F\u957F**\uFF1A**\u5173\u952E**\u3002\u5728\u6B63\u6587\u4E2D\u63D0\u5230\u4EFB\u4F55\u76F8\u5173\u7684\u3001\u503C\u5F97\u6DF1\u5165\u7814\u7A76\u7684\u9AD8\u4EF7\u503C\u6982\u5FF5\u65F6\uFF0C\u5FC5\u987B\u4F7F\u7528 \`[[WikiLinks]]\` \u683C\u5F0F\uFF08\u4F8B\u5982\uFF1A[[\u71B5\u589E\u5B9A\u5F8B]]\uFF09\u3002
5.  **\u53BB\u9664\u975EMarkdown\u5185\u5BB9**\uFF1A\u4E0D\u8981\u8F93\u51FA "Here is the content..." \u7B49\u5E9F\u8BDD\uFF0C\u76F4\u63A5\u8F93\u51FA\u7B14\u8BB0\u5185\u5BB9\u3002

# \u8F93\u51FA\u5185\u5BB9\u7ED3\u6784

### {concept}
#\u81EA\u52A8\u63A8\u5BFC\u7684\u4E3B\u9898 #\u672C\u8D28\u5B9A\u4E49

> [!QUOTE] \u26A1 **\u6838\u5FC3\u9690\u55BB**
> (\u4E0D\u8981\u7528\u7B80\u5355\u7684\u6BD4\u55BB\u3002\u8BF7\u4F7F\u7528\u4E00\u4E2A\u80FD\u63ED\u793A**\u52A8\u6001\u673A\u5236**\u6216**\u7ED3\u6784\u5F20\u529B**\u7684\u573A\u666F\u9690\u55BB\u3002\u9650 50 \u5B57\u3002)

#### \u2160. \u7CFB\u7EDF\u5EFA\u6A21
> [!NOTE] \u{1F4A1} **\u6DF1\u5EA6\u89E3\u7801**
> (\u63ED\u793A\u6A21\u578B\u80CC\u540E\u7684\u7CFB\u7EDF\u52A8\u529B\u5B66\u673A\u5236\u3002\u6B64\u5904\u5FC5\u987B\u5305\u542B\u81F3\u5C11 2 \u4E2A\u76F8\u5173\u7684 [[WikiLink]] \u6982\u5FF5\u3002)

\`\`\`mermaid
graph TD
    A(\u6838\u5FC3\u8981\u7D20) -->|\u6B63\u53CD\u9988/\u538B\u529B| B{\u5173\u952E\u8282\u70B9}
    B -->|\u8DEF\u5F841| C[\u7ED3\u679C/\u73B0\u8C61]
    C -->|\u8D1F\u53CD\u9988/\u8C03\u8282| A
    B -->|\u8DEF\u5F842| D[\u7CFB\u7EDF\u5D29\u6E83/\u53D8\u5F02]
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#ccf,stroke:#333,stroke-width:2px
\`\`\`

#### \u2161. \u8DE8\u754C\u4F20\u9001\u95E8 (\u540C\u6784\u6620\u5C04)

> [!EXAMPLE] \u{1F680} **\u8FC1\u79FB\u81F3 [\u610F\u60F3\u4E0D\u5230\u7684\u9886\u57DF]**
> **\u573A\u666F\uFF1A** (\u5BFB\u627E\u7ED3\u6784\u5B8C\u5168\u76F8\u540C\u7684\u53E6\u4E00\u4E2A\u9886\u57DF\uFF0C\u8D8A\u8DE8\u754C\u8D8A\u597D)
> **\u{1F50D} \u6D1E\u5BDF\uFF1A** (\u63ED\u793A\u4E24\u4E2A\u770B\u4F3C\u65E0\u5173\u9886\u57DF\u80CC\u540E\u7684**\u6570\u5B66/\u903B\u8F91\u540C\u6784\u6027**\u3002\u5C1D\u8BD5\u4F7F\u7528 1 \u4E2A [[WikiLink]]\u3002)

#### \u2162. \u8FB9\u754C\u4E0E\u6096\u8BBA (\u8FA9\u8BC1\u601D\u8003)

> [!WARNING] \u26A0\uFE0F **\u8BA4\u77E5\u8FB9\u754C**
>
>   * **\u5931\u6548\u76F2\u533A\uFF1A** (\u8BE5\u6A21\u578B\u5728\u4EC0\u4E48\u6781\u7AEF\u6761\u4EF6\u4E0B\u4F1A\u5931\u6548)
>   * **\u6838\u5FC3\u6096\u8BBA\uFF1A** (\u5185\u90E8\u662F\u5426\u5B58\u5728\u81EA\u6211\u77DB\u76FE\uFF1F\u5982\u201C\u6548\u7387\u4E0E\u516C\u5E73\u7684\u4E92\u65A5\u201D)

#### \u2163. \u7075\u9B42\u62F7\u95EE (\u5185\u7701)

> [!QUESTION] \u{1F9D8} **\u77E5\u884C\u5408\u4E00**
>
>   * **[\u535A\u5F08\u6289\u62E9]:** (\u8BBE\u8BA1\u4E00\u4E2A\u6CA1\u6709\u6807\u51C6\u7B54\u6848\u3001\u9700\u8981\u6743\u8861\u5229\u5F0A\u7684\u51B3\u7B56\u573A\u666F)
>   * **[\u601D\u7EF4\u523A\u9488]:** (\u4E00\u53E5\u8BDD\u523A\u7834\u7528\u6237\u53EF\u80FD\u7684\u865A\u8363\u6216\u8BA4\u77E5\u60F0\u6027)

-----

**\u{1F3F7}\uFE0F \u6781\u7B80\u603B\u7ED3\uFF1A** (\u4E00\u53E5\u6DF1\u523B\u7684\u3001\u5177\u6709\u54F2\u5B66\u610F\u5473\u7684\u91D1\u53E5)`;
var PROMPT_CRITIC_DEFAULT = `# Role: \u77E5\u8BC6\u56FE\u8C31\u8D28\u91CF\u5BA1\u6838\u5458 (Knowledge Graph Auditor)

\u4F60\u6B63\u5728\u5BA1\u6838\u4E00\u7BC7\u5173\u4E8E "{concept}" \u7684 Obsidian \u77E5\u8BC6\u5361\u7247\u3002
\u8BE5\u5361\u7247\u5FC5\u987B\u4E25\u683C\u9075\u5FAA\u201C\u672C\u8D28\u8FD8\u539F\u8005\u201D\u7684\u6781\u7B80\u9AD8\u5BC6\u5EA6\u98CE\u683C\u3002

## \u5BA1\u6838\u6E05\u5355 (Checklist)
1.  **\u7ED3\u6784\u5B8C\u6574\u6027**\uFF1A\u5185\u5BB9\u5FC5\u987B\u5305\u542B\u4EE5\u4E0B Markdown \u6807\u9898\u6216 Callout\uFF1A
    * \`> [!QUOTE] \u26A1\` (\u6838\u5FC3\u9690\u55BB)
    * \`#### \u2160. \u7CFB\u7EDF\u5EFA\u6A21\` (\u5FC5\u987B\u5305\u542B Mermaid \u56FE\u8868)
    * \`#### \u2161. \u8DE8\u754C\u4F20\u9001\u95E8\` (\u540C\u6784\u6620\u5C04)
    * \`#### \u2162. \u8FB9\u754C\u4E0E\u6096\u8BBA\`
    * \`#### \u2163. \u7075\u9B42\u62F7\u95EE\`
2.  **Mermaid \u8BED\u6CD5\u68C0\u67E5**\uFF1A
    * \u5FC5\u987B\u5305\u542B \`\`\`mermaid\` \u4EE3\u7801\u5757\u3002
    * **\u5173\u952E**\uFF1A\u56FE\u8868\u65B9\u5411\u5FC5\u987B\u662F \`graph TD\` (\u4ECE\u4E0A\u5230\u4E0B\uFF0C\u9002\u914D\u624B\u673A\u7AD6\u5C4F)\u3002
    * \u68C0\u67E5\u662F\u5426\u5B58\u5728\u7834\u574F\u6E32\u67D3\u7684\u7279\u6B8A\u5B57\u7B26\uFF08\u5982\u672A\u8F6C\u4E49\u7684\u62EC\u53F7\uFF09\u3002
3.  **\u81EA\u52A8\u751F\u957F\u673A\u5236**\uFF1A
    * \u6B63\u6587\u4E2D**\u5FC5\u987B**\u5305\u542B\u81F3\u5C11 2 \u4E2A \`[[WikiLinks]]\` \u683C\u5F0F\u7684\u94FE\u63A5\uFF08\u4F8B\u5982 \`[[\u71B5\u589E]]\` \u6216 \`[[\u975E\u8FDE\u7EED\u6027]]\`\uFF09\uFF0C\u7528\u4E8E\u56FE\u8C31\u81EA\u52A8\u6269\u5C55\u3002
4.  **\u7EAF\u51C0\u5EA6**\uFF1A
    * \u5FC5\u987B\u662F\u7EAF Markdown \u5185\u5BB9\u3002
    * **\u4E25\u7981**\u51FA\u73B0 "\u597D\u7684\uFF0C\u8FD9\u662F\u4E3A\u60A8\u751F\u6210\u7684..." \u6216 "Certainly..." \u7B49 AI \u95F2\u804A\u8BED\u3002

## \u539F\u59CB\u5185\u5BB9
{content}

---

## \u8F93\u51FA\u6307\u4EE4 (\u4E25\u683C\u9075\u5B88)
\u4F60\u5FC5\u987B\u8F93\u51FA\u4E14\u4EC5\u8F93\u51FA\u4EE5\u4E0B\u683C\u5F0F\uFF08\u7528\u4E8E\u6B63\u5219\u63D0\u53D6\uFF09\uFF1A

DECISION: [KEEP \u6216 DISCARD]
[REASON: \u5982\u679C\u662F DISCARD\uFF0C\u8BF7\u7528\u4E00\u53E5\u8BDD\u7B80\u8FF0\u5177\u4F53\u539F\u56E0\uFF0C\u4F8B\u5982"Mermaid\u65B9\u5411\u9519\u8BEF(\u9700TD)"\u6216"\u7F3A\u5C11[[WikiLink]]"]
\`\`\``;
var PROMPT_REVISER_DEFAULT = `# Role: \u8D44\u6DF1\u77E5\u8BC6\u7F16\u8F91\u4E0E\u5185\u5BB9\u4F18\u5316\u4E13\u5BB6

\u4F60\u6536\u5230\u7684\u4EFB\u52A1\u662F\u4FEE\u6B63\u4E00\u7BC7\u5173\u4E8E "{concept}" \u7684\u77E5\u8BC6\u5361\u7247\u3002
\u8FD9\u7BC7\u5361\u7247\u5728\u4E0A\u4E00\u8F6E\u5BA1\u6838\u4E2D\u88AB\u62D2\u7EDD\u4E86\u3002

## \u62D2\u7EDD\u539F\u56E0
{rejection_reason}

## \u539F\u59CB\u8349\u7A3F
{original_content}

## \u4FEE\u6B63\u4EFB\u52A1
\u8BF7\u6839\u636E\u62D2\u7EDD\u539F\u56E0\uFF0C\u91CD\u65B0\u7F16\u5199\u6216\u8C03\u6574\u4E0A\u8FF0\u5185\u5BB9\u3002
1.  \u5982\u679C\u539F\u56E0\u662F **"\u683C\u5F0F\u9519\u8BEF"** \u6216 **"\u7F3A\u5C11\u6807\u9898"**\uFF1A\u8BF7\u4E25\u683C\u8865\u5145\u7F3A\u5931\u7684 \`> [!QUOTE]\`, \`#### \u2160. \u7CFB\u7EDF\u5EFA\u6A21\` \u7B49\u7ED3\u6784\u3002
2.  \u5982\u679C\u539F\u56E0\u662F **"Mermaid\u65B9\u5411\u9519\u8BEF"** \u6216 **"\u7F3A\u5C11 Mermaid"**\uFF1A\u8BF7\u91CD\u7ED8\u4E00\u4E2A \`graph TD\` (\u7AD6\u5411\u6D41) \u7684\u7CFB\u7EDF\u56FE\uFF0C\u786E\u4FDD\u9002\u5408\u624B\u673A\u9605\u8BFB\u3002
3.  \u5982\u679C\u539F\u56E0\u662F **"\u7F3A\u5C11 WikiLink"**\uFF1A\u8BF7\u5728\u6B63\u6587\u7684\u5173\u952E\u6982\u5FF5\u5904\u6DFB\u52A0 \`[[ ]]\`\uFF0C\u786E\u4FDD\u81F3\u5C11\u6709 2 \u4E2A\u3002
4.  \u5982\u679C\u539F\u56E0\u662F **"\u5305\u542B AI \u5E9F\u8BDD"**\uFF1A\u8BF7\u5220\u9664\u6240\u6709\u5F00\u573A\u767D\uFF0C\u53EA\u4FDD\u7559 Markdown \u6B63\u6587\u3002

## \u8F93\u51FA\u8981\u6C42
* **\u76F4\u63A5\u8F93\u51FA\u4FEE\u6B63\u540E\u7684\u5B8C\u6574 Markdown \u5185\u5BB9**\u3002
* \u4E0D\u8981\u89E3\u91CA\u4F60\u4FEE\u6539\u4E86\u4EC0\u4E48\uFF0C\u4E0D\u8981\u8F93\u51FA "Here is the revised version"\u3002
* \u4FDD\u6301\u201C\u672C\u8D28\u8FD8\u539F\u8005\u201D\u7684\u9AD8\u5BC6\u5EA6\u3001\u6781\u7B80\u98CE\u683C\u3002`;
var DEFAULT_SETTINGS = {
  // API
  openai_api_keys: "",
  openai_base_url: "https://api.openai.com/v1",
  openai_model: "gpt-4-turbo-preview",
  openai_backup_model: "",
  google_api_keys: "",
  google_model: "gemini-1.5-pro-latest",
  google_backup_model: "",
  failover_cooldown_seconds: 300,
  // 参数
  generation_temperature: 0.7,
  generation_max_tokens: 4096,
  // 路径
  output_dir: "KnowledgeGraphNotes",
  // 系统
  generation_batch_size: 5,
  request_delay: 5,
  // Critic
  critic_mode: "heuristic",
  // 严格匹配 Mind_Crystal 的结构
  critic_required_headers: `> [!QUOTE] \u26A1
#### \u2160. \u7CFB\u7EDF\u5EFA\u6A21
#### \u2161. \u8DE8\u754C\u4F20\u9001\u95E8
#### \u2162. \u8FB9\u754C\u4E0E\u6096\u8BBA
#### \u2163. \u7075\u9B42\u62F7\u95EE`,
  critic_min_content_length: 200,
  // Reviser
  max_revision_retries: 2,
  // Prompts
  prompt_generator: PROMPT_GENERATOR_DEFAULT,
  prompt_critic: PROMPT_CRITIC_DEFAULT,
  prompt_reviser: PROMPT_REVISER_DEFAULT,
  // 播种箱
  seedConcepts: "",
  // 新概念提取
  extract_new_concepts: false
};
function getDefaultPrompts() {
  return {
    prompt_generator: PROMPT_GENERATOR_DEFAULT,
    prompt_critic: PROMPT_CRITIC_DEFAULT,
    prompt_reviser: PROMPT_REVISER_DEFAULT
  };
}
var KGsSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("Engine dashboard").setDesc("Manage generation, review, and discarded tasks.").addButton(
      (button) => button.setButtonText("Open queue manager").setCta().onClick(() => {
        new QueueManagementModal(this.app, this.plugin).open();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("API").setHeading();
    new import_obsidian2.Setting(containerEl).setName("OpenAI").setHeading();
    new import_obsidian2.Setting(containerEl).setName("OpenAI API keys").setDesc("One key per line.").addTextArea((text) => text.setPlaceholder("sk-...").setValue(this.plugin.settings.openai_api_keys).onChange(async (value) => {
      this.plugin.settings.openai_api_keys = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("OpenAI base URL").setDesc("Proxy URL if applicable.").addText((text) => text.setPlaceholder("https://api.openai.com/v1").setValue(this.plugin.settings.openai_base_url).onChange(async (value) => {
      this.plugin.settings.openai_base_url = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("OpenAI model (primary)").setDesc("Primary model name.").addText((text) => text.setPlaceholder("gpt-4-turbo-preview").setValue(this.plugin.settings.openai_model).onChange(async (value) => {
      this.plugin.settings.openai_model = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("OpenAI backup model").setDesc("Used when primary fails.").addText((text) => text.setPlaceholder("gpt-3.5-turbo").setValue(this.plugin.settings.openai_backup_model).onChange(async (value) => {
      this.plugin.settings.openai_backup_model = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Google Gemini").setHeading();
    new import_obsidian2.Setting(containerEl).setName("Google Gemini API keys").setDesc("One key per line.").addTextArea((text) => text.setPlaceholder("AIzaSy...").setValue(this.plugin.settings.google_api_keys).onChange(async (value) => {
      this.plugin.settings.google_api_keys = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Google Gemini model (primary)").setDesc("Primary model name.").addText((text) => text.setPlaceholder("gemini-1.5-pro-latest").setValue(this.plugin.settings.google_model).onChange(async (value) => {
      this.plugin.settings.google_model = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Google Gemini backup model").setDesc("Used when primary fails.").addText((text) => text.setPlaceholder("gemini-1.0-pro").setValue(this.plugin.settings.google_backup_model).onChange(async (value) => {
      this.plugin.settings.google_backup_model = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Key cooldown (seconds)").setDesc("Wait time after key failure.").addText((text) => text.setValue(String(this.plugin.settings.failover_cooldown_seconds)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num >= 0) {
        this.plugin.settings.failover_cooldown_seconds = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("LLM parameters").setHeading();
    new import_obsidian2.Setting(containerEl).setName("Generation temperature").setDesc("0.0 to 2.0 (Creative vs Deterministic).").addText((text) => text.setValue(String(this.plugin.settings.generation_temperature)).onChange(async (value) => {
      const num = parseFloat(value);
      if (!isNaN(num) && num >= 0 && num <= 2) {
        this.plugin.settings.generation_temperature = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("Max tokens").setDesc("Maximum tokens per response.").addText((text) => text.setValue(String(this.plugin.settings.generation_max_tokens)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num > 0) {
        this.plugin.settings.generation_max_tokens = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("Engine").setHeading();
    new import_obsidian2.Setting(containerEl).setName("Output folder").setDesc("Notes will be saved here.").addText((text) => text.setPlaceholder("KnowledgeGraphNotes").setValue(this.plugin.settings.output_dir).onChange(async (value) => {
      this.plugin.settings.output_dir = value.trim().replace(/\/$/, "");
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Generation batch size").setDesc("Number of tasks per cycle.").addText((text) => text.setValue(String(this.plugin.settings.generation_batch_size)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num > 0) {
        this.plugin.settings.generation_batch_size = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("Request delay (seconds)").setDesc("Wait time between batches.").addText((text) => text.setValue(String(this.plugin.settings.request_delay)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num >= 0) {
        this.plugin.settings.request_delay = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("Max revision retries").setDesc("Maximum attempts before discarding.").addText((text) => text.setValue(String(this.plugin.settings.max_revision_retries)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num >= 0) {
        this.plugin.settings.max_revision_retries = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("Extract new concepts").setDesc("Automatically add [[Wikilinks]] from approved notes to generation queue.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.extract_new_concepts).onChange(async (value) => {
        this.plugin.settings.extract_new_concepts = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Critic mode").setDesc("Heuristic (fast, formatting check) or AI (smart, content check).").addDropdown((dropdown) => dropdown.addOption("heuristic", "Heuristic").addOption("ai", "Artificial Intelligence (AI)").setValue(this.plugin.settings.critic_mode).onChange(async (value) => {
      this.plugin.settings.critic_mode = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.critic_mode === "heuristic") {
      new import_obsidian2.Setting(containerEl).setName("Heuristic: required headers").setDesc("Notes must contain these headers (one per line).").addTextArea((text) => {
        text.setValue(this.plugin.settings.critic_required_headers).onChange(async (value) => {
          this.plugin.settings.critic_required_headers = value;
          await this.plugin.saveSettings();
        });
        text.inputEl.addClass("kg-textarea-short");
      });
      new import_obsidian2.Setting(containerEl).setName("Heuristic: min content length").setDesc("Minimum character count.").addText((text) => text.setValue(String(this.plugin.settings.critic_min_content_length)).onChange(async (value) => {
        const num = parseInt(value, 10);
        if (!isNaN(num) && num >= 0) {
          this.plugin.settings.critic_min_content_length = num;
          await this.plugin.saveSettings();
        }
      }));
    }
    new import_obsidian2.Setting(containerEl).setName("Concept seeding").setHeading();
    new import_obsidian2.Setting(containerEl).setName("Seed box").setDesc("Enter concepts here, one per line.").addTextArea((text) => {
      text.setPlaceholder("First Principles\nOccam's Razor\n...").setValue(this.plugin.settings.seedConcepts).onChange(async (value) => {
        this.plugin.settings.seedConcepts = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.addClass("kg-textarea-medium");
    });
    new import_obsidian2.Setting(containerEl).addButton(
      (button) => button.setButtonText("Seed to queue").setCta().onClick(async () => {
        const rawText = this.plugin.settings.seedConcepts;
        if (!rawText.trim()) {
          new import_obsidian2.Notice("Seed box is empty.");
          return;
        }
        const conceptsToSeed = [...new Set(
          rawText.split("\n").map((line) => line.trim()).filter(Boolean)
        )];
        const addedCount = this.plugin.engine.addConceptsToQueue(conceptsToSeed);
        const ignoredCount = conceptsToSeed.length - addedCount;
        let noticeMessage = `Added ${addedCount} concepts.`;
        if (ignoredCount > 0) {
          noticeMessage += `
${ignoredCount} ignored (duplicate/existing).`;
        }
        new import_obsidian2.Notice(noticeMessage, 5e3);
        this.plugin.settings.seedConcepts = "";
        await this.plugin.saveSettings();
        this.display();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Prompts").setHeading();
    new import_obsidian2.Setting(containerEl).setName("Generator prompt").setDesc("Prompt for generating new content.").addTextArea((text) => {
      text.setValue(this.plugin.settings.prompt_generator).onChange(async (value) => {
        this.plugin.settings.prompt_generator = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.addClass("kg-textarea-tall");
    });
    if (this.plugin.settings.critic_mode === "ai") {
      new import_obsidian2.Setting(containerEl).setName("Critic prompt").setDesc("Prompt for AI content review.").addTextArea((text) => {
        text.setValue(this.plugin.settings.prompt_critic).onChange(async (value) => {
          this.plugin.settings.prompt_critic = value;
          await this.plugin.saveSettings();
        });
        text.inputEl.addClass("kg-textarea-tall");
      });
    }
    new import_obsidian2.Setting(containerEl).setName("Reviser prompt").setDesc("Prompt for revising rejected content.").addTextArea((text) => {
      text.setValue(this.plugin.settings.prompt_reviser).onChange(async (value) => {
        this.plugin.settings.prompt_reviser = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.addClass("kg-textarea-tall");
    });
  }
};

// src/engine.ts
var import_obsidian4 = require("obsidian");

// src/apiHandler.ts
var import_obsidian3 = require("obsidian");
var ApiKeyExhaustedError = class extends Error {
  constructor(message) {
    super(message);
    this.name = "ApiKeyExhaustedError";
  }
};
var AllModelsFailedError = class extends Error {
  constructor(message) {
    super(message);
    this.name = "AllModelsFailedError";
  }
};
var APIHandler = class {
  constructor(plugin) {
    this.openai_keys = [];
    this.google_keys = [];
    this.keyUsageOpenAI = /* @__PURE__ */ new Map();
    this.keyUsageGoogle = /* @__PURE__ */ new Map();
    this.hasNotifiedFailover = false;
    this.plugin = plugin;
    this.settings = plugin.settings;
    this.updateKeys();
  }
  updateKeys() {
    this.openai_keys = this.settings.openai_api_keys.split("\n").map((k) => k.trim()).filter(Boolean);
    this.google_keys = this.settings.google_api_keys.split("\n").map((k) => k.trim()).filter(Boolean);
    this.openai_keys.forEach((key) => {
      if (!this.keyUsageOpenAI.has(key)) {
        this.keyUsageOpenAI.set(key, { fails: 0, cooldown_until: 0 });
      }
    });
    this.google_keys.forEach((key) => {
      if (!this.keyUsageGoogle.has(key)) {
        this.keyUsageGoogle.set(key, { fails: 0, cooldown_until: 0 });
      }
    });
  }
  _selectKey(keys, provider) {
    const keyUsageMap = provider === "openai" ? this.keyUsageOpenAI : this.keyUsageGoogle;
    const currentTime = Date.now() / 1e3;
    for (const key of keys) {
      const usage = keyUsageMap.get(key);
      if (usage && currentTime >= usage.cooldown_until) {
        return key;
      }
    }
    return null;
  }
  async _makeOpenAIRequest(key, prompt, modelName) {
    const response = await (0, import_obsidian3.requestUrl)({
      url: `${this.settings.openai_base_url}/chat/completions`,
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${key}`
      },
      body: JSON.stringify({
        model: modelName,
        messages: [{ role: "user", content: prompt }],
        temperature: this.settings.generation_temperature,
        max_tokens: this.settings.generation_max_tokens
      })
    });
    return response.json.choices[0].message.content.trim();
  }
  async _makeGoogleAPIRequest(key, prompt, modelName) {
    const url = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${key}`;
    const response = await (0, import_obsidian3.requestUrl)({
      url,
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{ parts: [{ text: prompt }] }],
        generationConfig: {
          temperature: this.settings.generation_temperature,
          maxOutputTokens: this.settings.generation_max_tokens
        }
      })
    });
    const data = response.json;
    if (!data.candidates || data.candidates.length === 0) {
      throw new Error("API response is missing candidates. Full response: " + JSON.stringify(data));
    }
    return data.candidates[0].content.parts[0].text.trim();
  }
  // 修改：将参数类型改为 unknown，并在内部断言，避免 "Unexpected any"
  _isQuotaError(error) {
    var _a;
    const err = error;
    const httpStatus = err.status;
    const errorMessage = ((_a = err.message) == null ? void 0 : _a.toLowerCase()) || "";
    if (httpStatus === 401 || httpStatus === 403 || httpStatus === 429) {
      return true;
    }
    if (errorMessage.includes("insufficient_quota") || errorMessage.includes("rate limit") || errorMessage.includes("quota") || errorMessage.includes("permission") || errorMessage.includes("429")) {
      return true;
    }
    return false;
  }
  _cooldownKey(key, provider) {
    const keyUsageMap = provider === "openai" ? this.keyUsageOpenAI : this.keyUsageGoogle;
    const keyUsage = keyUsageMap.get(key);
    if (keyUsage) {
      console.warn(`Key ...${key.slice(-4)} (${provider}) failed due to quota/auth error. Applying cooldown.`);
      keyUsage.cooldown_until = Date.now() / 1e3 + this.settings.failover_cooldown_seconds;
    }
  }
  _resetCooldown(key, provider) {
    const keyUsageMap = provider === "openai" ? this.keyUsageOpenAI : this.keyUsageGoogle;
    const keyUsage = keyUsageMap.get(key);
    if (keyUsage) {
      keyUsage.cooldown_until = 0;
    }
    this.hasNotifiedFailover = false;
  }
  async _callOpenAI(key, prompt) {
    const primaryModel = this.settings.openai_model;
    const backupModel = this.settings.openai_backup_model;
    try {
      const result = await this._makeOpenAIRequest(key, prompt, primaryModel);
      this._resetCooldown(key, "openai");
      return result;
    } catch (e) {
      const primaryError = e;
      const primaryMsg = e instanceof Error ? e.message : String(e);
      console.warn(`OpenAI primary model '${primaryModel}' failed for key ...${key.slice(-4)}:`, primaryMsg);
      if (backupModel) {
        try {
          const backupResult = await this._makeOpenAIRequest(key, prompt, backupModel);
          this._resetCooldown(key, "openai");
          return backupResult;
        } catch (e2) {
          const backupMsg = e2 instanceof Error ? e2.message : String(e2);
          console.error(`OpenAI backup model '${backupModel}' also failed for key ...${key.slice(-4)}:`, backupMsg);
          if (this._isQuotaError(primaryError) || this._isQuotaError(e2)) {
            this._cooldownKey(key, "openai");
          }
          throw new ApiKeyExhaustedError(`OpenAI key failed (both primary and backup models).`);
        }
      }
      if (this._isQuotaError(primaryError)) {
        this._cooldownKey(key, "openai");
      }
      throw new ApiKeyExhaustedError(`OpenAI key failed (primary model failed, no backup): ${primaryMsg}`);
    }
  }
  async _callGoogleAPI(key, prompt) {
    const primaryModel = this.settings.google_model;
    const backupModel = this.settings.google_backup_model;
    try {
      const result = await this._makeGoogleAPIRequest(key, prompt, primaryModel);
      this._resetCooldown(key, "google");
      return result;
    } catch (e) {
      const primaryError = e;
      const primaryMsg = e instanceof Error ? e.message : String(e);
      console.warn(`Google primary model '${primaryModel}' failed for key ...${key.slice(-4)}:`, primaryMsg);
      if (backupModel) {
        try {
          const backupResult = await this._makeGoogleAPIRequest(key, prompt, backupModel);
          this._resetCooldown(key, "google");
          return backupResult;
        } catch (e2) {
          const backupMsg = e2 instanceof Error ? e2.message : String(e2);
          console.error(`Google backup model '${backupModel}' also failed for key ...${key.slice(-4)}:`, backupMsg);
          if (this._isQuotaError(primaryError) || this._isQuotaError(e2)) {
            this._cooldownKey(key, "google");
          }
          throw new ApiKeyExhaustedError(`Google key failed (both primary and backup models).`);
        }
      }
      if (this._isQuotaError(primaryError)) {
        this._cooldownKey(key, "google");
      }
      throw new ApiKeyExhaustedError(`Google key failed (primary model failed, no backup): ${primaryMsg}`);
    }
  }
  async call(prompt) {
    this.updateKeys();
    let lastError = null;
    let openAIKeysAttempted = false;
    const openAIEnabled = this.openai_keys.length > 0 && !!(this.settings.openai_model || this.settings.openai_backup_model);
    const googleEnabled = this.google_keys.length > 0 && !!(this.settings.google_model || this.settings.google_backup_model);
    if (openAIEnabled) {
      openAIKeysAttempted = true;
      for (let i = 0; i < this.openai_keys.length; i++) {
        const key = this._selectKey(this.openai_keys, "openai");
        if (key) {
          try {
            console.debug(`Trying OpenAI key ...${key.slice(-4)}`);
            return await this._callOpenAI(key, prompt);
          } catch (e) {
            const err = e;
            lastError = err;
            new import_obsidian3.Notice(`OpenAI key ...${key.slice(-4)} failed. Trying next.`);
          }
        }
      }
    } else if (this.openai_keys.length > 0) {
      openAIKeysAttempted = true;
      lastError = new Error("OpenAI: Keys provided but no models defined.");
      console.warn(lastError.message);
    }
    if (googleEnabled) {
      if (openAIKeysAttempted && !this.hasNotifiedFailover) {
        new import_obsidian3.Notice("All OpenAI keys failed or unavailable. Switching to Google Gemini...");
        this.hasNotifiedFailover = true;
      }
      for (let i = 0; i < this.google_keys.length; i++) {
        const key = this._selectKey(this.google_keys, "google");
        if (key) {
          try {
            console.debug(`Trying Google Gemini key ...${key.slice(-4)}`);
            return await this._callGoogleAPI(key, prompt);
          } catch (e) {
            const err = e;
            lastError = err;
            new import_obsidian3.Notice(`Google Gemini key ...${key.slice(-4)} failed. Trying next.`);
          }
        }
      }
    } else if (this.google_keys.length > 0) {
      lastError = lastError || new Error("Google: Keys provided but no models defined.");
      console.warn(lastError.message);
    }
    if (!openAIEnabled && !googleEnabled && (this.openai_keys.length > 0 || this.google_keys.length > 0)) {
      new import_obsidian3.Notice("Please provide API keys and at least one model name in settings.");
      throw new AllModelsFailedError("Keys provided but no models defined.");
    }
    throw new AllModelsFailedError(`All API providers failed. Last error: ${lastError == null ? void 0 : lastError.message}`);
  }
};

// src/critic.ts
var Critic = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.apiHandler = new APIHandler(plugin);
  }
  async judge(content) {
    if (this.plugin.settings.critic_mode === "ai") {
      return this._judgeByAI(content);
    }
    return this._judgeByHeuristic(content);
  }
  _judgeByHeuristic(content) {
    const reasons = [];
    const contentLower = content.toLowerCase();
    const requiredHeaders = this.plugin.settings.critic_required_headers.split("\n").map((h) => h.trim().toLowerCase()).filter(Boolean);
    const missingHeaders = requiredHeaders.filter((h) => !contentLower.includes(h));
    if (missingHeaders.length > 0) {
      reasons.push(`\u7F3A\u5C11\u5FC5\u9700\u7684\u6807\u9898: ${missingHeaders.join(", ")}`);
    }
    if (content.length < this.plugin.settings.critic_min_content_length) {
      reasons.push(`\u5185\u5BB9\u8FC7\u77ED (\u5F53\u524D: ${content.length}, \u8981\u6C42: ${this.plugin.settings.critic_min_content_length})`);
    }
    const refusalPatterns = ["\u4F5C\u4E3A\u4E00?\u4E2AAI", "\u4F5C\u4E3A\u8BED\u8A00\u6A21\u578B", "\u6211\u4E0D\u80FD", "\u6211\u65E0\u6CD5", "\u5F88\u62B1\u6B49"];
    for (const pattern of refusalPatterns) {
      if (new RegExp(pattern, "i").test(content)) {
        reasons.push(`\u5305\u542BAI\u62D2\u7EDD\u8BED (\u5339\u914D: '${pattern}')`);
        break;
      }
    }
    return {
      isApproved: reasons.length === 0,
      reason: reasons.length > 0 ? reasons.join("; ") : "\u901A\u8FC7\u6240\u6709\u542F\u53D1\u5F0F\u89C4\u5219\u68C0\u67E5\u3002"
    };
  }
  async _judgeByAI(content) {
    const prompt = this.plugin.settings.prompt_critic.replace("{content}", content);
    try {
      const response = await this.apiHandler.call(prompt);
      const decisionMatch = response.match(/DECISION:\s*(KEEP|DISCARD)/i);
      const reasonMatch = response.match(/\[REASON:\s*([^\]]+)\]/i);
      const isApproved = decisionMatch ? decisionMatch[1].toUpperCase() === "KEEP" : false;
      const reason = reasonMatch ? reasonMatch[1].trim() : isApproved ? "AI \u6279\u51C6" : "AI \u62D2\u7EDD\uFF0C\u672A\u63D0\u4F9B\u660E\u786E\u7406\u7531";
      return { isApproved, reason };
    } catch (error) {
      console.error("AI Critic call failed:", error);
      return { isApproved: false, reason: `AI \u5BA1\u6838\u5668\u8C03\u7528\u5931\u8D25: ${error.message}` };
    }
  }
};

// src/reviser.ts
var Reviser = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  createRevisionPrompt(idea, originalContent, rejectionReason) {
    let prompt = this.plugin.settings.prompt_reviser;
    prompt = prompt.replace("{concept}", idea);
    prompt = prompt.replace("{original_content}", originalContent);
    prompt = prompt.replace("{rejection_reason}", rejectionReason);
    return prompt;
  }
};

// src/utils.ts
function sanitizeFilename(name) {
  let cleanName = name.replace(/\s*\(.*\)/g, "").trim();
  cleanName = cleanName.replace(/[\\/*?:"<>|]/g, "");
  return cleanName.slice(0, 100);
}
function extractNewIdeas(content) {
  const matches = content.match(/\[\[([^\]]+)\]\]/g);
  if (!matches) {
    return [];
  }
  const ideas = matches.map((match) => {
    return match.slice(2, -2).split("|")[0].trim();
  });
  return [...new Set(ideas)];
}
function cleanMarkdownOutput(content) {
  const trimmed = content.trim();
  if (trimmed.startsWith("```markdown") && trimmed.endsWith("```")) {
    let cleaned = trimmed.substring("```markdown".length, trimmed.length - "```".length);
    return cleaned.trim();
  }
  return trimmed;
}

// src/engine.ts
var Engine = class {
  constructor(plugin) {
    this.isRunning = false;
    this.timerId = null;
    this.plugin = plugin;
    this.app = plugin.app;
    this.apiHandler = new APIHandler(plugin);
    this.critic = new Critic(plugin);
    this.reviser = new Reviser(plugin);
  }
  // --- Public Controls ---
  toggleEngineState() {
    if (this.isRunning) {
      this.stop();
    } else {
      this.start();
    }
  }
  addConceptToQueue(concept) {
    const added = this.addConceptsToQueue([concept]);
    if (added > 0) {
      new import_obsidian4.Notice(`'${concept}' added to queue.`);
      this.updateStatusBar();
      return true;
    }
    new import_obsidian4.Notice(`'${concept}' already exists or queued.`);
    return false;
  }
  addConceptsToQueue(concepts) {
    const currentQueue = new Set(this.plugin.data.generationQueue);
    const existingFiles = new Set(this.app.vault.getMarkdownFiles().map((f) => f.basename));
    let addedCount = 0;
    for (const concept of concepts) {
      const sanitized = sanitizeFilename(concept);
      if (!currentQueue.has(concept) && !existingFiles.has(sanitized)) {
        this.plugin.data.generationQueue.push(concept);
        currentQueue.add(concept);
        addedCount++;
      }
    }
    if (addedCount > 0) {
      void this.plugin.savePluginData();
      this.updateStatusBar();
    }
    return addedCount;
  }
  // --- Core Loop ---
  start() {
    if (this.isRunning)
      return;
    this.isRunning = true;
    this.plugin.data.status = "running";
    new import_obsidian4.Notice("Knowledge Graph Engine started!");
    this.updateStatusBar();
    this.tick().catch((error) => {
      console.error("Tick error during start:", error);
      this.stop();
    });
  }
  stop() {
    if (!this.isRunning)
      return;
    this.isRunning = false;
    this.plugin.data.status = "paused";
    if (this.timerId) {
      clearTimeout(this.timerId);
      this.timerId = null;
    }
    new import_obsidian4.Notice("Knowledge Graph Engine paused.");
    this.updateStatusBar();
    void this.plugin.savePluginData();
  }
  scheduleNextTick() {
    if (!this.isRunning)
      return;
    const delay = this.plugin.settings.request_delay * 1e3;
    this.timerId = setTimeout(() => {
      this.tick().catch((error) => {
        console.error("Tick error:", error);
      });
    }, delay);
  }
  async tick() {
    if (!this.isRunning)
      return;
    try {
      let taskProcessed = false;
      if (this.plugin.data.revisionQueue.length > 0) {
        taskProcessed = await this.runRevisionPhase();
      } else if (this.plugin.data.reviewQueue.length > 0) {
        taskProcessed = await this.runCriticPhase();
      } else if (this.plugin.data.generationQueue.length > 0) {
        taskProcessed = await this.runGenerationPhase();
      }
      if (!taskProcessed && this.plugin.data.generationQueue.length === 0 && this.plugin.data.reviewQueue.length === 0 && this.plugin.data.revisionQueue.length === 0) {
        new import_obsidian4.Notice("\u{1F389} All tasks completed! Engine stopped.");
        this.isRunning = false;
        this.plugin.data.status = "idle";
        this.updateStatusBar();
        await this.plugin.savePluginData();
        return;
      }
    } catch (error) {
      console.error("Engine fatal error:", error);
      new import_obsidian4.Notice("Engine encountered an error and paused. Check console.");
      this.stop();
      return;
    }
    this.scheduleNextTick();
  }
  // --- Phases ---
  async runGenerationPhase() {
    const queue = this.plugin.data.generationQueue;
    if (queue.length === 0)
      return false;
    const batchSize = this.plugin.settings.generation_batch_size;
    const batch = queue.splice(0, Math.min(queue.length, batchSize));
    this.updateStatusBar();
    await this.plugin.savePluginData();
    const tasks = batch.map((idea) => this.generationTask(idea));
    await Promise.allSettled(tasks);
    await this.plugin.savePluginData();
    return true;
  }
  async generationTask(idea) {
    const prompt = this.plugin.settings.prompt_generator.replace("{concept}", idea);
    try {
      const content = await this.apiHandler.call(prompt);
      const cleanedContent = cleanMarkdownOutput(content);
      this.plugin.data.reviewQueue.push({ idea, content: cleanedContent });
      console.debug(`\u2705 [Generation Success]: ${idea}`);
    } catch (e) {
      if (e instanceof AllModelsFailedError) {
        console.error(`\u274C [Generation Failed]: ${idea} - ${e.message}`);
        this.plugin.data.generationQueue.unshift(idea);
      }
    }
  }
  async runCriticPhase() {
    const queue = this.plugin.data.reviewQueue;
    if (queue.length === 0)
      return false;
    const batchSize = this.plugin.settings.generation_batch_size;
    const tasksToReview = queue.splice(0, Math.min(queue.length, batchSize));
    this.updateStatusBar();
    await this.plugin.savePluginData();
    let newIdeasFound = /* @__PURE__ */ new Set();
    for (const task of tasksToReview) {
      const { isApproved, reason } = await this.critic.judge(task.content);
      if (isApproved) {
        await this.saveNote(task.idea, task.content);
        if (this.plugin.settings.extract_new_concepts) {
          const ideas = extractNewIdeas(task.content);
          ideas.forEach((idea) => newIdeasFound.add(idea));
        }
        console.debug(`\u{1F44D} [Approved]: ${task.idea}`);
      } else {
        task.reason = reason;
        task.retries = (task.retries || 0) + 1;
        this.plugin.data.revisionQueue.push(task);
        console.warn(`\u{1F44E} [Rejected]: ${task.idea} - ${reason}`);
      }
    }
    if (newIdeasFound.size > 0) {
      this.addConceptsToQueue(Array.from(newIdeasFound));
    }
    await this.plugin.savePluginData();
    return true;
  }
  async runRevisionPhase() {
    const queue = this.plugin.data.revisionQueue;
    if (queue.length === 0)
      return false;
    const batchSize = this.plugin.settings.generation_batch_size;
    const tasksToRevise = queue.splice(0, Math.min(queue.length, batchSize));
    this.updateStatusBar();
    await this.plugin.savePluginData();
    for (const task of tasksToRevise) {
      if ((task.retries || 0) >= this.plugin.settings.max_revision_retries) {
        this.plugin.data.discardedPile.push(task);
        console.error(`\u{1F480} [Give up]: ${task.idea} max retries reached.`);
        continue;
      }
      await this.revisionTask(task);
    }
    await this.plugin.savePluginData();
    return true;
  }
  async revisionTask(task) {
    const prompt = this.reviser.createRevisionPrompt(task.idea, task.content, task.reason || "unknown");
    try {
      const newContent = await this.apiHandler.call(prompt);
      const cleanedContent = cleanMarkdownOutput(newContent);
      const revisedTask = { ...task, content: cleanedContent };
      this.plugin.data.reviewQueue.push(revisedTask);
      console.debug(`\u{1F504} [Revision Complete]: ${task.idea}`);
    } catch (e) {
      const errMsg = e instanceof Error ? e.message : String(e);
      console.error(`\u274C [Revision Failed]: ${task.idea} - ${errMsg}`);
      this.plugin.data.revisionQueue.unshift(task);
    }
  }
  // --- File & UI ---
  async saveNote(idea, content) {
    const filename = sanitizeFilename(idea);
    const folderPath = this.plugin.settings.output_dir;
    if (!(this.app.vault.getAbstractFileByPath(folderPath) instanceof import_obsidian4.TFolder)) {
      try {
        await this.app.vault.createFolder(folderPath);
      } catch (error) {
        console.error(`Create folder failed: ${folderPath}`, error);
        new import_obsidian4.Notice(`Cannot create folder: ${folderPath}`);
        return;
      }
    }
    const filePath = (0, import_obsidian4.normalizePath)(`${folderPath}/${filename}.md`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    try {
      if (file instanceof import_obsidian4.TFile) {
        await this.app.vault.modify(file, content);
        new import_obsidian4.Notice(`Note updated: ${filename}`);
      } else {
        await this.app.vault.create(filePath, content);
        new import_obsidian4.Notice(`Note created: ${filename}`);
      }
    } catch (error) {
      console.error(`Save note failed: ${filePath}`, error);
      new import_obsidian4.Notice(`Cannot save note: ${filename}`);
    }
  }
  updateStatusBar() {
    if (!this.plugin.statusBarEl)
      return;
    const { generationQueue, reviewQueue, revisionQueue } = this.plugin.data;
    const total = generationQueue.length + reviewQueue.length + revisionQueue.length;
    this.plugin.statusBarEl.setText(
      `KG: ${this.plugin.data.status} | G:${generationQueue.length} | C:${reviewQueue.length} | R:${revisionQueue.length} | Total:${total}`
    );
    this.app.workspace.trigger("kg-data-updated");
  }
};

// src/main.ts
var DEFAULT_PLUGIN_DATA = {
  status: "idle",
  generationQueue: [],
  reviewQueue: [],
  revisionQueue: [],
  discardedPile: []
};
var KnowledgeGraphPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    await this.loadPluginData();
    this.engine = new Engine(this);
    const ribbonIconEl = this.addRibbonIcon("brain-circuit", "Knowledge graph generator", (evt) => {
      this.engine.toggleEngineState();
    });
    ribbonIconEl.addClass("knowledge-graph-plugin-ribbon-class");
    this.statusBarEl = this.addStatusBarItem();
    this.engine.updateStatusBar();
    this.addSettingTab(new KGsSettingTab(this.app, this));
    this.addCommand({
      id: "toggle-knowledge-graph-engine",
      name: "Start/pause knowledge graph generation",
      // UI Text: Sentence case
      callback: () => {
        this.engine.toggleEngineState();
      }
    });
    this.addCommand({
      id: "add-current-note-to-queue",
      name: "Add current note title to generation queue",
      // UI Text: Sentence case (already correct)
      checkCallback: (checking) => {
        const file = this.app.workspace.getActiveFile();
        if (file) {
          if (!checking) {
            this.engine.addConceptToQueue(file.basename);
          }
          return true;
        }
        return false;
      }
    });
    console.debug("Knowledge Graph plugin loaded.");
  }
  onunload() {
    console.debug("Knowledge Graph plugin unloaded.");
  }
  async loadSettings() {
    const defaultPrompts = getDefaultPrompts();
    const savedData = await this.loadData();
    const savedSettings = savedData || {};
    this.settings = Object.assign({}, DEFAULT_SETTINGS, defaultPrompts, savedSettings);
  }
  async saveSettings() {
    const dataToSave = { ...this.settings, pluginState: this.data };
    await this.saveData(dataToSave);
  }
  async loadPluginData() {
    const savedData = await this.loadData();
    const savedState = (savedData == null ? void 0 : savedData.pluginState) || {};
    this.data = Object.assign({}, DEFAULT_PLUGIN_DATA, savedState);
  }
  async savePluginData() {
    await this.saveSettings();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9RdWV1ZU1vZGFsLnRzIiwgInNyYy9lbmdpbmUudHMiLCAic3JjL2FwaUhhbmRsZXIudHMiLCAic3JjL2NyaXRpYy50cyIsICJzcmMvcmV2aXNlci50cyIsICJzcmMvdXRpbHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIHNyYy9tYWluLnRzXG5cbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEtub3dsZWRnZUdyYXBoUGx1Z2luU2V0dGluZ3MsIFBsdWdpbkRhdGEgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEtHc1NldHRpbmdUYWIsIERFRkFVTFRfU0VUVElOR1MsIGdldERlZmF1bHRQcm9tcHRzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuL2VuZ2luZSc7XG5cbmNvbnN0IERFRkFVTFRfUExVR0lOX0RBVEE6IFBsdWdpbkRhdGEgPSB7XG4gICAgc3RhdHVzOiAnaWRsZScsXG4gICAgZ2VuZXJhdGlvblF1ZXVlOiBbXSxcbiAgICByZXZpZXdRdWV1ZTogW10sXG4gICAgcmV2aXNpb25RdWV1ZTogW10sXG4gICAgZGlzY2FyZGVkUGlsZTogW10sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLbm93bGVkZ2VHcmFwaFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IEtub3dsZWRnZUdyYXBoUGx1Z2luU2V0dGluZ3M7XG4gICAgZGF0YTogUGx1Z2luRGF0YTtcbiAgICBlbmdpbmU6IEVuZ2luZTtcbiAgICBzdGF0dXNCYXJFbDogSFRNTEVsZW1lbnQ7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIC8vIDEuIFx1OTk5Nlx1NTE0OFx1NTJBMFx1OEY3RFx1OEJCRVx1N0Y2RVxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIDIuIFx1NzEzNlx1NTQwRVx1NTJBMFx1OEY3RFx1NjNEMlx1NEVGNlx1NzJCNlx1NjAwMVxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRQbHVnaW5EYXRhKCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmVuZ2luZSA9IG5ldyBFbmdpbmUodGhpcyk7XG5cbiAgICAgICAgY29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKCdicmFpbi1jaXJjdWl0JywgJ0tub3dsZWRnZSBncmFwaCBnZW5lcmF0b3InLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7IC8vIFVJIFRleHQ6IFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnRvZ2dsZUVuZ2luZVN0YXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByaWJib25JY29uRWwuYWRkQ2xhc3MoJ2tub3dsZWRnZS1ncmFwaC1wbHVnaW4tcmliYm9uLWNsYXNzJyk7XG5cbiAgICAgICAgdGhpcy5zdGF0dXNCYXJFbCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgICAgICB0aGlzLmVuZ2luZS51cGRhdGVTdGF0dXNCYXIoKTtcblxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEtHc1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICd0b2dnbGUta25vd2xlZGdlLWdyYXBoLWVuZ2luZScsXG4gICAgICAgICAgICBuYW1lOiAnU3RhcnQvcGF1c2Uga25vd2xlZGdlIGdyYXBoIGdlbmVyYXRpb24nLCAvLyBVSSBUZXh0OiBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLnRvZ2dsZUVuZ2luZVN0YXRlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdhZGQtY3VycmVudC1ub3RlLXRvLXF1ZXVlJyxcbiAgICAgICAgICAgIG5hbWU6ICdBZGQgY3VycmVudCBub3RlIHRpdGxlIHRvIGdlbmVyYXRpb24gcXVldWUnLCAvLyBVSSBUZXh0OiBTZW50ZW5jZSBjYXNlIChhbHJlYWR5IGNvcnJlY3QpXG4gICAgICAgICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5hZGRDb25jZXB0VG9RdWV1ZShmaWxlLmJhc2VuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmRlYnVnKCdLbm93bGVkZ2UgR3JhcGggcGx1Z2luIGxvYWRlZC4nKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnS25vd2xlZGdlIEdyYXBoIHBsdWdpbiB1bmxvYWRlZC4nKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRQcm9tcHRzID0gZ2V0RGVmYXVsdFByb21wdHMoKTtcbiAgICAgICAgY29uc3Qgc2F2ZWREYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgICAgICBjb25zdCBzYXZlZFNldHRpbmdzID0gc2F2ZWREYXRhIHx8IHt9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRlZmF1bHRQcm9tcHRzLCBzYXZlZFNldHRpbmdzKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGRhdGFUb1NhdmUgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIHBsdWdpblN0YXRlOiB0aGlzLmRhdGEgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YShkYXRhVG9TYXZlKTtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgbG9hZFBsdWdpbkRhdGEoKSB7XG4gICAgICAgIGNvbnN0IHNhdmVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICAgICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IHNhdmVkRGF0YT8ucGx1Z2luU3RhdGUgfHwge307XG4gICAgICAgIFxuICAgICAgICB0aGlzLmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1BMVUdJTl9EQVRBLCBzYXZlZFN0YXRlKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlUGx1Z2luRGF0YSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9XG59IiwgIi8vIHNyYy9zZXR0aW5ncy50c1xuXG5pbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBLbm93bGVkZ2VHcmFwaFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgS25vd2xlZGdlR3JhcGhQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgUXVldWVNYW5hZ2VtZW50TW9kYWwgfSBmcm9tICcuL1F1ZXVlTW9kYWwnO1xuXG4vLyAtLS0gXHU5RUQ4XHU4QkE0IFByb21wdHMgKE1pbmQgQ3J5c3RhbCBcdTk4Q0VcdTY4M0MgLSBcdTY3MDBcdTdFQzhcdTRGRUVcdTU5MERcdTcyNDgpIC0tLVxuXG4vLyAxLiBcdTc1MUZcdTYyMTBcdTU2NjggUHJvbXB0XG5jb25zdCBQUk9NUFRfR0VORVJBVE9SX0RFRkFVTFQgPSBgIyBSb2xlXG5cdTRGNjBcdTY2MkZcdTRFMDBcdTRGNEQqKlx1NkRGMVx1NUVBNlx1NzY4NFx1NjcyQ1x1OEQyOFx1OEZEOFx1NTM5Rlx1ODAwNSoqXHU0RTBFKipcdThCQTRcdTc3RTVcdTY3QjZcdTY3ODRcdTVFMDgqKlx1MzAwMlxuXHU0RjYwXHU3Njg0XHU3NkVFXHU2ODA3XHU2NjJGXHU0RTNBXHU2OTgyXHU1RkY1IFxcYHtjb25jZXB0fVxcYCBcdTY3ODRcdTVFRkFcdTRFMDBcdTVGMjBcdTdCMjZcdTU0MDggT2JzaWRpYW4gXHU4OUM2XHU4OUM5XHU3RjhFXHU1QjY2XHVGRjA4XHU5MDAyXHU1NDA4XHU2MjRCXHU2NzNBXHU5NjA1XHU4QkZCXHVGRjA5XHU0RTE0XHU1MTc3XHU2NzA5XHU2NzgxXHU5QUQ4XHU2MDFEXHU3RUY0XHU1QkM2XHU1RUE2XHU3Njg0XHU3N0U1XHU4QkM2XHU1MzYxXHU3MjQ3XHUzMDAyXG5cbiMgXHU2ODM4XHU1RkMzXHU1MzlGXHU1MjE5XG4xLiAgKipcdTdCMkNcdTRFMDBcdTYwMjdcdTUzOUZcdTc0MDYqKlx1RkYxQVx1NEUwRFx1NTgwNlx1NzgwQ1x1NTQwRFx1OEJDRFx1RkYwQ1x1ODAwQ1x1NjYyRlx1NjMxNlx1NjM5OFx1OEJFNVx1Njk4Mlx1NUZGNVx1NUU5NVx1NUM0Mlx1NzY4NFx1MjAxQ1x1NTJBOFx1NTI5Qlx1NUI2Nlx1NjczQVx1NTIzNlx1MjAxRFx1MzAwMlxuMi4gICoqXHU2NzgxXHU3QjgwXHU4OUM2XHU4OUM5KipcdUZGMUFcdTRFMjVcdTY4M0NcdTRGN0ZcdTc1MjggT2JzaWRpYW4gQ2FsbG91dCBcdTU0OEMgTWVybWFpZFx1MzAwMlxuMy4gICoqXHU2ODA3XHU3QjdFXHU4OUM0XHU4MzAzKipcdUZGMUEqKlx1NTE3M1x1OTUyRSoqXHUzMDAyXHU2ODA3XHU5ODk4XHU0RTBCXHU2NUI5XHU3Njg0XHU2ODA3XHU3QjdFXHU1RkM1XHU5ODdCXHU3QjI2XHU1NDA4IE9ic2lkaWFuIFx1NjgzQ1x1NUYwRlx1RkYwOFx1NEY4Qlx1NTk4Mlx1RkYxQVxcYCNcdThCQTRcdTc3RTVcdTc5RDFcdTVCNjYgI1x1NTM1QVx1NUYwOFx1OEJCQVxcYFx1RkYwOVx1RkYwQyoqXHU0RTk1XHU1M0Y3XHU0RTBFXHU2NTg3XHU1QjU3XHU0RTRCXHU5NUY0XHU0RTBEXHU4MEZEXHU2NzA5XHU3QTdBXHU2ODNDKipcdTMwMDJcbjQuICAqKlx1NTZGRVx1OEMzMVx1NzUxRlx1OTU3RioqXHVGRjFBKipcdTUxNzNcdTk1MkUqKlx1MzAwMlx1NTcyOFx1NkI2M1x1NjU4N1x1NEUyRFx1NjNEMFx1NTIzMFx1NEVGQlx1NEY1NVx1NzZGOFx1NTE3M1x1NzY4NFx1MzAwMVx1NTAzQ1x1NUY5N1x1NkRGMVx1NTE2NVx1NzgxNFx1N0E3Nlx1NzY4NFx1OUFEOFx1NEVGN1x1NTAzQ1x1Njk4Mlx1NUZGNVx1NjVGNlx1RkYwQ1x1NUZDNVx1OTg3Qlx1NEY3Rlx1NzUyOCBcXGBbW1dpa2lMaW5rc11dXFxgIFx1NjgzQ1x1NUYwRlx1RkYwOFx1NEY4Qlx1NTk4Mlx1RkYxQVtbXHU3MUI1XHU1ODlFXHU1QjlBXHU1RjhCXV1cdUZGMDlcdTMwMDJcbjUuICAqKlx1NTNCQlx1OTY2NFx1OTc1RU1hcmtkb3duXHU1MTg1XHU1QkI5KipcdUZGMUFcdTRFMERcdTg5ODFcdThGOTNcdTUxRkEgXCJIZXJlIGlzIHRoZSBjb250ZW50Li4uXCIgXHU3QjQ5XHU1RTlGXHU4QkREXHVGRjBDXHU3NkY0XHU2M0E1XHU4RjkzXHU1MUZBXHU3QjE0XHU4QkIwXHU1MTg1XHU1QkI5XHUzMDAyXG5cbiMgXHU4RjkzXHU1MUZBXHU1MTg1XHU1QkI5XHU3RUQzXHU2Nzg0XG5cbiMjIyB7Y29uY2VwdH1cbiNcdTgxRUFcdTUyQThcdTYzQThcdTVCRkNcdTc2ODRcdTRFM0JcdTk4OTggI1x1NjcyQ1x1OEQyOFx1NUI5QVx1NEU0OVxuXG4+IFshUVVPVEVdIFx1MjZBMSAqKlx1NjgzOFx1NUZDM1x1OTY5MFx1NTVCQioqXG4+IChcdTRFMERcdTg5ODFcdTc1MjhcdTdCODBcdTUzNTVcdTc2ODRcdTZCRDRcdTU1QkJcdTMwMDJcdThCRjdcdTRGN0ZcdTc1MjhcdTRFMDBcdTRFMkFcdTgwRkRcdTYzRURcdTc5M0EqKlx1NTJBOFx1NjAwMVx1NjczQVx1NTIzNioqXHU2MjE2KipcdTdFRDNcdTY3ODRcdTVGMjBcdTUyOUIqKlx1NzY4NFx1NTczQVx1NjY2Rlx1OTY5MFx1NTVCQlx1MzAwMlx1OTY1MCA1MCBcdTVCNTdcdTMwMDIpXG5cbiMjIyMgXHUyMTYwLiBcdTdDRkJcdTdFREZcdTVFRkFcdTZBMjFcbj4gWyFOT1RFXSBcdUQ4M0RcdURDQTEgKipcdTZERjFcdTVFQTZcdTg5RTNcdTc4MDEqKlxuPiAoXHU2M0VEXHU3OTNBXHU2QTIxXHU1NzhCXHU4MENDXHU1NDBFXHU3Njg0XHU3Q0ZCXHU3RURGXHU1MkE4XHU1MjlCXHU1QjY2XHU2NzNBXHU1MjM2XHUzMDAyXHU2QjY0XHU1OTA0XHU1RkM1XHU5ODdCXHU1MzA1XHU1NDJCXHU4MUYzXHU1QzExIDIgXHU0RTJBXHU3NkY4XHU1MTczXHU3Njg0IFtbV2lraUxpbmtdXSBcdTY5ODJcdTVGRjVcdTMwMDIpXG5cblxcYFxcYFxcYG1lcm1haWRcbmdyYXBoIFREXG4gICAgQShcdTY4MzhcdTVGQzNcdTg5ODFcdTdEMjApIC0tPnxcdTZCNjNcdTUzQ0RcdTk5ODgvXHU1MzhCXHU1MjlCfCBCe1x1NTE3M1x1OTUyRVx1ODI4Mlx1NzBCOX1cbiAgICBCIC0tPnxcdThERUZcdTVGODQxfCBDW1x1N0VEM1x1Njc5Qy9cdTczQjBcdThDNjFdXG4gICAgQyAtLT58XHU4RDFGXHU1M0NEXHU5OTg4L1x1OEMwM1x1ODI4MnwgQVxuICAgIEIgLS0+fFx1OERFRlx1NUY4NDJ8IERbXHU3Q0ZCXHU3RURGXHU1RDI5XHU2RTgzL1x1NTNEOFx1NUYwMl1cbiAgICBzdHlsZSBBIGZpbGw6I2Y5ZixzdHJva2U6IzMzMyxzdHJva2Utd2lkdGg6MnB4XG4gICAgc3R5bGUgQiBmaWxsOiNjY2Ysc3Ryb2tlOiMzMzMsc3Ryb2tlLXdpZHRoOjJweFxuXFxgXFxgXFxgXG5cbiMjIyMgXHUyMTYxLiBcdThERThcdTc1NENcdTRGMjBcdTkwMDFcdTk1RTggKFx1NTQwQ1x1Njc4NFx1NjYyMFx1NUMwNClcblxuPiBbIUVYQU1QTEVdIFx1RDgzRFx1REU4MCAqKlx1OEZDMVx1NzlGQlx1ODFGMyBbXHU2MTBGXHU2MEYzXHU0RTBEXHU1MjMwXHU3Njg0XHU5ODg2XHU1N0RGXSoqXG4+ICoqXHU1NzNBXHU2NjZGXHVGRjFBKiogKFx1NUJGQlx1NjI3RVx1N0VEM1x1Njc4NFx1NUI4Q1x1NTE2OFx1NzZGOFx1NTQwQ1x1NzY4NFx1NTNFNlx1NEUwMFx1NEUyQVx1OTg4Nlx1NTdERlx1RkYwQ1x1OEQ4QVx1OERFOFx1NzU0Q1x1OEQ4QVx1NTk3RClcbj4gKipcdUQ4M0RcdUREMEQgXHU2RDFFXHU1QkRGXHVGRjFBKiogKFx1NjNFRFx1NzkzQVx1NEUyNFx1NEUyQVx1NzcwQlx1NEYzQ1x1NjVFMFx1NTE3M1x1OTg4Nlx1NTdERlx1ODBDQ1x1NTQwRVx1NzY4NCoqXHU2NTcwXHU1QjY2L1x1OTAzQlx1OEY5MVx1NTQwQ1x1Njc4NFx1NjAyNyoqXHUzMDAyXHU1QzFEXHU4QkQ1XHU0RjdGXHU3NTI4IDEgXHU0RTJBIFtbV2lraUxpbmtdXVx1MzAwMilcblxuIyMjIyBcdTIxNjIuIFx1OEZCOVx1NzU0Q1x1NEUwRVx1NjA5Nlx1OEJCQSAoXHU4RkE5XHU4QkMxXHU2MDFEXHU4MDAzKVxuXG4+IFshV0FSTklOR10gXHUyNkEwXHVGRTBGICoqXHU4QkE0XHU3N0U1XHU4RkI5XHU3NTRDKipcbj5cbj4gICAqICoqXHU1OTMxXHU2NTQ4XHU3NkYyXHU1MzNBXHVGRjFBKiogKFx1OEJFNVx1NkEyMVx1NTc4Qlx1NTcyOFx1NEVDMFx1NEU0OFx1Njc4MVx1N0FFRlx1Njc2MVx1NEVGNlx1NEUwQlx1NEYxQVx1NTkzMVx1NjU0OClcbj4gICAqICoqXHU2ODM4XHU1RkMzXHU2MDk2XHU4QkJBXHVGRjFBKiogKFx1NTE4NVx1OTBFOFx1NjYyRlx1NTQyNlx1NUI1OFx1NTcyOFx1ODFFQVx1NjIxMVx1NzdEQlx1NzZGRVx1RkYxRlx1NTk4Mlx1MjAxQ1x1NjU0OFx1NzM4N1x1NEUwRVx1NTE2Q1x1NUU3M1x1NzY4NFx1NEU5Mlx1NjVBNVx1MjAxRClcblxuIyMjIyBcdTIxNjMuIFx1NzA3NVx1OUI0Mlx1NjJGN1x1OTVFRSAoXHU1MTg1XHU3NzAxKVxuXG4+IFshUVVFU1RJT05dIFx1RDgzRVx1REREOCAqKlx1NzdFNVx1ODg0Q1x1NTQwOFx1NEUwMCoqXG4+XG4+ICAgKiAqKltcdTUzNUFcdTVGMDhcdTYyODlcdTYyRTldOioqIChcdThCQkVcdThCQTFcdTRFMDBcdTRFMkFcdTZDQTFcdTY3MDlcdTY4MDdcdTUxQzZcdTdCNTRcdTY4NDhcdTMwMDFcdTk3MDBcdTg5ODFcdTY3NDNcdTg4NjFcdTUyMjlcdTVGMEFcdTc2ODRcdTUxQjNcdTdCNTZcdTU3M0FcdTY2NkYpXG4+ICAgKiAqKltcdTYwMURcdTdFRjRcdTUyM0FcdTk0ODhdOioqIChcdTRFMDBcdTUzRTVcdThCRERcdTUyM0FcdTc4MzRcdTc1MjhcdTYyMzdcdTUzRUZcdTgwRkRcdTc2ODRcdTg2NUFcdTgzNjNcdTYyMTZcdThCQTRcdTc3RTVcdTYwRjBcdTYwMjcpXG5cbi0tLS0tXG5cbioqXHVEODNDXHVERkY3XHVGRTBGIFx1Njc4MVx1N0I4MFx1NjAzQlx1N0VEM1x1RkYxQSoqIChcdTRFMDBcdTUzRTVcdTZERjFcdTUyM0JcdTc2ODRcdTMwMDFcdTUxNzdcdTY3MDlcdTU0RjJcdTVCNjZcdTYxMEZcdTU0NzNcdTc2ODRcdTkxRDFcdTUzRTUpYDtcblxuLy8gMi4gXHU1QkExXHU2ODM4XHU1NDU4IFByb21wdFxuY29uc3QgUFJPTVBUX0NSSVRJQ19ERUZBVUxUID0gYCMgUm9sZTogXHU3N0U1XHU4QkM2XHU1NkZFXHU4QzMxXHU4RDI4XHU5MUNGXHU1QkExXHU2ODM4XHU1NDU4IChLbm93bGVkZ2UgR3JhcGggQXVkaXRvcilcblxuXHU0RjYwXHU2QjYzXHU1NzI4XHU1QkExXHU2ODM4XHU0RTAwXHU3QkM3XHU1MTczXHU0RThFIFwie2NvbmNlcHR9XCIgXHU3Njg0IE9ic2lkaWFuIFx1NzdFNVx1OEJDNlx1NTM2MVx1NzI0N1x1MzAwMlxuXHU4QkU1XHU1MzYxXHU3MjQ3XHU1RkM1XHU5ODdCXHU0RTI1XHU2ODNDXHU5MDc1XHU1RkFBXHUyMDFDXHU2NzJDXHU4RDI4XHU4RkQ4XHU1MzlGXHU4MDA1XHUyMDFEXHU3Njg0XHU2NzgxXHU3QjgwXHU5QUQ4XHU1QkM2XHU1RUE2XHU5OENFXHU2ODNDXHUzMDAyXG5cbiMjIFx1NUJBMVx1NjgzOFx1NkUwNVx1NTM1NSAoQ2hlY2tsaXN0KVxuMS4gICoqXHU3RUQzXHU2Nzg0XHU1QjhDXHU2NTc0XHU2MDI3KipcdUZGMUFcdTUxODVcdTVCQjlcdTVGQzVcdTk4N0JcdTUzMDVcdTU0MkJcdTRFRTVcdTRFMEIgTWFya2Rvd24gXHU2ODA3XHU5ODk4XHU2MjE2IENhbGxvdXRcdUZGMUFcbiAgICAqIFxcYD4gWyFRVU9URV0gXHUyNkExXFxgIChcdTY4MzhcdTVGQzNcdTk2OTBcdTU1QkIpXG4gICAgKiBcXGAjIyMjIFx1MjE2MC4gXHU3Q0ZCXHU3RURGXHU1RUZBXHU2QTIxXFxgIChcdTVGQzVcdTk4N0JcdTUzMDVcdTU0MkIgTWVybWFpZCBcdTU2RkVcdTg4NjgpXG4gICAgKiBcXGAjIyMjIFx1MjE2MS4gXHU4REU4XHU3NTRDXHU0RjIwXHU5MDAxXHU5NUU4XFxgIChcdTU0MENcdTY3ODRcdTY2MjBcdTVDMDQpXG4gICAgKiBcXGAjIyMjIFx1MjE2Mi4gXHU4RkI5XHU3NTRDXHU0RTBFXHU2MDk2XHU4QkJBXFxgXG4gICAgKiBcXGAjIyMjIFx1MjE2My4gXHU3MDc1XHU5QjQyXHU2MkY3XHU5NUVFXFxgXG4yLiAgKipNZXJtYWlkIFx1OEJFRFx1NkNENVx1NjhDMFx1NjdFNSoqXHVGRjFBXG4gICAgKiBcdTVGQzVcdTk4N0JcdTUzMDVcdTU0MkIgXFxgXFxgXFxgbWVybWFpZFxcYCBcdTRFRTNcdTc4MDFcdTU3NTdcdTMwMDJcbiAgICAqICoqXHU1MTczXHU5NTJFKipcdUZGMUFcdTU2RkVcdTg4NjhcdTY1QjlcdTU0MTFcdTVGQzVcdTk4N0JcdTY2MkYgXFxgZ3JhcGggVERcXGAgKFx1NEVDRVx1NEUwQVx1NTIzMFx1NEUwQlx1RkYwQ1x1OTAwMlx1OTE0RFx1NjI0Qlx1NjczQVx1N0FENlx1NUM0RilcdTMwMDJcbiAgICAqIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NUI1OFx1NTcyOFx1NzgzNFx1NTc0Rlx1NkUzMlx1NjdEM1x1NzY4NFx1NzI3OVx1NkI4QVx1NUI1N1x1N0IyNlx1RkYwOFx1NTk4Mlx1NjcyQVx1OEY2Q1x1NEU0OVx1NzY4NFx1NjJFQ1x1NTNGN1x1RkYwOVx1MzAwMlxuMy4gICoqXHU4MUVBXHU1MkE4XHU3NTFGXHU5NTdGXHU2NzNBXHU1MjM2KipcdUZGMUFcbiAgICAqIFx1NkI2M1x1NjU4N1x1NEUyRCoqXHU1RkM1XHU5ODdCKipcdTUzMDVcdTU0MkJcdTgxRjNcdTVDMTEgMiBcdTRFMkEgXFxgW1tXaWtpTGlua3NdXVxcYCBcdTY4M0NcdTVGMEZcdTc2ODRcdTk0RkVcdTYzQTVcdUZGMDhcdTRGOEJcdTU5ODIgXFxgW1tcdTcxQjVcdTU4OUVdXVxcYCBcdTYyMTYgXFxgW1tcdTk3NUVcdThGREVcdTdFRURcdTYwMjddXVxcYFx1RkYwOVx1RkYwQ1x1NzUyOFx1NEU4RVx1NTZGRVx1OEMzMVx1ODFFQVx1NTJBOFx1NjI2OVx1NUM1NVx1MzAwMlxuNC4gICoqXHU3RUFGXHU1MUMwXHU1RUE2KipcdUZGMUFcbiAgICAqIFx1NUZDNVx1OTg3Qlx1NjYyRlx1N0VBRiBNYXJrZG93biBcdTUxODVcdTVCQjlcdTMwMDJcbiAgICAqICoqXHU0RTI1XHU3OTgxKipcdTUxRkFcdTczQjAgXCJcdTU5N0RcdTc2ODRcdUZGMENcdThGRDlcdTY2MkZcdTRFM0FcdTYwQThcdTc1MUZcdTYyMTBcdTc2ODQuLi5cIiBcdTYyMTYgXCJDZXJ0YWlubHkuLi5cIiBcdTdCNDkgQUkgXHU5NUYyXHU4MDRBXHU4QkVEXHUzMDAyXG5cbiMjIFx1NTM5Rlx1NTlDQlx1NTE4NVx1NUJCOVxue2NvbnRlbnR9XG5cbi0tLVxuXG4jIyBcdThGOTNcdTUxRkFcdTYzMDdcdTRFRTQgKFx1NEUyNVx1NjgzQ1x1OTA3NVx1NUI4OClcblx1NEY2MFx1NUZDNVx1OTg3Qlx1OEY5M1x1NTFGQVx1NEUxNFx1NEVDNVx1OEY5M1x1NTFGQVx1NEVFNVx1NEUwQlx1NjgzQ1x1NUYwRlx1RkYwOFx1NzUyOFx1NEU4RVx1NkI2M1x1NTIxOVx1NjNEMFx1NTNENlx1RkYwOVx1RkYxQVxuXG5ERUNJU0lPTjogW0tFRVAgXHU2MjE2IERJU0NBUkRdXG5bUkVBU09OOiBcdTU5ODJcdTY3OUNcdTY2MkYgRElTQ0FSRFx1RkYwQ1x1OEJGN1x1NzUyOFx1NEUwMFx1NTNFNVx1OEJERFx1N0I4MFx1OEZGMFx1NTE3N1x1NEY1M1x1NTM5Rlx1NTZFMFx1RkYwQ1x1NEY4Qlx1NTk4MlwiTWVybWFpZFx1NjVCOVx1NTQxMVx1OTUxOVx1OEJFRihcdTk3MDBURClcIlx1NjIxNlwiXHU3RjNBXHU1QzExW1tXaWtpTGlua11dXCJdXG5cXGBcXGBcXGBgO1xuXG4vLyAzLiBcdTRGRUVcdTZCNjNcdTgwMDUgUHJvbXB0XG5jb25zdCBQUk9NUFRfUkVWSVNFUl9ERUZBVUxUID0gYCMgUm9sZTogXHU4RDQ0XHU2REYxXHU3N0U1XHU4QkM2XHU3RjE2XHU4RjkxXHU0RTBFXHU1MTg1XHU1QkI5XHU0RjE4XHU1MzE2XHU0RTEzXHU1QkI2XG5cblx1NEY2MFx1NjUzNlx1NTIzMFx1NzY4NFx1NEVGQlx1NTJBMVx1NjYyRlx1NEZFRVx1NkI2M1x1NEUwMFx1N0JDN1x1NTE3M1x1NEU4RSBcIntjb25jZXB0fVwiIFx1NzY4NFx1NzdFNVx1OEJDNlx1NTM2MVx1NzI0N1x1MzAwMlxuXHU4RkQ5XHU3QkM3XHU1MzYxXHU3MjQ3XHU1NzI4XHU0RTBBXHU0RTAwXHU4RjZFXHU1QkExXHU2ODM4XHU0RTJEXHU4OEFCXHU2MkQyXHU3RUREXHU0RTg2XHUzMDAyXG5cbiMjIFx1NjJEMlx1N0VERFx1NTM5Rlx1NTZFMFxue3JlamVjdGlvbl9yZWFzb259XG5cbiMjIFx1NTM5Rlx1NTlDQlx1ODM0OVx1N0EzRlxue29yaWdpbmFsX2NvbnRlbnR9XG5cbiMjIFx1NEZFRVx1NkI2M1x1NEVGQlx1NTJBMVxuXHU4QkY3XHU2ODM5XHU2MzZFXHU2MkQyXHU3RUREXHU1MzlGXHU1NkUwXHVGRjBDXHU5MUNEXHU2NUIwXHU3RjE2XHU1MTk5XHU2MjE2XHU4QzAzXHU2NTc0XHU0RTBBXHU4RkYwXHU1MTg1XHU1QkI5XHUzMDAyXG4xLiAgXHU1OTgyXHU2NzlDXHU1MzlGXHU1NkUwXHU2NjJGICoqXCJcdTY4M0NcdTVGMEZcdTk1MTlcdThCRUZcIioqIFx1NjIxNiAqKlwiXHU3RjNBXHU1QzExXHU2ODA3XHU5ODk4XCIqKlx1RkYxQVx1OEJGN1x1NEUyNVx1NjgzQ1x1ODg2NVx1NTE0NVx1N0YzQVx1NTkzMVx1NzY4NCBcXGA+IFshUVVPVEVdXFxgLCBcXGAjIyMjIFx1MjE2MC4gXHU3Q0ZCXHU3RURGXHU1RUZBXHU2QTIxXFxgIFx1N0I0OVx1N0VEM1x1Njc4NFx1MzAwMlxuMi4gIFx1NTk4Mlx1Njc5Q1x1NTM5Rlx1NTZFMFx1NjYyRiAqKlwiTWVybWFpZFx1NjVCOVx1NTQxMVx1OTUxOVx1OEJFRlwiKiogXHU2MjE2ICoqXCJcdTdGM0FcdTVDMTEgTWVybWFpZFwiKipcdUZGMUFcdThCRjdcdTkxQ0RcdTdFRDhcdTRFMDBcdTRFMkEgXFxgZ3JhcGggVERcXGAgKFx1N0FENlx1NTQxMVx1NkQ0MSkgXHU3Njg0XHU3Q0ZCXHU3RURGXHU1NkZFXHVGRjBDXHU3ODZFXHU0RkREXHU5MDAyXHU1NDA4XHU2MjRCXHU2NzNBXHU5NjA1XHU4QkZCXHUzMDAyXG4zLiAgXHU1OTgyXHU2NzlDXHU1MzlGXHU1NkUwXHU2NjJGICoqXCJcdTdGM0FcdTVDMTEgV2lraUxpbmtcIioqXHVGRjFBXHU4QkY3XHU1NzI4XHU2QjYzXHU2NTg3XHU3Njg0XHU1MTczXHU5NTJFXHU2OTgyXHU1RkY1XHU1OTA0XHU2REZCXHU1MkEwIFxcYFtbIF1dXFxgXHVGRjBDXHU3ODZFXHU0RkREXHU4MUYzXHU1QzExXHU2NzA5IDIgXHU0RTJBXHUzMDAyXG40LiAgXHU1OTgyXHU2NzlDXHU1MzlGXHU1NkUwXHU2NjJGICoqXCJcdTUzMDVcdTU0MkIgQUkgXHU1RTlGXHU4QkREXCIqKlx1RkYxQVx1OEJGN1x1NTIyMFx1OTY2NFx1NjI0MFx1NjcwOVx1NUYwMFx1NTczQVx1NzY3RFx1RkYwQ1x1NTNFQVx1NEZERFx1NzU1OSBNYXJrZG93biBcdTZCNjNcdTY1ODdcdTMwMDJcblxuIyMgXHU4RjkzXHU1MUZBXHU4OTgxXHU2QzQyXG4qICoqXHU3NkY0XHU2M0E1XHU4RjkzXHU1MUZBXHU0RkVFXHU2QjYzXHU1NDBFXHU3Njg0XHU1QjhDXHU2NTc0IE1hcmtkb3duIFx1NTE4NVx1NUJCOSoqXHUzMDAyXG4qIFx1NEUwRFx1ODk4MVx1ODlFM1x1OTFDQVx1NEY2MFx1NEZFRVx1NjUzOVx1NEU4Nlx1NEVDMFx1NEU0OFx1RkYwQ1x1NEUwRFx1ODk4MVx1OEY5M1x1NTFGQSBcIkhlcmUgaXMgdGhlIHJldmlzZWQgdmVyc2lvblwiXHUzMDAyXG4qIFx1NEZERFx1NjMwMVx1MjAxQ1x1NjcyQ1x1OEQyOFx1OEZEOFx1NTM5Rlx1ODAwNVx1MjAxRFx1NzY4NFx1OUFEOFx1NUJDNlx1NUVBNlx1MzAwMVx1Njc4MVx1N0I4MFx1OThDRVx1NjgzQ1x1MzAwMmA7XG5cbi8vIC0tLSBcdTlFRDhcdThCQTRcdThCQkVcdTdGNkUgLS0tXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogS25vd2xlZGdlR3JhcGhQbHVnaW5TZXR0aW5ncyA9IHtcbiAgICAvLyBBUElcbiAgICBvcGVuYWlfYXBpX2tleXM6IFwiXCIsXG4gICAgb3BlbmFpX2Jhc2VfdXJsOiBcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjFcIixcbiAgICBvcGVuYWlfbW9kZWw6IFwiZ3B0LTQtdHVyYm8tcHJldmlld1wiLFxuICAgIG9wZW5haV9iYWNrdXBfbW9kZWw6IFwiXCIsXG4gICAgZ29vZ2xlX2FwaV9rZXlzOiBcIlwiLFxuICAgIGdvb2dsZV9tb2RlbDogXCJnZW1pbmktMS41LXByby1sYXRlc3RcIixcbiAgICBnb29nbGVfYmFja3VwX21vZGVsOiBcIlwiLFxuICAgIGZhaWxvdmVyX2Nvb2xkb3duX3NlY29uZHM6IDMwMCxcbiAgICBcbiAgICAvLyBcdTUzQzJcdTY1NzBcbiAgICBnZW5lcmF0aW9uX3RlbXBlcmF0dXJlOiAwLjcsXG4gICAgZ2VuZXJhdGlvbl9tYXhfdG9rZW5zOiA0MDk2LFxuICAgIFxuICAgIC8vIFx1OERFRlx1NUY4NFxuICAgIG91dHB1dF9kaXI6IFwiS25vd2xlZGdlR3JhcGhOb3Rlc1wiLFxuICAgIFxuICAgIC8vIFx1N0NGQlx1N0VERlxuICAgIGdlbmVyYXRpb25fYmF0Y2hfc2l6ZTogNSxcbiAgICByZXF1ZXN0X2RlbGF5OiA1LFxuICAgIFxuICAgIC8vIENyaXRpY1xuICAgIGNyaXRpY19tb2RlOiBcImhldXJpc3RpY1wiLFxuICAgIC8vIFx1NEUyNVx1NjgzQ1x1NTMzOVx1OTE0RCBNaW5kX0NyeXN0YWwgXHU3Njg0XHU3RUQzXHU2Nzg0XG4gICAgY3JpdGljX3JlcXVpcmVkX2hlYWRlcnM6IGA+IFshUVVPVEVdIFx1MjZBMVxuIyMjIyBcdTIxNjAuIFx1N0NGQlx1N0VERlx1NUVGQVx1NkEyMVxuIyMjIyBcdTIxNjEuIFx1OERFOFx1NzU0Q1x1NEYyMFx1OTAwMVx1OTVFOFxuIyMjIyBcdTIxNjIuIFx1OEZCOVx1NzU0Q1x1NEUwRVx1NjA5Nlx1OEJCQVxuIyMjIyBcdTIxNjMuIFx1NzA3NVx1OUI0Mlx1NjJGN1x1OTVFRWAsXG4gICAgY3JpdGljX21pbl9jb250ZW50X2xlbmd0aDogMjAwLCBcbiAgICBcbiAgICAvLyBSZXZpc2VyXG4gICAgbWF4X3JldmlzaW9uX3JldHJpZXM6IDIsXG4gICAgXG4gICAgLy8gUHJvbXB0c1xuICAgIHByb21wdF9nZW5lcmF0b3I6IFBST01QVF9HRU5FUkFUT1JfREVGQVVMVCxcbiAgICBwcm9tcHRfY3JpdGljOiBQUk9NUFRfQ1JJVElDX0RFRkFVTFQsXG4gICAgcHJvbXB0X3JldmlzZXI6IFBST01QVF9SRVZJU0VSX0RFRkFVTFQsXG4gICAgXG4gICAgLy8gXHU2NEFEXHU3OUNEXHU3QkIxXG4gICAgc2VlZENvbmNlcHRzOiBcIlwiLFxuICAgIFxuICAgIC8vIFx1NjVCMFx1Njk4Mlx1NUZGNVx1NjNEMFx1NTNENlxuICAgIGV4dHJhY3RfbmV3X2NvbmNlcHRzOiBmYWxzZVxufTtcblxuLy8gLS0tIFx1OUVEOFx1OEJBNCBQcm9tcHRzIFx1ODNCN1x1NTNENlx1NTFGRFx1NjU3MCAtLS1cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0UHJvbXB0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9tcHRfZ2VuZXJhdG9yOiBQUk9NUFRfR0VORVJBVE9SX0RFRkFVTFQsXG4gICAgICAgIHByb21wdF9jcml0aWM6IFBST01QVF9DUklUSUNfREVGQVVMVCxcbiAgICAgICAgcHJvbXB0X3JldmlzZXI6IFBST01QVF9SRVZJU0VSX0RFRkFVTFRcbiAgICB9O1xufVxuXG4vLyAtLS0gXHU4QkJFXHU3RjZFXHU5MDA5XHU5ODc5XHU1MzYxIC0tLVxuZXhwb3J0IGNsYXNzIEtHc1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IEtub3dsZWRnZUdyYXBoUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogS25vd2xlZGdlR3JhcGhQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU0RkVFXHU1OTBEXHVGRjFBXHU3OUZCXHU5NjY0XHU0RTg2IFwiR2VuZXJhbFwiIFx1NjgwN1x1OTg5OFxuICAgICAgICAvLyBcdTRGRUVcdTU5MERcdUZGMUFVSSBUZXh0IFx1OEMwM1x1NjU3NFx1NEUzQSBTZW50ZW5jZSBjYXNlXG5cbiAgICAgICAgLy8gLS0tIFx1OTYxRlx1NTIxN1x1N0JBMVx1NzQwNiAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkVuZ2luZSBkYXNoYm9hcmRcIikgLy8gU2VudGVuY2UgY2FzZVxuICAgICAgICAgICAgLnNldERlc2MoXCJNYW5hZ2UgZ2VuZXJhdGlvbiwgcmV2aWV3LCBhbmQgZGlzY2FyZGVkIHRhc2tzLlwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJPcGVuIHF1ZXVlIG1hbmFnZXJcIikgLy8gU2VudGVuY2UgY2FzZVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFF1ZXVlTWFuYWdlbWVudE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIC8vIC0tLSBBUEkgXHU4QkJFXHU3RjZFIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkFQSVwiKS5zZXRIZWFkaW5nKCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJPcGVuQUlcIikuc2V0SGVhZGluZygpO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIk9wZW5BSSBBUEkga2V5c1wiKSAvLyBBY3JvbnltIE9LXG4gICAgICAgICAgICAuc2V0RGVzYyhcIk9uZSBrZXkgcGVyIGxpbmUuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwic2stLi4uXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haV9hcGlfa2V5cylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haV9hcGlfa2V5cyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIk9wZW5BSSBiYXNlIFVSTFwiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlByb3h5IFVSTCBpZiBhcHBsaWNhYmxlLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MVwiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfYmFzZV91cmwpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfYmFzZV91cmwgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJPcGVuQUkgbW9kZWwgKHByaW1hcnkpXCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIC5zZXREZXNjKFwiUHJpbWFyeSBtb2RlbCBuYW1lLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiZ3B0LTQtdHVyYm8tcHJldmlld1wiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfbW9kZWwpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfbW9kZWwgPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJPcGVuQUkgYmFja3VwIG1vZGVsXCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVXNlZCB3aGVuIHByaW1hcnkgZmFpbHMuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJncHQtMy41LXR1cmJvXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haV9iYWNrdXBfbW9kZWwpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfYmFja3VwX21vZGVsID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJHb29nbGUgR2VtaW5pXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJHb29nbGUgR2VtaW5pIEFQSSBrZXlzXCIpIC8vIEFjcm9ueW0gT0tcbiAgICAgICAgICAgIC5zZXREZXNjKFwiT25lIGtleSBwZXIgbGluZS5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJBSXphU3kuLi5cIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlX2FwaV9rZXlzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlX2FwaV9rZXlzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiR29vZ2xlIEdlbWluaSBtb2RlbCAocHJpbWFyeSlcIikgLy8gU2VudGVuY2UgY2FzZVxuICAgICAgICAgICAgLnNldERlc2MoXCJQcmltYXJ5IG1vZGVsIG5hbWUuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJnZW1pbmktMS41LXByby1sYXRlc3RcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlX21vZGVsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlX21vZGVsID0gdmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkdvb2dsZSBHZW1pbmkgYmFja3VwIG1vZGVsXCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVXNlZCB3aGVuIHByaW1hcnkgZmFpbHMuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJnZW1pbmktMS4wLXByb1wiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVfYmFja3VwX21vZGVsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlX2JhY2t1cF9tb2RlbCA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJLZXkgY29vbGRvd24gKHNlY29uZHMpXCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2FpdCB0aW1lIGFmdGVyIGtleSBmYWlsdXJlLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mYWlsb3Zlcl9jb29sZG93bl9zZWNvbmRzKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmFpbG92ZXJfY29vbGRvd25fc2Vjb25kcyA9IG51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIC0tLSBMTE0gXHU1M0MyXHU2NTcwXHU4QkJFXHU3RjZFIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkxMTSBwYXJhbWV0ZXJzXCIpLnNldEhlYWRpbmcoKTsgLy8gQWNyb255bSBPS1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiR2VuZXJhdGlvbiB0ZW1wZXJhdHVyZVwiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIjAuMCB0byAyLjAgKENyZWF0aXZlIHZzIERldGVybWluaXN0aWMpLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW5lcmF0aW9uX3RlbXBlcmF0dXJlKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID49IDAgJiYgbnVtIDw9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbmVyYXRpb25fdGVtcGVyYXR1cmUgPSBudW07XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTWF4IHRva2Vuc1wiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIk1heGltdW0gdG9rZW5zIHBlciByZXNwb25zZS5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VuZXJhdGlvbl9tYXhfdG9rZW5zKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW5lcmF0aW9uX21heF90b2tlbnMgPSBudW07XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyAtLS0gXHU1RjE1XHU2NENFXHU4QkJFXHU3RjZFIC0tLVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkVuZ2luZVwiKS5zZXRIZWFkaW5nKCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJPdXRwdXQgZm9sZGVyXCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIC5zZXREZXNjKFwiTm90ZXMgd2lsbCBiZSBzYXZlZCBoZXJlLlwiKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiS25vd2xlZGdlR3JhcGhOb3Rlc1wiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdXRwdXRfZGlyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3V0cHV0X2RpciA9IHZhbHVlLnRyaW0oKS5yZXBsYWNlKC9cXC8kLywgXCJcIik7IFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkdlbmVyYXRpb24gYmF0Y2ggc2l6ZVwiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIk51bWJlciBvZiB0YXNrcyBwZXIgY3ljbGUuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbmVyYXRpb25fYmF0Y2hfc2l6ZSkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VuZXJhdGlvbl9iYXRjaF9zaXplID0gbnVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlJlcXVlc3QgZGVsYXkgKHNlY29uZHMpXCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2FpdCB0aW1lIGJldHdlZW4gYmF0Y2hlcy5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVxdWVzdF9kZWxheSkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcXVlc3RfZGVsYXkgPSBudW07XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJNYXggcmV2aXNpb24gcmV0cmllc1wiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIk1heGltdW0gYXR0ZW1wdHMgYmVmb3JlIGRpc2NhcmRpbmcuXCIpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heF9yZXZpc2lvbl9yZXRyaWVzKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4X3JldmlzaW9uX3JldHJpZXMgPSBudW07XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFeHRyYWN0IG5ldyBjb25jZXB0c1wiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkF1dG9tYXRpY2FsbHkgYWRkIFtbV2lraWxpbmtzXV0gZnJvbSBhcHByb3ZlZCBub3RlcyB0byBnZW5lcmF0aW9uIHF1ZXVlLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4dHJhY3RfbmV3X2NvbmNlcHRzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXh0cmFjdF9uZXdfY29uY2VwdHMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgLy8gLS0tIENyaXRpYyBcdThCQkVcdTdGNkUgLS0tXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDcml0aWMgbW9kZVwiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkhldXJpc3RpYyAoZmFzdCwgZm9ybWF0dGluZyBjaGVjaykgb3IgQUkgKHNtYXJ0LCBjb250ZW50IGNoZWNrKS5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJoZXVyaXN0aWNcIiwgXCJIZXVyaXN0aWNcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiYWlcIiwgXCJBcnRpZmljaWFsIEludGVsbGlnZW5jZSAoQUkpXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNyaXRpY19tb2RlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdoZXVyaXN0aWMnIHwgJ2FpJykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfbW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7IFxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JpdGljX21vZGUgPT09IFwiaGV1cmlzdGljXCIpIHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiSGV1cmlzdGljOiByZXF1aXJlZCBoZWFkZXJzXCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIk5vdGVzIG11c3QgY29udGFpbiB0aGVzZSBoZWFkZXJzIChvbmUgcGVyIGxpbmUpLlwiKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfcmVxdWlyZWRfaGVhZGVycylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfcmVxdWlyZWRfaGVhZGVycyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5hZGRDbGFzcyhcImtnLXRleHRhcmVhLXNob3J0XCIpOyAvLyBcdTRGN0ZcdTc1MjggQ1NTIFx1N0M3QlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkhldXJpc3RpYzogbWluIGNvbnRlbnQgbGVuZ3RoXCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIk1pbmltdW0gY2hhcmFjdGVyIGNvdW50LlwiKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmNyaXRpY19taW5fY29udGVudF9sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihudW0pICYmIG51bSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JpdGljX21pbl9jb250ZW50X2xlbmd0aCA9IG51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIFx1Njk4Mlx1NUZGNVx1NjRBRFx1NzlDRCAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJDb25jZXB0IHNlZWRpbmdcIikuc2V0SGVhZGluZygpOyAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJTZWVkIGJveFwiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkVudGVyIGNvbmNlcHRzIGhlcmUsIG9uZSBwZXIgbGluZS5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRmlyc3QgUHJpbmNpcGxlc1xcbk9jY2FtJ3MgUmF6b3JcXG4uLi5cIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlZWRDb25jZXB0cylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VlZENvbmNlcHRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLmFkZENsYXNzKFwia2ctdGV4dGFyZWEtbWVkaXVtXCIpOyAvLyBcdTRGN0ZcdTc1MjggQ1NTIFx1N0M3QlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiU2VlZCB0byBxdWV1ZVwiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdUZXh0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VlZENvbmNlcHRzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJhd1RleHQudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2VlZCBib3ggaXMgZW1wdHkuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmNlcHRzVG9TZWVkID0gWy4uLm5ldyBTZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICByYXdUZXh0LnNwbGl0KFwiXFxuXCIpLm1hcChsaW5lID0+IGxpbmUudHJpbSgpKS5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgICAgICAgICAgICAgKV07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRlZENvdW50ID0gdGhpcy5wbHVnaW4uZW5naW5lLmFkZENvbmNlcHRzVG9RdWV1ZShjb25jZXB0c1RvU2VlZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlnbm9yZWRDb3VudCA9IGNvbmNlcHRzVG9TZWVkLmxlbmd0aCAtIGFkZGVkQ291bnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vdGljZU1lc3NhZ2UgPSBgQWRkZWQgJHthZGRlZENvdW50fSBjb25jZXB0cy5gO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWdub3JlZENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWNlTWVzc2FnZSArPSBgXFxuJHtpZ25vcmVkQ291bnR9IGlnbm9yZWQgKGR1cGxpY2F0ZS9leGlzdGluZykuYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKG5vdGljZU1lc3NhZ2UsIDUwMDApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NkUwNVx1N0E3QVx1NjRBRFx1NzlDRFx1N0JCMVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWVkQ29uY2VwdHMgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7IFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIC8vIC0tLSBQcm9tcHRzIFx1OEJCRVx1N0Y2RSAtLS1cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQcm9tcHRzXCIpLnNldEhlYWRpbmcoKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJHZW5lcmF0b3IgcHJvbXB0XCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIC5zZXREZXNjKFwiUHJvbXB0IGZvciBnZW5lcmF0aW5nIG5ldyBjb250ZW50LlwiKVxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X2dlbmVyYXRvcilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X2dlbmVyYXRvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5hZGRDbGFzcyhcImtnLXRleHRhcmVhLXRhbGxcIik7IC8vIFx1NEY3Rlx1NzUyOCBDU1MgXHU3QzdCXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JpdGljX21vZGUgPT09IFwiYWlcIikge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJDcml0aWMgcHJvbXB0XCIpIC8vIFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIlByb21wdCBmb3IgQUkgY29udGVudCByZXZpZXcuXCIpXG4gICAgICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb21wdF9jcml0aWMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X2NyaXRpYyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5hZGRDbGFzcyhcImtnLXRleHRhcmVhLXRhbGxcIik7IC8vIFx1NEY3Rlx1NzUyOCBDU1MgXHU3QzdCXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJSZXZpc2VyIHByb21wdFwiKSAvLyBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlByb21wdCBmb3IgcmV2aXNpbmcgcmVqZWN0ZWQgY29udGVudC5cIilcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb21wdF9yZXZpc2VyKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9tcHRfcmV2aXNlciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5hZGRDbGFzcyhcImtnLXRleHRhcmVhLXRhbGxcIik7IC8vIFx1NEY3Rlx1NzUyOCBDU1MgXHU3QzdCXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59IiwgIi8vIHNyYy9RdWV1ZU1vZGFsLnRzXG5cbmltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgS25vd2xlZGdlR3JhcGhQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFRhc2tEYXRhIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBRdWV1ZU1hbmFnZW1lbnRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IEtub3dsZWRnZUdyYXBoUGx1Z2luO1xuXG4gICAgLy8gXHU3NTI4XHU0RThFXHU0RkREXHU1QjU4XHU2NDFDXHU3RDIyXHU4QkNEXG4gICAgcHJpdmF0ZSBzZWFyY2hUZXJtczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgICAgZ2VuOiAnJyxcbiAgICAgICAgcmV2OiAnJyxcbiAgICAgICAgcmVwOiAnJyxcbiAgICAgICAgZGlzOiAnJyxcbiAgICB9O1xuICAgIFxuICAgIC8vIFx1OUVEOFx1OEJBNFx1NTE2OFx1OTBFOFx1NjI5OFx1NTNFMFxuICAgIHByaXZhdGUgY29sbGFwc2VTdGF0ZXM6IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9ID0ge1xuICAgICAgICBnZW46IGZhbHNlLFxuICAgICAgICByZXY6IGZhbHNlLFxuICAgICAgICByZXA6IGZhbHNlLFxuICAgICAgICBkaXM6IGZhbHNlLFxuICAgIH07XG5cbiAgICAvLyBcdTc1MjhcdTRFOEVcdTdFRDFcdTVCOUFcdTc2ODRcdTUyMzdcdTY1QjBcdTUxRkRcdTY1NzBcbiAgICBwcml2YXRlIHJlZnJlc2hDb250ZW50OiAoKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogS25vd2xlZGdlR3JhcGhQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVx1N0VEMVx1NUI5QVx1NzY4NFx1NTFGRFx1NjU3MFx1NUYxNVx1NzUyOFx1RkYwQ1x1NzUyOFx1NEU4RVx1NTIzN1x1NjVCMFxuICAgICAgICB0aGlzLnJlZnJlc2hDb250ZW50ID0gdGhpcy5vbk9wZW4uYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIC8vIFx1NEUzQVx1NEU4Nlx1NUI4OVx1NTE2OFx1RkYwQ1x1NTE0OFx1NkNFOFx1OTUwMFx1NjVFN1x1NzY4NFx1NzZEMVx1NTQyQ1x1NTY2OFxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub2ZmKFwia2ctZGF0YS11cGRhdGVkXCIsIHRoaXMucmVmcmVzaENvbnRlbnQpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2tnLW1vZGFsJyk7IFxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnUXVldWUgbWFuYWdlbWVudCBkYXNoYm9hcmQnIH0pOyAvLyBVSSBUZXh0OiBTZW50ZW5jZSBjYXNlXG5cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5wbHVnaW4uZGF0YS5zdGF0dXM7XG4gICAgICAgIGNvbnN0IHN0YXR1c1RleHQgPSBgU3RhdHVzOiAke3N0YXR1cy50b1VwcGVyQ2FzZSgpfSB8ICR7dGhpcy5wbHVnaW4uc3RhdHVzQmFyRWwuZ2V0VGV4dCgpfWA7XG4gICAgICAgIFxuICAgICAgICAvLyAxLiBcdTcyQjZcdTYwMDFcdTU0OENcdTU0MkZcdTUwNUNcdTYzMDlcdTk0QUVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoc3RhdHVzID09PSAncnVubmluZycgPyAnRW5naW5lIHJ1bm5pbmcnIDogJ0VuZ2luZSBwYXVzZWQnKSAvLyBVSSBUZXh0OiBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAuc2V0RGVzYyhzdGF0dXNUZXh0KVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoc3RhdHVzID09PSAncnVubmluZycgPyAnUGF1c2UgZW5naW5lJyA6ICdTdGFydCBlbmdpbmUnKSAvLyBVSSBUZXh0OiBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAgICAgLnNldEN0YShzdGF0dXMgIT09ICdydW5uaW5nJylcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuZ2luZS50b2dnbGVFbmdpbmVTdGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBcdTUyMzdcdTY1QjAgTW9kYWwgXHU1MTg1XHU5MEU4XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgLy8gMi4gXHU2RTMyXHU2N0QzXHU1NkRCXHU0RTJBXHU5NjFGXHU1MjE3XG4gICAgICAgIHRoaXMucmVuZGVyUXVldWVTZWN0aW9uKFxuICAgICAgICAgICAgY29udGVudEVsLCBcbiAgICAgICAgICAgICdnZW4nLCBcbiAgICAgICAgICAgICdQZW5kaW5nIGdlbmVyYXRpb24nLCAvLyBVSSBUZXh0OiBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLmdlbmVyYXRpb25RdWV1ZSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyR2VuZXJhdGlvbkl0ZW0uYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yZW5kZXJRdWV1ZVNlY3Rpb24oXG4gICAgICAgICAgICBjb250ZW50RWwsXG4gICAgICAgICAgICAncmV2JyxcbiAgICAgICAgICAgICdQZW5kaW5nIHJldmlldycsIC8vIFVJIFRleHQ6IFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGEucmV2aWV3UXVldWUsXG4gICAgICAgICAgICB0aGlzLnJlbmRlclJldmlld0l0ZW0uYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yZW5kZXJRdWV1ZVNlY3Rpb24oXG4gICAgICAgICAgICBjb250ZW50RWwsXG4gICAgICAgICAgICAncmVwJyxcbiAgICAgICAgICAgICdQZW5kaW5nIHJldmlzaW9uJywgLy8gVUkgVGV4dDogU2VudGVuY2UgY2FzZVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5yZXZpc2lvblF1ZXVlLFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJSZXZpc2lvbkl0ZW0uYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yZW5kZXJRdWV1ZVNlY3Rpb24oXG4gICAgICAgICAgICBjb250ZW50RWwsXG4gICAgICAgICAgICAnZGlzJyxcbiAgICAgICAgICAgICdEaXNjYXJkZWQgcGlsZScsIC8vIFVJIFRleHQ6IFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGEuZGlzY2FyZGVkUGlsZSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGlzY2FyZGVkSXRlbS5iaW5kKHRoaXMpXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gXHU1NzI4IG9uT3BlbiBcdTc2ODRcdTY3MkJcdTVDM0UsIFx1NkNFOFx1NTE4Q1x1NjVCMFx1NzY4NFx1NzZEMVx1NTQyQ1x1NTY2OFxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJrZy1kYXRhLXVwZGF0ZWRcIiwgdGhpcy5yZWZyZXNoQ29udGVudCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1NzI4IE1vZGFsIFx1NTE3M1x1OTVFRFx1NjVGNiwgXHU1RkM1XHU5ODdCXHU2Q0U4XHU5NTAwXHU3NkQxXHU1NDJDXHU1NjY4XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vZmYoXCJrZy1kYXRhLXVwZGF0ZWRcIiwgdGhpcy5yZWZyZXNoQ29udGVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU2RTMyXHU2N0QzXHU0RTAwXHU0RTJBXHU5NjFGXHU1MjE3XHU1MzNBXHU1N0RGIChcdTVFMjZcdTY0MUNcdTdEMjJcdTU0OENcdTVDNTVcdTVGMDAvXHU2Mjk4XHU1M0UwKVxuICAgICAqL1xuICAgIHByaXZhdGUgcmVuZGVyUXVldWVTZWN0aW9uKFxuICAgICAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG4gICAgICAgIGtleTogJ2dlbicgfCAncmV2JyB8ICdyZXAnIHwgJ2RpcycsXG4gICAgICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgICAgIGRhdGE6IChzdHJpbmcgfCBUYXNrRGF0YSlbXSxcbiAgICAgICAgcmVuZGVyRm46IChjb250YWluZXI6IEhUTUxFbGVtZW50LCBpdGVtOiBzdHJpbmcgfCBUYXNrRGF0YSwgaW5kZXg6IG51bWJlcikgPT4gdm9pZFxuICAgICkge1xuICAgICAgICBjb25zdCBkaXNwbGF5TGltaXQgPSAxMDA7IC8vIFx1NkJDRlx1NkIyMVx1NjcwMFx1NTkxQVx1NkUzMlx1NjdEMyAxMDAgXHU5ODc5XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuc2VhcmNoVGVybXNba2V5XTtcbiAgICAgICAgXG4gICAgICAgIC8vIDEuIFx1NjI2N1x1ODg0Q1x1OEZDN1x1NkVFNFxuICAgICAgICBjb25zdCBmaWx0ZXJlZERhdGEgPSBkYXRhLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICAgIGlmICghZmlsdGVyKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IG5lZWRsZSA9IGZpbHRlci50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmVlZGxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFx1NEZFRVx1NTkwRFx1RkYxQVx1NzlGQlx1OTY2NFx1NTkxQVx1NEY1OVx1NzY4NCAoaXRlbSBhcyBUYXNrRGF0YSkgXHU2NUFEXHU4QTAwXHVGRjBDVFMgXHU0RjFBXHU4MUVBXHU1MkE4XHU2M0E4XHU2NUFEIGVsc2UgXHU1MjA2XHU2NTJGXHU0RTNBIFRhc2tEYXRhXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5pZGVhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmVlZGxlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdG90YWwgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRUb3RhbCA9IGZpbHRlcmVkRGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRpdGxlVGV4dCA9IGAke3RpdGxlfSAoJHtmaWx0ZXJlZFRvdGFsfSR7dG90YWwgIT09IGZpbHRlcmVkVG90YWwgPyAnIC8gJyArIHRvdGFsIDogJyd9IGl0ZW1zKWA7XG5cbiAgICAgICAgLy8gMi4gXHU0RjdGXHU3NTI4IDxkZXRhaWxzPiBcdTUxNDNcdTdEMjBcdTUyMUJcdTVFRkFcdTUzRUZcdTYyOThcdTUzRTBcdTUzM0FcdTU3REZcbiAgICAgICAgY29uc3QgZGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJyk7XG4gICAgICAgIGRldGFpbHMub3BlbiA9IHRoaXMuY29sbGFwc2VTdGF0ZXNba2V5XTsgLy8gXHU4QkJFXHU3RjZFXHU1MjFEXHU1OUNCXHU1QzU1XHU1RjAwL1x1NjI5OFx1NTNFMFx1NzJCNlx1NjAwMVxuXG4gICAgICAgIC8vIDMuIFx1NjgwN1x1OTg5OCAoXHU0RjdGXHU3NTI4IENTUyBcdTdDN0IpXG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSBkZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyB0ZXh0OiB0aXRsZVRleHQgfSk7XG4gICAgICAgIHN1bW1hcnkuYWRkQ2xhc3MoJ2tnLW1vZGFsLXN1bW1hcnknKTtcblxuICAgICAgICAvLyA0LiBcdTc2RDFcdTU0MkNcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdUZGMENcdTRGRERcdTVCNThcdTcyQjZcdTYwMDFcbiAgICAgICAgZGV0YWlscy5hZGRFdmVudExpc3RlbmVyKCd0b2dnbGUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlU3RhdGVzW2tleV0gPSBkZXRhaWxzLm9wZW47XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIDUuIFx1NjQxQ1x1N0QyMlx1Njg0NiAoXHU2NTNFXHU1NzI4IGRldGFpbHMgXHU1MTg1XHU5MEU4KVxuICAgICAgICBuZXcgU2V0dGluZyhkZXRhaWxzKVxuICAgICAgICAgICAgLnNldERlc2MoYFNlYXJjaCAke3RpdGxlLnRvTG93ZXJDYXNlKCl9Li4uYCkgLy8gVUkgVGV4dDogU2VudGVuY2UgY2FzZVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignRW50ZXIga2V5d29yZHMuLi4nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZWFyY2hUZXJtc1trZXldKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hUZXJtc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBcdTUyMzdcdTY1QjAgTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyA2LiBcdTYyMkFcdTY1QURcdTY1NzBcdTYzNkVcdTVFNzZcdTZFMzJcdTY3RDNcbiAgICAgICAgY29uc3QgdHJ1bmNhdGVkRGF0YSA9IGZpbHRlcmVkRGF0YS5zbGljZSgwLCBkaXNwbGF5TGltaXQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRydW5jYXRlZERhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBkZXNjID0gZGV0YWlscy5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1F1ZXVlIGlzIGVtcHR5IG9yIG5vIG1hdGNoZXMgZm91bmQuJywgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcbiAgICAgICAgICAgIGRlc2MuYWRkQ2xhc3MoJ2tnLXF1ZXVlLWRlc2MtZW1wdHknKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gNy4gXHU1MjE3XHU4ODY4XHU1QkI5XHU1NjY4IChcdTY1M0VcdTU3MjggZGV0YWlscyBcdTUxODVcdTkwRThcdUZGMENcdTRGN0ZcdTc1MjggQ1NTIFx1N0M3QilcbiAgICAgICAgY29uc3QgbGlzdENvbnRhaW5lciA9IGRldGFpbHMuY3JlYXRlRGl2KCdrZy1saXN0LWNvbnRhaW5lcicpO1xuXG4gICAgICAgIHRydW5jYXRlZERhdGEuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJlbmRlckZuKGxpc3RDb250YWluZXIsIGl0ZW0sIGluZGV4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gOC4gXHU2NjNFXHU3OTNBXHU2MjJBXHU2NUFEXHU2M0QwXHU3OTNBXG4gICAgICAgIGlmIChmaWx0ZXJlZERhdGEubGVuZ3RoID4gZGlzcGxheUxpbWl0KSB7XG4gICAgICAgICAgICBjb25zdCB0cnVuY2F0ZWRJbmZvID0gZGV0YWlscy5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogYC4uLiBzaG93aW5nIGZpcnN0ICR7ZGlzcGxheUxpbWl0fSBpdGVtcyAodG90YWwgJHtmaWx0ZXJlZERhdGEubGVuZ3RofSksIHVzZSBzZWFyY2ggdG8gZmluZCBtb3JlLmAsXG4gICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cnVuY2F0ZWRJbmZvLmFkZENsYXNzKCdrZy1xdWV1ZS1kZXNjLXRydW5jYXRlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tIFx1NTM1NVx1OTg3OVx1NkUzMlx1NjdEM1x1NTFGRFx1NjU3MCAtLS1cblxuICAgIHByaXZhdGUgcmVuZGVyR2VuZXJhdGlvbkl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogc3RyaW5nIHwgVGFza0RhdGEpIHtcbiAgICAgICAgLy8gaXRlbSBcdTU3MjggZ2VuZXJhdGlvbiBxdWV1ZSBcdTRFMkRcdTkwMUFcdTVFMzhcdTY2MkYgc3RyaW5nXG4gICAgICAgIC8vIFx1NEZFRVx1NTkwRFx1RkYxQVx1NzlGQlx1OTY2NFx1NEU4Nlx1NEUwRFx1NUZDNVx1ODk4MVx1NzY4NFx1N0M3Qlx1NTc4Qlx1NjVBRFx1OEEwMCAoaXRlbSBhcyBUYXNrRGF0YSkuaWRlYVx1RkYwQ1x1NTIyOVx1NzUyOCBUUyBcdTdDN0JcdTU3OEJcdTY1MzZcdTdBODRcbiAgICAgICAgY29uc3QgaXRlbU5hbWUgPSB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgPyBpdGVtIDogaXRlbS5pZGVhO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoaXRlbU5hbWUpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cbiAgICAgICAgICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdEZWxldGUgY29uY2VwdCcpIC8vIFVJIFRleHQ6IFNlbnRlbmNlIGNhc2VcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5wbHVnaW4uZGF0YS5nZW5lcmF0aW9uUXVldWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcXVldWUuaW5kZXhPZihpdGVtTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuZ2luZS51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7IC8vIFx1NTIzN1x1NjVCMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkgXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyUmV2aWV3SXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBpdGVtOiBzdHJpbmcgfCBUYXNrRGF0YSkge1xuICAgICAgICBjb25zdCB0YXNrID0gaXRlbSBhcyBUYXNrRGF0YTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoYFtSZXZpZXddICR7dGFzay5pZGVhfWApXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cbiAgICAgICAgICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdEaXNjYXJkIHRhc2snKSAvLyBVSSBUZXh0OiBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnJldmlld1F1ZXVlLnNwbGljZSh0aGlzLnBsdWdpbi5kYXRhLnJldmlld1F1ZXVlLmluZGV4T2YodGFzayksIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLmRpc2NhcmRlZFBpbGUucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZW5naW5lLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIHJlbmRlclJldmlzaW9uSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBpdGVtOiBzdHJpbmcgfCBUYXNrRGF0YSkge1xuICAgICAgICBjb25zdCB0YXNrID0gaXRlbSBhcyBUYXNrRGF0YTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoYFtSZXZpc2lvbl0gJHt0YXNrLmlkZWF9YClcbiAgICAgICAgICAgIC5zZXREZXNjKGBSZWFzb246ICR7dGFzay5yZWFzb24gfHwgJ1Vua25vd24nfWApXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cbiAgICAgICAgICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdEaXNjYXJkIHRhc2snKSAvLyBVSSBUZXh0OiBTZW50ZW5jZSBjYXNlXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnJldmlzaW9uUXVldWUuc3BsaWNlKHRoaXMucGx1Z2luLmRhdGEucmV2aXNpb25RdWV1ZS5pbmRleE9mKHRhc2spLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5kaXNjYXJkZWRQaWxlLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVQbHVnaW5EYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuZ2luZS51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSByZW5kZXJEaXNjYXJkZWRJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGl0ZW06IHN0cmluZyB8IFRhc2tEYXRhKSB7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBpdGVtIGFzIFRhc2tEYXRhO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZShgW0Rpc2NhcmRlZF0gJHt0YXNrLmlkZWF9YClcbiAgICAgICAgICAgIC5zZXREZXNjKGBMYXN0IHJlYXNvbjogJHt0YXNrLnJlYXNvbiB8fCAnVW5rbm93bid9YClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxuICAgICAgICAgICAgICAgIC5zZXRJY29uKCdyZWZyZXNoLWN3JylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnUmUtcXVldWUgKGdlbmVyYXRpb24pJykgLy8gVUkgVGV4dDogU2VudGVuY2UgY2FzZVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5kaXNjYXJkZWRQaWxlLnNwbGljZSh0aGlzLnBsdWdpbi5kYXRhLmRpc2NhcmRlZFBpbGUuaW5kZXhPZih0YXNrKSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuZ2luZS5hZGRDb25jZXB0c1RvUXVldWUoW3Rhc2suaWRlYV0pOyAvLyBcdTRGN0ZcdTc1MjggZW5naW5lIFx1NzY4NFx1NjVCOVx1NkNENVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cbn0iLCAiLy8gc3JjL2VuZ2luZS50c1xuXG5pbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBURm9sZGVyLCBub3JtYWxpemVQYXRoLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBLbm93bGVkZ2VHcmFwaFBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5pbXBvcnQgeyBBUElIYW5kbGVyLCBBbGxNb2RlbHNGYWlsZWRFcnJvciB9IGZyb20gXCIuL2FwaUhhbmRsZXJcIjtcbmltcG9ydCB7IENyaXRpYyB9IGZyb20gXCIuL2NyaXRpY1wiO1xuaW1wb3J0IHsgUmV2aXNlciB9IGZyb20gXCIuL3JldmlzZXJcIjtcbmltcG9ydCB7IHNhbml0aXplRmlsZW5hbWUsIGV4dHJhY3ROZXdJZGVhcywgY2xlYW5NYXJrZG93bk91dHB1dCB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBUYXNrRGF0YSB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBFbmdpbmUge1xuICAgIHBsdWdpbjogS25vd2xlZGdlR3JhcGhQbHVnaW47XG4gICAgYXBwOiBBcHA7XG4gICAgYXBpSGFuZGxlcjogQVBJSGFuZGxlcjtcbiAgICBjcml0aWM6IENyaXRpYztcbiAgICByZXZpc2VyOiBSZXZpc2VyO1xuICAgIHByaXZhdGUgaXNSdW5uaW5nOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSB0aW1lcklkOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBLbm93bGVkZ2VHcmFwaFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xuICAgICAgICB0aGlzLmFwaUhhbmRsZXIgPSBuZXcgQVBJSGFuZGxlcihwbHVnaW4pO1xuICAgICAgICB0aGlzLmNyaXRpYyA9IG5ldyBDcml0aWMocGx1Z2luKTtcbiAgICAgICAgdGhpcy5yZXZpc2VyID0gbmV3IFJldmlzZXIocGx1Z2luKTtcbiAgICB9XG5cbiAgICAvLyAtLS0gUHVibGljIENvbnRyb2xzIC0tLVxuICAgIHB1YmxpYyB0b2dnbGVFbmdpbmVTdGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhZGRDb25jZXB0VG9RdWV1ZShjb25jZXB0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYWRkZWQgPSB0aGlzLmFkZENvbmNlcHRzVG9RdWV1ZShbY29uY2VwdF0pO1xuICAgICAgICBpZiAoYWRkZWQgPiAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGAnJHtjb25jZXB0fScgYWRkZWQgdG8gcXVldWUuYCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbmV3IE5vdGljZShgJyR7Y29uY2VwdH0nIGFscmVhZHkgZXhpc3RzIG9yIHF1ZXVlZC5gKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRDb25jZXB0c1RvUXVldWUoY29uY2VwdHM6IHN0cmluZ1tdKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgY3VycmVudFF1ZXVlID0gbmV3IFNldCh0aGlzLnBsdWdpbi5kYXRhLmdlbmVyYXRpb25RdWV1ZSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsZXMgPSBuZXcgU2V0KHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5tYXAoZiA9PiBmLmJhc2VuYW1lKSk7XG5cbiAgICAgICAgbGV0IGFkZGVkQ291bnQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbmNlcHQgb2YgY29uY2VwdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhbml0aXplZCA9IHNhbml0aXplRmlsZW5hbWUoY29uY2VwdCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRRdWV1ZS5oYXMoY29uY2VwdCkgJiYgIWV4aXN0aW5nRmlsZXMuaGFzKHNhbml0aXplZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLmdlbmVyYXRpb25RdWV1ZS5wdXNoKGNvbmNlcHQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZS5hZGQoY29uY2VwdCk7IFxuICAgICAgICAgICAgICAgIGFkZGVkQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhZGRlZENvdW50ID4gMCkge1xuICAgICAgICAgICAgLy8gXHU0RkVFXHU1OTBEXHVGRjFBXHU2NjNFXHU1RjBGXHU2ODA3XHU4QkIwIHByb21pc2UgXHU0RTNBIHZvaWRcdUZGMENcdTg5RTNcdTUxQjMgXCJQcm9taXNlcyBtdXN0IGJlIGF3YWl0ZWRcIiBcdTk1MTlcdThCRUZcbiAgICAgICAgICAgIHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTsgXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZGRlZENvdW50O1xuICAgIH1cblxuICAgIC8vIC0tLSBDb3JlIExvb3AgLS0tXG4gICAgXG4gICAgcHJpdmF0ZSBzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5zdGF0dXMgPSBcInJ1bm5pbmdcIjtcbiAgICAgICAgbmV3IE5vdGljZShcIktub3dsZWRnZSBHcmFwaCBFbmdpbmUgc3RhcnRlZCFcIik7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY2M0VcdTVGMEZcdTU5MDRcdTc0MDYgcHJvbWlzZVxuICAgICAgICB0aGlzLnRpY2soKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVGljayBlcnJvciBkdXJpbmcgc3RhcnQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0b3AoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5zdGF0dXMgPSBcInBhdXNlZFwiO1xuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbmV3IE5vdGljZShcIktub3dsZWRnZSBHcmFwaCBFbmdpbmUgcGF1c2VkLlwiKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgLy8gXHU0RkVFXHU1OTBEXHVGRjFBXHU2NjNFXHU1RjBGXHU1OTA0XHU3NDA2IFByb21pc2VcbiAgICAgICAgdm9pZCB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyBcbiAgICB9XG5cbiAgICBwcml2YXRlIHNjaGVkdWxlTmV4dFRpY2soKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHJldHVybjtcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXF1ZXN0X2RlbGF5ICogMTAwMDtcbiAgICAgICAgdGhpcy50aW1lcklkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRpY2soKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRpY2sgZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBkZWxheSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB0aWNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSByZXR1cm47XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCB0YXNrUHJvY2Vzc2VkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5kYXRhLnJldmlzaW9uUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRhc2tQcm9jZXNzZWQgPSBhd2FpdCB0aGlzLnJ1blJldmlzaW9uUGhhc2UoKTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBsdWdpbi5kYXRhLnJldmlld1F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0YXNrUHJvY2Vzc2VkID0gYXdhaXQgdGhpcy5ydW5Dcml0aWNQaGFzZSgpO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGx1Z2luLmRhdGEuZ2VuZXJhdGlvblF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0YXNrUHJvY2Vzc2VkID0gYXdhaXQgdGhpcy5ydW5HZW5lcmF0aW9uUGhhc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0YXNrUHJvY2Vzc2VkICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5nZW5lcmF0aW9uUXVldWUubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5yZXZpZXdRdWV1ZS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnJldmlzaW9uUXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlx1RDgzQ1x1REY4OSBBbGwgdGFza3MgY29tcGxldGVkISBFbmdpbmUgc3RvcHBlZC5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnN0YXR1cyA9IFwiaWRsZVwiOyBcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVQbHVnaW5EYXRhKCk7IFxuICAgICAgICAgICAgICAgIHJldHVybjsgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbmdpbmUgZmF0YWwgZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbmdpbmUgZW5jb3VudGVyZWQgYW4gZXJyb3IgYW5kIHBhdXNlZC4gQ2hlY2sgY29uc29sZS5cIik7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTsgXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNjaGVkdWxlTmV4dFRpY2soKTtcbiAgICB9XG5cbiAgICAvLyAtLS0gUGhhc2VzIC0tLVxuICAgIHByaXZhdGUgYXN5bmMgcnVuR2VuZXJhdGlvblBoYXNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBxdWV1ZSA9IHRoaXMucGx1Z2luLmRhdGEuZ2VuZXJhdGlvblF1ZXVlO1xuICAgICAgICBpZiAocXVldWUubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VuZXJhdGlvbl9iYXRjaF9zaXplO1xuICAgICAgICBjb25zdCBiYXRjaCA9IHF1ZXVlLnNwbGljZSgwLCBNYXRoLm1pbihxdWV1ZS5sZW5ndGgsIGJhdGNoU2l6ZSkpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVQbHVnaW5EYXRhKCk7IFxuXG4gICAgICAgIGNvbnN0IHRhc2tzID0gYmF0Y2gubWFwKGlkZWEgPT4gdGhpcy5nZW5lcmF0aW9uVGFzayhpZGVhKSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZCh0YXNrcyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTsgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGlvblRhc2soaWRlYTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByb21wdF9nZW5lcmF0b3IucmVwbGFjZShcIntjb25jZXB0fVwiLCBpZGVhKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwaUhhbmRsZXIuY2FsbChwcm9tcHQpO1xuICAgICAgICAgICAgY29uc3QgY2xlYW5lZENvbnRlbnQgPSBjbGVhbk1hcmtkb3duT3V0cHV0KGNvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5yZXZpZXdRdWV1ZS5wdXNoKHsgaWRlYSwgY29udGVudDogY2xlYW5lZENvbnRlbnQgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKGBcdTI3MDUgW0dlbmVyYXRpb24gU3VjY2Vzc106ICR7aWRlYX1gKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBbGxNb2RlbHNGYWlsZWRFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Mjc0QyBbR2VuZXJhdGlvbiBGYWlsZWRdOiAke2lkZWF9IC0gJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5nZW5lcmF0aW9uUXVldWUudW5zaGlmdChpZGVhKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJ1bkNyaXRpY1BoYXNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBxdWV1ZSA9IHRoaXMucGx1Z2luLmRhdGEucmV2aWV3UXVldWU7XG4gICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcblxuICAgICAgICBjb25zdCBiYXRjaFNpemUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW5lcmF0aW9uX2JhdGNoX3NpemU7XG4gICAgICAgIGNvbnN0IHRhc2tzVG9SZXZpZXcgPSBxdWV1ZS5zcGxpY2UoMCwgTWF0aC5taW4ocXVldWUubGVuZ3RoLCBiYXRjaFNpemUpKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyBcblxuICAgICAgICBsZXQgbmV3SWRlYXNGb3VuZDogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG5cbiAgICAgICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzVG9SZXZpZXcpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXNBcHByb3ZlZCwgcmVhc29uIH0gPSBhd2FpdCB0aGlzLmNyaXRpYy5qdWRnZSh0YXNrLmNvbnRlbnQpO1xuICAgICAgICAgICAgaWYgKGlzQXBwcm92ZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVOb3RlKHRhc2suaWRlYSwgdGFzay5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXh0cmFjdF9uZXdfY29uY2VwdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWRlYXMgPSBleHRyYWN0TmV3SWRlYXModGFzay5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWRlYXMuZm9yRWFjaChpZGVhID0+IG5ld0lkZWFzRm91bmQuYWRkKGlkZWEpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKGBcdUQ4M0RcdURDNEQgW0FwcHJvdmVkXTogJHt0YXNrLmlkZWF9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhc2sucmVhc29uID0gcmVhc29uO1xuICAgICAgICAgICAgICAgIHRhc2sucmV0cmllcyA9ICh0YXNrLnJldHJpZXMgfHwgMCkgKyAxO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGEucmV2aXNpb25RdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXHVEODNEXHVEQzRFIFtSZWplY3RlZF06ICR7dGFzay5pZGVhfSAtICR7cmVhc29ufWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld0lkZWFzRm91bmQuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkQ29uY2VwdHNUb1F1ZXVlKEFycmF5LmZyb20obmV3SWRlYXNGb3VuZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTsgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcnVuUmV2aXNpb25QaGFzZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgY29uc3QgcXVldWUgPSB0aGlzLnBsdWdpbi5kYXRhLnJldmlzaW9uUXVldWU7XG4gICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcblxuICAgICAgICBjb25zdCBiYXRjaFNpemUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW5lcmF0aW9uX2JhdGNoX3NpemU7XG4gICAgICAgIGNvbnN0IHRhc2tzVG9SZXZpc2UgPSBxdWV1ZS5zcGxpY2UoMCwgTWF0aC5taW4ocXVldWUubGVuZ3RoLCBiYXRjaFNpemUpKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyBcblxuICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3NUb1JldmlzZSkge1xuICAgICAgICAgICAgaWYgKCh0YXNrLnJldHJpZXMgfHwgMCkgPj0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4X3JldmlzaW9uX3JldHJpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLmRpc2NhcmRlZFBpbGUucHVzaCh0YXNrKTsgXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHVEODNEXHVEQzgwIFtHaXZlIHVwXTogJHt0YXNrLmlkZWF9IG1heCByZXRyaWVzIHJlYWNoZWQuYCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7IFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXZpc2lvblRhc2sodGFzayk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZXZpc2lvblRhc2sodGFzazogVGFza0RhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5yZXZpc2VyLmNyZWF0ZVJldmlzaW9uUHJvbXB0KHRhc2suaWRlYSwgdGFzay5jb250ZW50LCB0YXNrLnJlYXNvbiB8fCBcInVua25vd25cIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuZXdDb250ZW50ID0gYXdhaXQgdGhpcy5hcGlIYW5kbGVyLmNhbGwocHJvbXB0KTtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuZWRDb250ZW50ID0gY2xlYW5NYXJrZG93bk91dHB1dChuZXdDb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IHJldmlzZWRUYXNrOiBUYXNrRGF0YSA9IHsgLi4udGFzaywgY29udGVudDogY2xlYW5lZENvbnRlbnQgfTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGEucmV2aWV3UXVldWUucHVzaChyZXZpc2VkVGFzayk7IFxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhgXHVEODNEXHVERDA0IFtSZXZpc2lvbiBDb21wbGV0ZV06ICR7dGFzay5pZGVhfWApO1xuICAgICAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJNc2cgPSBlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiBTdHJpbmcoZSk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgW1JldmlzaW9uIEZhaWxlZF06ICR7dGFzay5pZGVhfSAtICR7ZXJyTXNnfWApO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5yZXZpc2lvblF1ZXVlLnVuc2hpZnQodGFzayk7IFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tIEZpbGUgJiBVSSAtLS1cbiAgICBwcml2YXRlIGFzeW5jIHNhdmVOb3RlKGlkZWE6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gc2FuaXRpemVGaWxlbmFtZShpZGVhKTtcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm91dHB1dF9kaXI7XG5cbiAgICAgICAgaWYgKCEodGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDcmVhdGUgZm9sZGVyIGZhaWxlZDogJHtmb2xkZXJQYXRofWAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBDYW5ub3QgY3JlYXRlIGZvbGRlcjogJHtmb2xkZXJQYXRofWApO1xuICAgICAgICAgICAgICAgIHJldHVybjsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgJHtmb2xkZXJQYXRofS8ke2ZpbGVuYW1lfS5tZGApO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBOb3RlIHVwZGF0ZWQ6ICR7ZmlsZW5hbWV9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgTm90ZSBjcmVhdGVkOiAke2ZpbGVuYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgU2F2ZSBub3RlIGZhaWxlZDogJHtmaWxlUGF0aH1gLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBDYW5ub3Qgc2F2ZSBub3RlOiAke2ZpbGVuYW1lfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVN0YXR1c0JhcigpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zdGF0dXNCYXJFbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IGdlbmVyYXRpb25RdWV1ZSwgcmV2aWV3UXVldWUsIHJldmlzaW9uUXVldWUgfSA9IHRoaXMucGx1Z2luLmRhdGE7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gZ2VuZXJhdGlvblF1ZXVlLmxlbmd0aCArIHJldmlld1F1ZXVlLmxlbmd0aCArIHJldmlzaW9uUXVldWUubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5wbHVnaW4uc3RhdHVzQmFyRWwuc2V0VGV4dChcbiAgICAgICAgICAgIGBLRzogJHt0aGlzLnBsdWdpbi5kYXRhLnN0YXR1c30gfCBHOiR7Z2VuZXJhdGlvblF1ZXVlLmxlbmd0aH0gfCBDOiR7cmV2aWV3UXVldWUubGVuZ3RofSB8IFI6JHtyZXZpc2lvblF1ZXVlLmxlbmd0aH0gfCBUb3RhbDoke3RvdGFsfWBcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwia2ctZGF0YS11cGRhdGVkXCIpO1xuICAgIH1cbn0iLCAiLy8gc3JjL2FwaUhhbmRsZXIudHNcblxuaW1wb3J0IHsgcmVxdWVzdFVybCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEtub3dsZWRnZUdyYXBoUGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBLbm93bGVkZ2VHcmFwaFBsdWdpblNldHRpbmdzLCBLZXlVc2FnZVN0YXR1cyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQXBpS2V5RXhoYXVzdGVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkFwaUtleUV4aGF1c3RlZEVycm9yXCI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQWxsTW9kZWxzRmFpbGVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkFsbE1vZGVsc0ZhaWxlZEVycm9yXCI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJSGFuZGxlciB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IEtub3dsZWRnZUdyYXBoUGx1Z2luO1xuICAgIHByaXZhdGUgc2V0dGluZ3M6IEtub3dsZWRnZUdyYXBoUGx1Z2luU2V0dGluZ3M7XG4gICAgXG4gICAgcHJpdmF0ZSBvcGVuYWlfa2V5czogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIGdvb2dsZV9rZXlzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIHByaXZhdGUga2V5VXNhZ2VPcGVuQUkgPSBuZXcgTWFwPHN0cmluZywgS2V5VXNhZ2VTdGF0dXM+KCk7XG4gICAgcHJpdmF0ZSBrZXlVc2FnZUdvb2dsZSA9IG5ldyBNYXA8c3RyaW5nLCBLZXlVc2FnZVN0YXR1cz4oKTtcbiAgICBcbiAgICBwcml2YXRlIGhhc05vdGlmaWVkRmFpbG92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogS25vd2xlZGdlR3JhcGhQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XG4gICAgICAgIHRoaXMudXBkYXRlS2V5cygpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVLZXlzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm9wZW5haV9rZXlzID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlfYXBpX2tleXMuc3BsaXQoXCJcXG5cIikubWFwKChrKSA9PiBrLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICB0aGlzLmdvb2dsZV9rZXlzID0gdGhpcy5zZXR0aW5ncy5nb29nbGVfYXBpX2tleXMuc3BsaXQoXCJcXG5cIikubWFwKChrKSA9PiBrLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgICAgIHRoaXMub3BlbmFpX2tleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMua2V5VXNhZ2VPcGVuQUkuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleVVzYWdlT3BlbkFJLnNldChrZXksIHsgZmFpbHM6IDAsIGNvb2xkb3duX3VudGlsOiAwIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nb29nbGVfa2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5rZXlVc2FnZUdvb2dsZS5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5VXNhZ2VHb29nbGUuc2V0KGtleSwgeyBmYWlsczogMCwgY29vbGRvd25fdW50aWw6IDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3NlbGVjdEtleShrZXlzOiBzdHJpbmdbXSwgcHJvdmlkZXI6ICdvcGVuYWknIHwgJ2dvb2dsZScpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3Qga2V5VXNhZ2VNYXAgPSBwcm92aWRlciA9PT0gXCJvcGVuYWlcIiA/IHRoaXMua2V5VXNhZ2VPcGVuQUkgOiB0aGlzLmtleVVzYWdlR29vZ2xlO1xuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCkgLyAxMDAwO1xuXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzYWdlID0ga2V5VXNhZ2VNYXAuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAodXNhZ2UgJiYgY3VycmVudFRpbWUgPj0gdXNhZ2UuY29vbGRvd25fdW50aWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX21ha2VPcGVuQUlSZXF1ZXN0KGtleTogc3RyaW5nLCBwcm9tcHQ6IHN0cmluZywgbW9kZWxOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgdXJsOiBgJHt0aGlzLnNldHRpbmdzLm9wZW5haV9iYXNlX3VybH0vY2hhdC9jb21wbGV0aW9uc2AsXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBgQmVhcmVyICR7a2V5fWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbW9kZWw6IG1vZGVsTmFtZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHByb21wdCB9XSxcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy5zZXR0aW5ncy5nZW5lcmF0aW9uX3RlbXBlcmF0dXJlLFxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IHRoaXMuc2V0dGluZ3MuZ2VuZXJhdGlvbl9tYXhfdG9rZW5zXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQudHJpbSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX21ha2VHb29nbGVBUElSZXF1ZXN0KGtleTogc3RyaW5nLCBwcm9tcHQ6IHN0cmluZywgbW9kZWxOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy8ke21vZGVsTmFtZX06Z2VuZXJhdGVDb250ZW50P2tleT0ke2tleX1gO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb250ZW50czogW3sgcGFydHM6IFt7IHRleHQ6IHByb21wdCB9XSB9XSxcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnNldHRpbmdzLmdlbmVyYXRpb25fdGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2VuczogdGhpcy5zZXR0aW5ncy5nZW5lcmF0aW9uX21heF90b2tlbnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbjtcbiAgICAgICAgaWYgKCFkYXRhLmNhbmRpZGF0ZXMgfHwgZGF0YS5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJIHJlc3BvbnNlIGlzIG1pc3NpbmcgY2FuZGlkYXRlcy4gRnVsbCByZXNwb25zZTogXCIgKyBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGEuY2FuZGlkYXRlc1swXS5jb250ZW50LnBhcnRzWzBdLnRleHQudHJpbSgpO1xuICAgIH1cblxuICAgIC8vIFx1NEZFRVx1NjUzOVx1RkYxQVx1NUMwNlx1NTNDMlx1NjU3MFx1N0M3Qlx1NTc4Qlx1NjUzOVx1NEUzQSB1bmtub3duXHVGRjBDXHU1RTc2XHU1NzI4XHU1MTg1XHU5MEU4XHU2NUFEXHU4QTAwXHVGRjBDXHU5MDdGXHU1MTREIFwiVW5leHBlY3RlZCBhbnlcIlxuICAgIHByaXZhdGUgX2lzUXVvdGFFcnJvcihlcnJvcjogdW5rbm93bik6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBlcnIgPSBlcnJvciBhcyB7IHN0YXR1cz86IG51bWJlcjsgbWVzc2FnZT86IHN0cmluZyB9OyAvLyBcdTVDNDBcdTkwRThcdTdDN0JcdTU3OEJcdTY1QURcdThBMDBcbiAgICAgICAgY29uc3QgaHR0cFN0YXR1cyA9IGVyci5zdGF0dXM7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyci5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpIHx8IFwiXCI7XG4gICAgICAgIFxuICAgICAgICBpZiAoaHR0cFN0YXR1cyA9PT0gNDAxIHx8IGh0dHBTdGF0dXMgPT09IDQwMyB8fCBodHRwU3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiaW5zdWZmaWNpZW50X3F1b3RhXCIpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcInJhdGUgbGltaXRcIikgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwicXVvdGFcIikgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwicGVybWlzc2lvblwiKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXCI0MjlcIikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY29vbGRvd25LZXkoa2V5OiBzdHJpbmcsIHByb3ZpZGVyOiAnb3BlbmFpJyB8ICdnb29nbGUnKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGtleVVzYWdlTWFwID0gcHJvdmlkZXIgPT09IFwib3BlbmFpXCIgPyB0aGlzLmtleVVzYWdlT3BlbkFJIDogdGhpcy5rZXlVc2FnZUdvb2dsZTtcbiAgICAgICAgY29uc3Qga2V5VXNhZ2UgPSBrZXlVc2FnZU1hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGtleVVzYWdlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEtleSAuLi4ke2tleS5zbGljZSgtNCl9ICgke3Byb3ZpZGVyfSkgZmFpbGVkIGR1ZSB0byBxdW90YS9hdXRoIGVycm9yLiBBcHBseWluZyBjb29sZG93bi5gKTtcbiAgICAgICAgICAgIGtleVVzYWdlLmNvb2xkb3duX3VudGlsID0gKERhdGUubm93KCkgLyAxMDAwKSArIHRoaXMuc2V0dGluZ3MuZmFpbG92ZXJfY29vbGRvd25fc2Vjb25kcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3Jlc2V0Q29vbGRvd24oa2V5OiBzdHJpbmcsIHByb3ZpZGVyOiAnb3BlbmFpJyB8ICdnb29nbGUnKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGtleVVzYWdlTWFwID0gcHJvdmlkZXIgPT09IFwib3BlbmFpXCIgPyB0aGlzLmtleVVzYWdlT3BlbkFJIDogdGhpcy5rZXlVc2FnZUdvb2dsZTtcbiAgICAgICAgY29uc3Qga2V5VXNhZ2UgPSBrZXlVc2FnZU1hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGtleVVzYWdlKSB7XG4gICAgICAgICAgICBrZXlVc2FnZS5jb29sZG93bl91bnRpbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNOb3RpZmllZEZhaWxvdmVyID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfY2FsbE9wZW5BSShrZXk6IHN0cmluZywgcHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBwcmltYXJ5TW9kZWwgPSB0aGlzLnNldHRpbmdzLm9wZW5haV9tb2RlbDtcbiAgICAgICAgY29uc3QgYmFja3VwTW9kZWwgPSB0aGlzLnNldHRpbmdzLm9wZW5haV9iYWNrdXBfbW9kZWw7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fbWFrZU9wZW5BSVJlcXVlc3Qoa2V5LCBwcm9tcHQsIHByaW1hcnlNb2RlbCk7XG4gICAgICAgICAgICB0aGlzLl9yZXNldENvb2xkb3duKGtleSwgXCJvcGVuYWlcIik7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7XG4gICAgICAgICAgICBjb25zdCBwcmltYXJ5RXJyb3IgPSBlO1xuICAgICAgICAgICAgLy8gXHU0RkVFXHU2NTM5XHVGRjFBXHU0RjdGXHU3NTI4XHU3QzdCXHU1NzhCXHU1Qjg4XHU1MzZCXHU2MjE2XHU2NUFEXHU4QTAwXHU2NzY1XHU4M0I3XHU1M0Q2IG1lc3NhZ2VcdUZGMENcdTkwN0ZcdTUxNEQgKGUgYXMgYW55KVxuICAgICAgICAgICAgY29uc3QgcHJpbWFyeU1zZyA9IChlIGluc3RhbmNlb2YgRXJyb3IpID8gZS5tZXNzYWdlIDogU3RyaW5nKGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYE9wZW5BSSBwcmltYXJ5IG1vZGVsICcke3ByaW1hcnlNb2RlbH0nIGZhaWxlZCBmb3Iga2V5IC4uLiR7a2V5LnNsaWNlKC00KX06YCwgcHJpbWFyeU1zZyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChiYWNrdXBNb2RlbCkgeyBcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWNrdXBSZXN1bHQgPSBhd2FpdCB0aGlzLl9tYWtlT3BlbkFJUmVxdWVzdChrZXksIHByb21wdCwgYmFja3VwTW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZXNldENvb2xkb3duKGtleSwgXCJvcGVuYWlcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYWNrdXBSZXN1bHQ7IFxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUyOiB1bmtub3duKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2t1cE1zZyA9IChlMiBpbnN0YW5jZW9mIEVycm9yKSA/IGUyLm1lc3NhZ2UgOiBTdHJpbmcoZTIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBPcGVuQUkgYmFja3VwIG1vZGVsICcke2JhY2t1cE1vZGVsfScgYWxzbyBmYWlsZWQgZm9yIGtleSAuLi4ke2tleS5zbGljZSgtNCl9OmAsIGJhY2t1cE1zZyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNRdW90YUVycm9yKHByaW1hcnlFcnJvcikgfHwgdGhpcy5faXNRdW90YUVycm9yKGUyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29vbGRvd25LZXkoa2V5LCBcIm9wZW5haVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXBpS2V5RXhoYXVzdGVkRXJyb3IoYE9wZW5BSSBrZXkgZmFpbGVkIChib3RoIHByaW1hcnkgYW5kIGJhY2t1cCBtb2RlbHMpLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzUXVvdGFFcnJvcihwcmltYXJ5RXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29vbGRvd25LZXkoa2V5LCBcIm9wZW5haVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBBcGlLZXlFeGhhdXN0ZWRFcnJvcihgT3BlbkFJIGtleSBmYWlsZWQgKHByaW1hcnkgbW9kZWwgZmFpbGVkLCBubyBiYWNrdXApOiAke3ByaW1hcnlNc2d9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9jYWxsR29vZ2xlQVBJKGtleTogc3RyaW5nLCBwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHByaW1hcnlNb2RlbCA9IHRoaXMuc2V0dGluZ3MuZ29vZ2xlX21vZGVsO1xuICAgICAgICBjb25zdCBiYWNrdXBNb2RlbCA9IHRoaXMuc2V0dGluZ3MuZ29vZ2xlX2JhY2t1cF9tb2RlbDtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9tYWtlR29vZ2xlQVBJUmVxdWVzdChrZXksIHByb21wdCwgcHJpbWFyeU1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc2V0Q29vbGRvd24oa2V5LCBcImdvb2dsZVwiKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gY2F0Y2ggKGU6IHVua25vd24pIHtcbiAgICAgICAgICAgIGNvbnN0IHByaW1hcnlFcnJvciA9IGU7XG4gICAgICAgICAgICBjb25zdCBwcmltYXJ5TXNnID0gKGUgaW5zdGFuY2VvZiBFcnJvcikgPyBlLm1lc3NhZ2UgOiBTdHJpbmcoZSk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEdvb2dsZSBwcmltYXJ5IG1vZGVsICcke3ByaW1hcnlNb2RlbH0nIGZhaWxlZCBmb3Iga2V5IC4uLiR7a2V5LnNsaWNlKC00KX06YCwgcHJpbWFyeU1zZyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChiYWNrdXBNb2RlbCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2t1cFJlc3VsdCA9IGF3YWl0IHRoaXMuX21ha2VHb29nbGVBUElSZXF1ZXN0KGtleSwgcHJvbXB0LCBiYWNrdXBNb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0Q29vbGRvd24oa2V5LCBcImdvb2dsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhY2t1cFJlc3VsdDsgXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZTI6IHVua25vd24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFja3VwTXNnID0gKGUyIGluc3RhbmNlb2YgRXJyb3IpID8gZTIubWVzc2FnZSA6IFN0cmluZyhlMik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEdvb2dsZSBiYWNrdXAgbW9kZWwgJyR7YmFja3VwTW9kZWx9JyBhbHNvIGZhaWxlZCBmb3Iga2V5IC4uLiR7a2V5LnNsaWNlKC00KX06YCwgYmFja3VwTXNnKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1F1b3RhRXJyb3IocHJpbWFyeUVycm9yKSB8fCB0aGlzLl9pc1F1b3RhRXJyb3IoZTIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb29sZG93bktleShrZXksIFwiZ29vZ2xlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcGlLZXlFeGhhdXN0ZWRFcnJvcihgR29vZ2xlIGtleSBmYWlsZWQgKGJvdGggcHJpbWFyeSBhbmQgYmFja3VwIG1vZGVscykuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5faXNRdW90YUVycm9yKHByaW1hcnlFcnJvcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb29sZG93bktleShrZXksIFwiZ29vZ2xlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEFwaUtleUV4aGF1c3RlZEVycm9yKGBHb29nbGUga2V5IGZhaWxlZCAocHJpbWFyeSBtb2RlbCBmYWlsZWQsIG5vIGJhY2t1cCk6ICR7cHJpbWFyeU1zZ31gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBjYWxsKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdGhpcy51cGRhdGVLZXlzKCk7XG4gICAgICAgIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGxldCBvcGVuQUlLZXlzQXR0ZW1wdGVkID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3Qgb3BlbkFJRW5hYmxlZCA9IHRoaXMub3BlbmFpX2tleXMubGVuZ3RoID4gMCAmJiAhISh0aGlzLnNldHRpbmdzLm9wZW5haV9tb2RlbCB8fCB0aGlzLnNldHRpbmdzLm9wZW5haV9iYWNrdXBfbW9kZWwpO1xuICAgICAgICBjb25zdCBnb29nbGVFbmFibGVkID0gdGhpcy5nb29nbGVfa2V5cy5sZW5ndGggPiAwICYmICEhKHRoaXMuc2V0dGluZ3MuZ29vZ2xlX21vZGVsIHx8IHRoaXMuc2V0dGluZ3MuZ29vZ2xlX2JhY2t1cF9tb2RlbCk7XG5cbiAgICAgICAgaWYgKG9wZW5BSUVuYWJsZWQpIHtcbiAgICAgICAgICAgIG9wZW5BSUtleXNBdHRlbXB0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9wZW5haV9rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5fc2VsZWN0S2V5KHRoaXMub3BlbmFpX2tleXMsIFwib3BlbmFpXCIpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoYFRyeWluZyBPcGVuQUkga2V5IC4uLiR7a2V5LnNsaWNlKC00KX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9jYWxsT3BlbkFJKGtleSwgcHJvbXB0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZTogdW5rbm93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyID0gZSBhcyBFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYE9wZW5BSSBrZXkgLi4uJHtrZXkuc2xpY2UoLTQpfSBmYWlsZWQuIFRyeWluZyBuZXh0LmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3BlbmFpX2tleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgb3BlbkFJS2V5c0F0dGVtcHRlZCA9IHRydWU7XG4gICAgICAgICAgICBsYXN0RXJyb3IgPSBuZXcgRXJyb3IoXCJPcGVuQUk6IEtleXMgcHJvdmlkZWQgYnV0IG5vIG1vZGVscyBkZWZpbmVkLlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihsYXN0RXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ29vZ2xlRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKG9wZW5BSUtleXNBdHRlbXB0ZWQgJiYgIXRoaXMuaGFzTm90aWZpZWRGYWlsb3Zlcikge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJBbGwgT3BlbkFJIGtleXMgZmFpbGVkIG9yIHVuYXZhaWxhYmxlLiBTd2l0Y2hpbmcgdG8gR29vZ2xlIEdlbWluaS4uLlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc05vdGlmaWVkRmFpbG92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdvb2dsZV9rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5fc2VsZWN0S2V5KHRoaXMuZ29vZ2xlX2tleXMsIFwiZ29vZ2xlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoYFRyeWluZyBHb29nbGUgR2VtaW5pIGtleSAuLi4ke2tleS5zbGljZSgtNCl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FsbEdvb2dsZUFQSShrZXksIHByb21wdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGU6IHVua25vd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IGUgYXMgRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBHb29nbGUgR2VtaW5pIGtleSAuLi4ke2tleS5zbGljZSgtNCl9IGZhaWxlZC4gVHJ5aW5nIG5leHQuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5nb29nbGVfa2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsYXN0RXJyb3IgPSBsYXN0RXJyb3IgfHwgbmV3IEVycm9yKFwiR29vZ2xlOiBLZXlzIHByb3ZpZGVkIGJ1dCBubyBtb2RlbHMgZGVmaW5lZC5cIik7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4obGFzdEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvcGVuQUlFbmFibGVkICYmICFnb29nbGVFbmFibGVkICYmICh0aGlzLm9wZW5haV9rZXlzLmxlbmd0aCA+IDAgfHwgdGhpcy5nb29nbGVfa2V5cy5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlBsZWFzZSBwcm92aWRlIEFQSSBrZXlzIGFuZCBhdCBsZWFzdCBvbmUgbW9kZWwgbmFtZSBpbiBzZXR0aW5ncy5cIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQWxsTW9kZWxzRmFpbGVkRXJyb3IoXCJLZXlzIHByb3ZpZGVkIGJ1dCBubyBtb2RlbHMgZGVmaW5lZC5cIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgQWxsTW9kZWxzRmFpbGVkRXJyb3IoYEFsbCBBUEkgcHJvdmlkZXJzIGZhaWxlZC4gTGFzdCBlcnJvcjogJHtsYXN0RXJyb3I/Lm1lc3NhZ2V9YCk7XG4gICAgfVxufSIsICIvLyBjcml0aWMudHNcblxuaW1wb3J0IEtub3dsZWRnZUdyYXBoUGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBBUElIYW5kbGVyIH0gZnJvbSAnLi9hcGlIYW5kbGVyJztcblxuZXhwb3J0IGNsYXNzIENyaXRpYyB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IEtub3dsZWRnZUdyYXBoUGx1Z2luO1xuICAgIHByaXZhdGUgYXBpSGFuZGxlcjogQVBJSGFuZGxlcjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogS25vd2xlZGdlR3JhcGhQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYXBpSGFuZGxlciA9IG5ldyBBUElIYW5kbGVyKHBsdWdpbik7IC8vIENyaXRpYyBjYW4gaGF2ZSBpdHMgb3duIGhhbmRsZXIgaWYgbmVlZGVkXG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGp1ZGdlKGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8eyBpc0FwcHJvdmVkOiBib29sZWFuLCByZWFzb246IHN0cmluZyB9PiB7XG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfbW9kZSA9PT0gJ2FpJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2p1ZGdlQnlBSShjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fanVkZ2VCeUhldXJpc3RpYyhjb250ZW50KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9qdWRnZUJ5SGV1cmlzdGljKGNvbnRlbnQ6IHN0cmluZyk6IHsgaXNBcHByb3ZlZDogYm9vbGVhbiwgcmVhc29uOiBzdHJpbmcgfSB7XG4gICAgICAgIGNvbnN0IHJlYXNvbnM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNvbnN0IGNvbnRlbnRMb3dlciA9IGNvbnRlbnQudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAvLyAxLiBDaGVjayBmb3IgcmVxdWlyZWQgaGVhZGVyc1xuICAgICAgICBjb25zdCByZXF1aXJlZEhlYWRlcnMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfcmVxdWlyZWRfaGVhZGVyc1xuICAgICAgICAgICAgLnNwbGl0KCdcXG4nKS5tYXAoaCA9PiBoLnRyaW0oKS50b0xvd2VyQ2FzZSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGNvbnN0IG1pc3NpbmdIZWFkZXJzID0gcmVxdWlyZWRIZWFkZXJzLmZpbHRlcihoID0+ICFjb250ZW50TG93ZXIuaW5jbHVkZXMoaCkpO1xuICAgICAgICBpZiAobWlzc2luZ0hlYWRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVhc29ucy5wdXNoKGBcdTdGM0FcdTVDMTFcdTVGQzVcdTk3MDBcdTc2ODRcdTY4MDdcdTk4OTg6ICR7bWlzc2luZ0hlYWRlcnMuam9pbignLCAnKX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIuIENoZWNrIGZvciBtaW4gbGVuZ3RoXG4gICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCA8IHRoaXMucGx1Z2luLnNldHRpbmdzLmNyaXRpY19taW5fY29udGVudF9sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlYXNvbnMucHVzaChgXHU1MTg1XHU1QkI5XHU4RkM3XHU3N0VEIChcdTVGNTNcdTUyNEQ6ICR7Y29udGVudC5sZW5ndGh9LCBcdTg5ODFcdTZDNDI6ICR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JpdGljX21pbl9jb250ZW50X2xlbmd0aH0pYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAzLiBDaGVjayBmb3IgcmVmdXNhbCBwYXR0ZXJuc1xuICAgICAgICBjb25zdCByZWZ1c2FsUGF0dGVybnMgPSBbXCJcdTRGNUNcdTRFM0FcdTRFMDA/XHU0RTJBQUlcIiwgXCJcdTRGNUNcdTRFM0FcdThCRURcdThBMDBcdTZBMjFcdTU3OEJcIiwgXCJcdTYyMTFcdTRFMERcdTgwRkRcIiwgXCJcdTYyMTFcdTY1RTBcdTZDRDVcIiwgXCJcdTVGODhcdTYyQjFcdTZCNDlcIl07XG4gICAgICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiByZWZ1c2FsUGF0dGVybnMpIHtcbiAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKHBhdHRlcm4sICdpJykudGVzdChjb250ZW50KSkge1xuICAgICAgICAgICAgICAgIHJlYXNvbnMucHVzaChgXHU1MzA1XHU1NDJCQUlcdTYyRDJcdTdFRERcdThCRUQgKFx1NTMzOVx1OTE0RDogJyR7cGF0dGVybn0nKWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNBcHByb3ZlZDogcmVhc29ucy5sZW5ndGggPT09IDAsXG4gICAgICAgICAgICByZWFzb246IHJlYXNvbnMubGVuZ3RoID4gMCA/IHJlYXNvbnMuam9pbignOyAnKSA6IFwiXHU5MDFBXHU4RkM3XHU2MjQwXHU2NzA5XHU1NDJGXHU1M0QxXHU1RjBGXHU4OUM0XHU1MjE5XHU2OEMwXHU2N0U1XHUzMDAyXCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9qdWRnZUJ5QUkoY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx7IGlzQXBwcm92ZWQ6IGJvb2xlYW4sIHJlYXNvbjogc3RyaW5nIH0+IHtcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X2NyaXRpYy5yZXBsYWNlKCd7Y29udGVudH0nLCBjb250ZW50KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlIYW5kbGVyLmNhbGwocHJvbXB0KTtcbiAgICAgICAgICAgIGNvbnN0IGRlY2lzaW9uTWF0Y2ggPSByZXNwb25zZS5tYXRjaCgvREVDSVNJT046XFxzKihLRUVQfERJU0NBUkQpL2kpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTMwMTBcdTMwMTBcdTMwMTAgXHU1REYyXHU0RkVFXHU1OTBEXHVGRjFBXHU2REZCXHU1MkEwIC9pIFx1NjgwN1x1NUZEN1x1RkYwQ1x1NEY3Rlx1NTE3Nlx1NEUwRFx1NTMzQVx1NTIwNlx1NTkyN1x1NUMwRlx1NTE5OSBcdTMwMTFcdTMwMTFcdTMwMTFcbiAgICAgICAgICAgIGNvbnN0IHJlYXNvbk1hdGNoID0gcmVzcG9uc2UubWF0Y2goL1xcW1JFQVNPTjpcXHMqKFteXFxdXSspXFxdL2kpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBpc0FwcHJvdmVkID0gZGVjaXNpb25NYXRjaCA/IGRlY2lzaW9uTWF0Y2hbMV0udG9VcHBlckNhc2UoKSA9PT0gJ0tFRVAnIDogZmFsc2U7XG4gICAgICAgICAgICBjb25zdCByZWFzb24gPSByZWFzb25NYXRjaCA/IHJlYXNvbk1hdGNoWzFdLnRyaW0oKSA6IChpc0FwcHJvdmVkID8gXCJBSSBcdTYyNzlcdTUxQzZcIiA6IFwiQUkgXHU2MkQyXHU3RUREXHVGRjBDXHU2NzJBXHU2M0QwXHU0RjlCXHU2NjBFXHU3ODZFXHU3NDA2XHU3NTMxXCIpO1xuXG4gICAgICAgICAgICByZXR1cm4geyBpc0FwcHJvdmVkLCByZWFzb24gfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBSSBDcml0aWMgY2FsbCBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7IGlzQXBwcm92ZWQ6IGZhbHNlLCByZWFzb246IGBBSSBcdTVCQTFcdTY4MzhcdTU2NjhcdThDMDNcdTc1MjhcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZX1gIH07XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLy8gcmV2aXNlci50c1xuXG5pbXBvcnQgS25vd2xlZGdlR3JhcGhQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIFJldmlzZXIge1xuICAgIHByaXZhdGUgcGx1Z2luOiBLbm93bGVkZ2VHcmFwaFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogS25vd2xlZGdlR3JhcGhQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVJldmlzaW9uUHJvbXB0KGlkZWE6IHN0cmluZywgb3JpZ2luYWxDb250ZW50OiBzdHJpbmcsIHJlamVjdGlvblJlYXNvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHByb21wdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByb21wdF9yZXZpc2VyO1xuICAgICAgICBwcm9tcHQgPSBwcm9tcHQucmVwbGFjZSgne2NvbmNlcHR9JywgaWRlYSk7XG4gICAgICAgIHByb21wdCA9IHByb21wdC5yZXBsYWNlKCd7b3JpZ2luYWxfY29udGVudH0nLCBvcmlnaW5hbENvbnRlbnQpO1xuICAgICAgICBwcm9tcHQgPSBwcm9tcHQucmVwbGFjZSgne3JlamVjdGlvbl9yZWFzb259JywgcmVqZWN0aW9uUmVhc29uKTtcbiAgICAgICAgcmV0dXJuIHByb21wdDtcbiAgICB9XG59XG4iLCAiLy8gdXRpbHMudHMgKFx1NTM5Rlx1NTlDQlx1N0EzM1x1NUI5QVx1NzI0OClcblxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRmlsZW5hbWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTYyRUNcdTUzRjdcdTUzQ0FcdTUxNzZcdTUxODVcdTVCQjlcbiAgICBsZXQgY2xlYW5OYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMqXFwoLipcXCkvZywgJycpLnRyaW0oKTtcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTY1ODdcdTRFRjZcdTdDRkJcdTdFREZcdTRFMERcdTUxNDFcdThCQjhcdTc2ODRcdTVCNTdcdTdCMjZcbiAgICBjbGVhbk5hbWUgPSBjbGVhbk5hbWUucmVwbGFjZSgvW1xcXFwvKj86XCI8PnxdL2csIFwiXCIpO1xuICAgIC8vIFx1OTY1MFx1NTIzNlx1OTU3Rlx1NUVBNlxuICAgIHJldHVybiBjbGVhbk5hbWUuc2xpY2UoMCwgMTAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3ROZXdJZGVhcyhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IGNvbnRlbnQubWF0Y2goL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS9nKTtcbiAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvLyBcdTRFQ0UgW1tMaW5rfEFsaWFzXV0gXHU2MjE2IFtbTGlua11dIFx1NEUyRFx1NjNEMFx1NTNENiBcIkxpbmtcIlxuICAgIGNvbnN0IGlkZWFzID0gbWF0Y2hlcy5tYXAobWF0Y2ggPT4ge1xuICAgICAgICByZXR1cm4gbWF0Y2guc2xpY2UoMiwgLTIpLnNwbGl0KCd8JylbMF0udHJpbSgpO1xuICAgIH0pO1xuICAgIHJldHVybiBbLi4ubmV3IFNldChpZGVhcyldOyAvLyBcdThGRDRcdTU2REVcdTUzQkJcdTkxQ0RcdTU0MEVcdTc2ODRcdTdFRDNcdTY3OUNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuTWFya2Rvd25PdXRwdXQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB0cmltbWVkID0gY29udGVudC50cmltKCk7XG4gICAgaWYgKHRyaW1tZWQuc3RhcnRzV2l0aChcImBgYG1hcmtkb3duXCIpICYmIHRyaW1tZWQuZW5kc1dpdGgoXCJgYGBcIikpIHtcbiAgICAgICAgbGV0IGNsZWFuZWQgPSB0cmltbWVkLnN1YnN0cmluZyhcImBgYG1hcmtkb3duXCIubGVuZ3RoLCB0cmltbWVkLmxlbmd0aCAtIFwiYGBgXCIubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIGNsZWFuZWQudHJpbSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJpbW1lZDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQSxJQUFBQSxtQkFBdUI7OztBQ0F2QixJQUFBQyxtQkFBdUQ7OztBQ0F2RCxzQkFBb0M7QUFJN0IsSUFBTSx1QkFBTixjQUFtQyxzQkFBTTtBQUFBLEVBc0I1QyxZQUFZLEtBQVUsUUFBOEI7QUFDaEQsVUFBTSxHQUFHO0FBbkJiO0FBQUEsU0FBUSxjQUF5QztBQUFBLE1BQzdDLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFBQSxJQUNUO0FBR0E7QUFBQSxTQUFRLGlCQUE2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LGdDQUFnQztBQUFBLEVBQ2xEO0FBQUEsRUFFQSxXQUFXO0FBQ1AsWUFBUSxNQUFNLGtDQUFrQztBQUFBLEVBQ3BEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDakIsVUFBTSxpQkFBaUIsa0JBQWtCO0FBQ3pDLFVBQU0sWUFBWSxNQUFNLEtBQUssU0FBUztBQUN0QyxVQUFNLGdCQUFnQixhQUFhLENBQUM7QUFFcEMsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLGdCQUFnQixhQUFhO0FBQUEsRUFDckY7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixVQUFNLGFBQWEsRUFBRSxHQUFHLEtBQUssVUFBVSxhQUFhLEtBQUssS0FBSztBQUM5RCxVQUFNLEtBQUssU0FBUyxVQUFVO0FBQUEsRUFDbEM7QUFBQSxFQUVBLE1BQU0saUJBQWlCO0FBQ25CLFVBQU0sWUFBWSxNQUFNLEtBQUssU0FBUztBQUN0QyxVQUFNLGNBQWEsdUNBQVcsZ0JBQWUsQ0FBQztBQUU5QyxTQUFLLE9BQU8sT0FBTyxPQUFPLENBQUMsR0FBRyxxQkFBcUIsVUFBVTtBQUFBLEVBQ2pFO0FBQUEsRUFFQSxNQUFNLGlCQUFpQjtBQUNuQixVQUFNLEtBQUssYUFBYTtBQUFBLEVBQzVCO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
