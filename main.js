/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => KnowledgeGraphPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// settings.ts
var import_obsidian2 = require("obsidian");
var import_obsidian = require("obsidian");
var QueueManagementModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.searchTerms = {
      gen: "",
      rev: "",
      rep: "",
      dis: ""
    };
    this.collapseStates = {
      gen: false,
      // 默认折叠
      rev: false,
      // 默认折叠
      rep: false,
      // 默认折叠
      dis: false
      // 默认折叠
    };
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("kg-modal");
    contentEl.createEl("h2", { text: "\u961F\u5217\u7BA1\u7406\u4EEA\u8868\u76D8" });
    const status = this.plugin.data.status;
    const statusText = `\u72B6\u6001: ${status.toUpperCase()} | ${this.plugin.statusBarEl.getText()}`;
    new import_obsidian.Setting(contentEl).setName(status === "running" ? "\u5F15\u64CE\u8FD0\u884C\u4E2D" : "\u5F15\u64CE\u5DF2\u6682\u505C").setDesc(statusText).addButton(
      (button) => button.setButtonText(status === "running" ? "\u6682\u505C\u5F15\u64CE" : "\u542F\u52A8\u5F15\u64CE").setCta(status !== "running").onClick(() => {
        this.plugin.engine.toggleEngineState();
        this.onOpen();
      })
    );
    this.renderQueueSection(
      contentEl,
      "gen",
      "\u5F85\u751F\u6210 (Generation)",
      this.plugin.data.generationQueue,
      this.renderGenerationItem.bind(this)
    );
    this.renderQueueSection(
      contentEl,
      "rev",
      "\u5F85\u5BA1\u6838 (Review)",
      this.plugin.data.reviewQueue,
      this.renderReviewItem.bind(this)
    );
    this.renderQueueSection(
      contentEl,
      "rep",
      "\u5F85\u4FEE\u6B63 (Revision)",
      this.plugin.data.revisionQueue,
      this.renderRevisionItem.bind(this)
    );
    this.renderQueueSection(
      contentEl,
      "dis",
      "\u5DF2\u4E22\u5F03 (Discarded)",
      this.plugin.data.discardedPile,
      this.renderDiscardedItem.bind(this)
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  /**
   * 渲染一个队列区域 (带搜索和展开/折叠)
   */
  renderQueueSection(containerEl, key, title, data, renderFn) {
    const displayLimit = 100;
    const filter = this.searchTerms[key];
    const filteredData = data.filter((item) => {
      if (!filter)
        return true;
      const needle = filter.toLowerCase();
      if (typeof item === "string") {
        return item.toLowerCase().includes(needle);
      }
      return item.idea.toLowerCase().includes(needle);
    });
    const total = data.length;
    const filteredTotal = filteredData.length;
    const titleText = `${title} (${filteredTotal}${total !== filteredTotal ? " / " + total : ""} \u9879)`;
    const details = containerEl.createEl("details");
    details.open = this.collapseStates[key];
    const summary = details.createEl("summary", { text: titleText });
    summary.style.fontWeight = "bold";
    summary.style.fontSize = "var(--font-ui-large)";
    summary.style.cursor = "pointer";
    summary.style.padding = "5px 0";
    details.addEventListener("toggle", () => {
      this.collapseStates[key] = details.open;
    });
    new import_obsidian.Setting(details).setDesc(`\u641C\u7D22 ${title}...`).addText((text) => {
      text.setPlaceholder("\u8F93\u5165\u5173\u952E\u8BCD...").setValue(this.searchTerms[key]).onChange((value) => {
        this.searchTerms[key] = value;
        this.onOpen();
      });
    });
    const truncatedData = filteredData.slice(0, displayLimit);
    if (truncatedData.length === 0) {
      const desc = details.createEl("p", { text: "\u6B64\u961F\u5217\u4E3A\u7A7A\uFF0C\u6216\u672A\u627E\u5230\u5339\u914D\u9879\u3002", cls: "setting-item-description" });
      desc.style.paddingLeft = "10px";
      return;
    }
    const listContainer = details.createDiv("kg-list-container");
    listContainer.style.maxHeight = "200px";
    listContainer.style.overflowY = "auto";
    listContainer.style.border = "1px solid var(--background-modifier-border)";
    listContainer.style.padding = "5px";
    listContainer.style.marginLeft = "10px";
    truncatedData.forEach((item, index) => {
      renderFn(listContainer, item, index);
    });
    if (filteredData.length > displayLimit) {
      const truncatedInfo = details.createEl("p", {
        text: `... \u4EC5\u663E\u793A\u524D ${displayLimit} \u9879 (\u5171 ${filteredData.length} \u9879)\uFF0C\u8BF7\u4F7F\u7528\u641C\u7D22\u67E5\u627E\u66F4\u591A\u3002`,
        cls: "setting-item-description"
      });
      truncatedInfo.style.paddingLeft = "10px";
    }
  }
  // --- 单项渲染函数 (保持不变) ---
  renderGenerationItem(container, item) {
    new import_obsidian.Setting(container).setName(item).addButton(
      (btn) => btn.setIcon("trash").setTooltip("\u5220\u9664\u6B64\u6982\u5FF5").onClick(async () => {
        const queue = this.plugin.data.generationQueue;
        const index = queue.indexOf(item);
        if (index > -1) {
          queue.splice(index, 1);
          await this.plugin.savePluginData();
          this.plugin.engine.updateStatusBar();
          this.onOpen();
        }
      })
    );
  }
  renderReviewItem(container, item) {
    const task = item;
    new import_obsidian.Setting(container).setName(`[\u5BA1\u6838] ${task.idea}`).addButton(
      (btn) => btn.setIcon("trash").setTooltip("\u4E22\u5F03\u6B64\u4EFB\u52A1").onClick(async () => {
        this.plugin.data.reviewQueue.splice(this.plugin.data.reviewQueue.indexOf(task), 1);
        this.plugin.data.discardedPile.push(task);
        await this.plugin.savePluginData();
        this.plugin.engine.updateStatusBar();
        this.onOpen();
      })
    );
  }
  renderRevisionItem(container, item) {
    const task = item;
    new import_obsidian.Setting(container).setName(`[\u4FEE\u6B63] ${task.idea}`).setDesc(`\u539F\u56E0: ${task.reason || "\u672A\u77E5"}`).addButton(
      (btn) => btn.setIcon("trash").setTooltip("\u4E22\u5F03\u6B64\u4EFB\u52A1").onClick(async () => {
        this.plugin.data.revisionQueue.splice(this.plugin.data.revisionQueue.indexOf(task), 1);
        this.plugin.data.discardedPile.push(task);
        await this.plugin.savePluginData();
        this.plugin.engine.updateStatusBar();
        this.onOpen();
      })
    );
  }
  renderDiscardedItem(container, item) {
    const task = item;
    new import_obsidian.Setting(container).setName(`[\u5DF2\u4E22\u5F03] ${task.idea}`).setDesc(`\u6700\u540E\u539F\u56E0: ${task.reason || "\u672A\u77E5"}`).addButton(
      (btn) => btn.setIcon("refresh-cw").setTooltip("\u91CD\u65B0\u6392\u961F (\u653E\u56DE\u751F\u6210\u961F\u5217)").onClick(async () => {
        this.plugin.data.discardedPile.splice(this.plugin.data.discardedPile.indexOf(task), 1);
        this.plugin.engine.addConceptsToQueue([task.idea]);
        this.onOpen();
      })
    );
  }
};
var PROMPT_GENERATOR_DEFAULT = `# Role: \u77E5\u8BC6\u7CFB\u7EDF\u6784\u5EFA\u4E13\u5BB6...`;
var PROMPT_CRITIC_DEFAULT = `# Role: \u77E5\u8BC6\u56FE\u8C31\u8D28\u91CF\u5BA1\u6838\u5458...`;
var PROMPT_REVISER_DEFAULT = `# \u89D2\u8272: \u8D44\u6DF1\u77E5\u8BC6\u7F16\u8F91\u4E0E\u5185\u5BB9\u4F18\u5316\u4E13\u5BB6...`;
var DEFAULT_SETTINGS = {
  // API
  openai_api_keys: "",
  openai_base_url: "https://api.openai.com/v1",
  openai_model: "gpt-4-turbo-preview",
  openai_backup_model: "",
  // 【 新增：OpenAI 备用模型 】
  google_api_keys: "",
  google_model: "gemini-1.5-pro-latest",
  google_backup_model: "",
  // 【 新增：Google 备用模型 】
  failover_cooldown_seconds: 300,
  // 参数
  generation_temperature: 0.7,
  generation_max_tokens: 4096,
  // 路径
  output_dir: "KnowledgeGraphNotes",
  // 系统
  max_workers: 2,
  generation_batch_size: 5,
  request_delay: 5,
  // Critic
  critic_mode: "heuristic",
  critic_required_headers: "# \u{1F9E0}\n> \n## \u{1F4DD} \u6838\u5FC3\u601D\u60F3\n## \u{1F3AF} \u9002\u7528\u573A\u666F\n## \u{1F6E0}\uFE0F \u4F7F\u7528\u6B65\u9AA4/\u6784\u6210\u8981\u7D20\n## \u{1F680} \u6848\u4F8B\u5206\u6790\n## \u{1F44D} \u4F18\u70B9 & \u{1F44E} \u7F3A\u70B9\n## \u{1F517} \u5173\u8054\u6A21\u578B",
  critic_min_content_length: 400,
  // Reviser
  max_revision_retries: 2,
  // Prompts
  prompt_generator: PROMPT_GENERATOR_DEFAULT,
  prompt_critic: PROMPT_CRITIC_DEFAULT,
  prompt_reviser: PROMPT_REVISER_DEFAULT,
  // 播种箱
  seedConcepts: "",
  // 【【【 新增配置项 】】】
  // 默认关闭新概念提取
  extract_new_concepts: false
};
async function getDefaultPrompts() {
  return {
    prompt_generator: PROMPT_GENERATOR_DEFAULT,
    prompt_critic: PROMPT_CRITIC_DEFAULT,
    prompt_reviser: PROMPT_REVISER_DEFAULT
  };
}
var KGsSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "\u77E5\u8BC6\u56FE\u8C31\u751F\u6210\u5668 - \u8BBE\u7F6E" });
    new import_obsidian2.Setting(containerEl).setName("\u5F15\u64CE\u4EEA\u8868\u76D8").setDesc("\u7BA1\u7406\u5F85\u751F\u6210\u3001\u5F85\u5BA1\u6838\u548C\u5DF2\u4E22\u5F03\u7684\u4EFB\u52A1\u3002").addButton(
      (button) => button.setButtonText("\u6253\u5F00\u961F\u5217\u7BA1\u7406\u5668").setCta().onClick(() => {
        new QueueManagementModal(this.app, this.plugin).open();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("API \u8BBE\u7F6E").setHeading();
    containerEl.createEl("h3", { text: "OpenAI" });
    new import_obsidian2.Setting(containerEl).setName("OpenAI API Keys").setDesc("\u6BCF\u884C\u4E00\u4E2A Key\u3002\u63D2\u4EF6\u5C06\u81EA\u52A8\u8F6E\u6362\u548C\u51B7\u5374\u4F7F\u7528\u3002").addTextArea((text) => text.setPlaceholder("sk-...").setValue(this.plugin.settings.openai_api_keys).onChange(async (value) => {
      this.plugin.settings.openai_api_keys = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("OpenAI Base URL").setDesc("\u5982\u679C\u4F60\u4F7F\u7528\u7B2C\u4E09\u65B9\u4EE3\u7406\uFF0C\u8BF7\u5728\u6B64\u5904\u586B\u5165\u4EE3\u7406\u5730\u5740\u3002").addText((text) => text.setPlaceholder("https://api.openai.com/v1").setValue(this.plugin.settings.openai_base_url).onChange(async (value) => {
      this.plugin.settings.openai_base_url = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("OpenAI Model (\u4E3B\u6A21\u578B)").setDesc("\u8F93\u5165\u4F60\u60F3\u4F7F\u7528\u7684 OpenAI \u4E3B\u8981\u6A21\u578B\u540D\u79F0\u3002").addText((text) => text.setPlaceholder("gpt-4-turbo-preview").setValue(this.plugin.settings.openai_model).onChange(async (value) => {
      this.plugin.settings.openai_model = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("OpenAI \u5907\u7528\u6A21\u578B (Backup Model)").setDesc("(\u53EF\u9009) \u5F53\u4E3B\u6A21\u578B\u989D\u5EA6\u8017\u5C3D\u6216\u5931\u8D25\u65F6\uFF0C\u5C06\u81EA\u52A8\u5C1D\u8BD5\u6B64\u5907\u7528\u6A21\u578B\u3002").addText((text) => text.setPlaceholder("gpt-3.5-turbo").setValue(this.plugin.settings.openai_backup_model).onChange(async (value) => {
      this.plugin.settings.openai_backup_model = value.trim();
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Google Gemini" });
    new import_obsidian2.Setting(containerEl).setName("Google Gemini API Keys").setDesc("\u6BCF\u884C\u4E00\u4E2A Key\u3002").addTextArea((text) => text.setPlaceholder("AIzaSy...").setValue(this.plugin.settings.google_api_keys).onChange(async (value) => {
      this.plugin.settings.google_api_keys = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Google Gemini Model (\u4E3B\u6A21\u578B)").setDesc("\u8F93\u5165\u4F60\u60F3\u4F7F\u7528\u7684 Google \u4E3B\u8981\u6A21\u578B\u540D\u79F0\u3002").addText((text) => text.setPlaceholder("gemini-1.5-pro-latest").setValue(this.plugin.settings.google_model).onChange(async (value) => {
      this.plugin.settings.google_model = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Google Gemini \u5907\u7528\u6A21\u578B (Backup Model)").setDesc("(\u53EF\u9009) \u5F53\u4E3B\u6A21\u578B\u989D\u5EA6\u8017\u5C3D\u6216\u5931\u8D25\u65F6\uFF0C\u5C06\u81EA\u52A8\u5C1D\u8BD5\u6B64\u5907\u7528\u6A21\u578B\u3002").addText((text) => text.setPlaceholder("gemini-1.0-pro").setValue(this.plugin.settings.google_backup_model).onChange(async (value) => {
      this.plugin.settings.google_backup_model = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("Key \u51B7\u5374\u65F6\u95F4 (\u79D2)").setDesc("API Key \u5931\u8D25\u540E\uFF0C\u9700\u8981\u7B49\u5F85\u591A\u5C11\u79D2\u624D\u80FD\u518D\u6B21\u4F7F\u7528\u3002").addText((text) => text.setValue(String(this.plugin.settings.failover_cooldown_seconds)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num >= 0) {
        this.plugin.settings.failover_cooldown_seconds = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("LLM \u53C2\u6570\u8BBE\u7F6E").setHeading();
    new import_obsidian2.Setting(containerEl).setName("\u751F\u6210\u6E29\u5EA6 (Temperature)").setDesc("\u63A7\u5236\u751F\u6210\u5185\u5BB9\u7684\u968F\u673A\u6027\u3002\u8F83\u4F4E\u7684\u503C\uFF08\u5982 0.2\uFF09\u66F4\u5177\u786E\u5B9A\u6027\uFF0C\u8F83\u9AD8\u7684\u503C\uFF08\u5982 0.8\uFF09\u66F4\u5177\u521B\u9020\u6027\u3002").addText((text) => text.setValue(String(this.plugin.settings.generation_temperature)).onChange(async (value) => {
      const num = parseFloat(value);
      if (!isNaN(num) && num >= 0 && num <= 2) {
        this.plugin.settings.generation_temperature = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6700\u5927 Token \u6570 (Max Tokens)").setDesc("API \u4E00\u6B21\u8C03\u7528\u5141\u8BB8\u751F\u6210\u7684\u6700\u5927 Token \u6570\u91CF\u3002").addText((text) => text.setValue(String(this.plugin.settings.generation_max_tokens)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num > 0) {
        this.plugin.settings.generation_max_tokens = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u5F15\u64CE\u8BBE\u7F6E").setHeading();
    new import_obsidian2.Setting(containerEl).setName("\u8F93\u51FA\u6587\u4EF6\u5939").setDesc("\u6240\u6709\u751F\u6210\u7684\u7B14\u8BB0\u5C06\u4FDD\u5B58\u5230\u6B64\u6587\u4EF6\u5939\u3002").addText((text) => text.setPlaceholder("KnowledgeGraphNotes").setValue(this.plugin.settings.output_dir).onChange(async (value) => {
      this.plugin.settings.output_dir = value.trim().replace(/\/$/, "");
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6700\u5927\u5E76\u53D1\u6570 (Max Workers)").setDesc("\uFF08\u6CE8\u610F\uFF1A\u5F53\u524D V2.2 \u5F15\u64CE\u4E3A\u5355\u7EBF\u7A0B\u6D41\u6C34\u7EBF\uFF0C\u6B64\u8BBE\u7F6E\u6682\u672A\u751F\u6548\uFF09").addText((text) => text.setValue(String(this.plugin.settings.max_workers)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num > 0) {
        this.plugin.settings.max_workers = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u751F\u6210\u6279\u5904\u7406\u5927\u5C0F").setDesc("\u5F15\u64CE\u6BCF\u4E00\u8F6E\u4ECE\u201C\u5F85\u751F\u6210\u961F\u5217\u201D\u4E2D\u53D6\u51FA\u7684\u4EFB\u52A1\u6570\u91CF\u3002").addText((text) => text.setValue(String(this.plugin.settings.generation_batch_size)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num > 0) {
        this.plugin.settings.generation_batch_size = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6BCF\u8F6E\u8BF7\u6C42\u5EF6\u8FDF (\u79D2)").setDesc("\u5F15\u64CE\u5728\u5904\u7406\u5B8C\u4E00\u4E2A\u6279\u6B21\u540E\uFF0C\u7B49\u5F85\u591A\u5C11\u79D2\u518D\u5F00\u59CB\u4E0B\u4E00\u4E2A\u6279\u6B21\u3002").addText((text) => text.setValue(String(this.plugin.settings.request_delay)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num >= 0) {
        this.plugin.settings.request_delay = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u6700\u5927\u4FEE\u6B63\u6B21\u6570").setDesc("\u4E00\u7BC7\u7B14\u8BB0\u5728\u88AB\u653E\u5F03\uFF08\u79FB\u5165 Discarded Pile\uFF09\u524D\uFF0C\u6700\u591A\u5141\u8BB8\u88AB\u4FEE\u6B63\u7684\u6B21\u6570\u3002").addText((text) => text.setValue(String(this.plugin.settings.max_revision_retries)).onChange(async (value) => {
      const num = parseInt(value, 10);
      if (!isNaN(num) && num >= 0) {
        this.plugin.settings.max_revision_retries = num;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(containerEl).setName("\u81EA\u52A8\u63D0\u53D6\u65B0\u6982\u5FF5 (Extract New Concepts)").setDesc("\u5F00\u542F\u540E\uFF0C\u5C06\u81EA\u52A8\u4ECE\u5DF2\u6279\u51C6\u7B14\u8BB0\u7684\u5185\u5BB9\u4E2D\u63D0\u53D6 [[Wikilinks]] \u4F5C\u4E3A\u65B0\u6982\u5FF5\u52A0\u5165\u201C\u5F85\u751F\u6210\u961F\u5217\u201D\u3002(\u9ED8\u8BA4\u5173\u95ED)").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.extract_new_concepts).onChange(async (value) => {
        this.plugin.settings.extract_new_concepts = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("\u5BA1\u6838\u6A21\u5F0F (Critic Mode)").setDesc("\u9009\u62E9\u5185\u5BB9\u5BA1\u6838\u7684\u65B9\u5F0F\u3002\u542F\u53D1\u5F0F\u6A21\u5F0F\u901F\u5EA6\u5FEB\u4E14\u514D\u8D39\uFF0C\u4F46\u53EA\u68C0\u67E5\u683C\u5F0F\uFF1BAI\u6A21\u5F0F\u66F4\u667A\u80FD\uFF0C\u4F46\u4F1A\u6D88\u8017API\u989D\u5EA6\u3002").addDropdown((dropdown) => dropdown.addOption("heuristic", "\u542F\u53D1\u5F0F (Heuristic)").addOption("ai", "\u4EBA\u5DE5\u667A\u80FD (AI)").setValue(this.plugin.settings.critic_mode).onChange(async (value) => {
      this.plugin.settings.critic_mode = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.critic_mode === "heuristic") {
      new import_obsidian2.Setting(containerEl).setName("\u542F\u53D1\u5F0F\u5BA1\u6838\uFF1A\u5FC5\u987B\u7684\u6807\u9898").setDesc("\u5728\u542F\u53D1\u5F0F\u6A21\u5F0F\u4E0B\uFF0C\u68C0\u67E5\u7B14\u8BB0\u662F\u5426\u5305\u542B\u6240\u6709\u8FD9\u4E9B\u6807\u9898\uFF08\u6BCF\u884C\u4E00\u4E2A\uFF09\u3002").addTextArea((text) => text.setValue(this.plugin.settings.critic_required_headers).onChange(async (value) => {
        this.plugin.settings.critic_required_headers = value;
        await this.plugin.saveSettings();
      }).inputEl.style.height = "150px");
      new import_obsidian2.Setting(containerEl).setName("\u542F\u53D1\u5F0F\u5BA1\u6838\uFF1A\u6700\u5C0F\u5185\u5BB9\u957F\u5EA6").setDesc("\u5728\u542F\u53D1\u5F0F\u6A21\u5F0F\u4E0B\uFF0C\u7B14\u8BB0\u5185\u5BB9\u5FC5\u987B\u8FBE\u5230\u7684\u6700\u5C0F\u5B57\u7B26\u6570\u3002").addText((text) => text.setValue(String(this.plugin.settings.critic_min_content_length)).onChange(async (value) => {
        const num = parseInt(value, 10);
        if (!isNaN(num) && num >= 0) {
          this.plugin.settings.critic_min_content_length = num;
          await this.plugin.saveSettings();
        }
      }));
    }
    new import_obsidian2.Setting(containerEl).setName("\u6982\u5FF5\u64AD\u79CD (Concept Seeding)").setHeading();
    new import_obsidian2.Setting(containerEl).setName("\u6982\u5FF5\u64AD\u79CD\u7BB1").setDesc("\u5728\u6B64\u5904\u7C98\u8D34\u6216\u8F93\u5165\u60A8\u60F3\u8981\u751F\u6210\u521D\u59CB\u7B14\u8BB0\u7684\u6982\u5FF5\u5217\u8868\uFF0C\u6BCF\u884C\u4E00\u4E2A\u6982\u5FF5\u3002").addTextArea(
      (text) => text.setPlaceholder("\u4F8B\u5982\uFF1A\n\u7B2C\u4E00\u6027\u539F\u7406\n\u5965\u5361\u59C6\u5243\u5200\n\u523B\u610F\u7EC3\u4E60\n...").setValue(this.plugin.settings.seedConcepts).onChange(async (value) => {
        this.plugin.settings.seedConcepts = value;
        await this.plugin.saveSettings();
      }).inputEl.style.height = "200px"
    );
    new import_obsidian2.Setting(containerEl).addButton(
      (button) => button.setButtonText("\u64AD\u79CD\u5230\u5F85\u751F\u6210\u961F\u5217").setCta().onClick(async () => {
        const rawText = this.plugin.settings.seedConcepts;
        if (!rawText.trim()) {
          new import_obsidian2.Notice("\u64AD\u79CD\u7BB1\u4E3A\u7A7A\uFF0C\u65E0\u9700\u64CD\u4F5C\u3002");
          return;
        }
        const conceptsToSeed = [...new Set(rawText.split("\n").map((line) => line.trim()).filter(Boolean))];
        const addedCount = this.plugin.engine.addConceptsToQueue(conceptsToSeed);
        const ignoredCount = conceptsToSeed.length - addedCount;
        let noticeMessage = `\u6210\u529F\u6DFB\u52A0 ${addedCount} \u4E2A\u65B0\u6982\u5FF5\u5230\u961F\u5217\u3002`;
        if (ignoredCount > 0) {
          noticeMessage += `
${ignoredCount} \u4E2A\u6982\u5FF5\u56E0\u5DF2\u5B58\u5728\u6216\u91CD\u590D\u800C\u88AB\u5FFD\u7565\u3002`;
        }
        new import_obsidian2.Notice(noticeMessage, 5e3);
        this.plugin.settings.seedConcepts = "";
        await this.plugin.saveSettings();
        this.display();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Prompts \u8BBE\u7F6E").setHeading();
    new import_obsidian2.Setting(containerEl).setName("\u751F\u6210 Prompt").setDesc("\u7528\u4E8E\u751F\u6210\u65B0\u6982\u5FF5\u5185\u5BB9\u7684 Prompt\u3002").addTextArea((text) => text.setValue(this.plugin.settings.prompt_generator).onChange(async (value) => {
      this.plugin.settings.prompt_generator = value;
      await this.plugin.saveSettings();
    }).inputEl.style.height = "300px");
    if (this.plugin.settings.critic_mode === "ai") {
      new import_obsidian2.Setting(containerEl).setName("\u5BA1\u6838 Prompt (Critic)").setDesc("\u7528\u4E8E AI \u6A21\u5F0F\u4E0B\u5BA1\u6838\u751F\u6210\u5185\u5BB9\u7684 Prompt\u3002").addTextArea((text) => text.setValue(this.plugin.settings.prompt_critic).onChange(async (value) => {
        this.plugin.settings.prompt_critic = value;
        await this.plugin.saveSettings();
      }).inputEl.style.height = "300px");
    }
    new import_obsidian2.Setting(containerEl).setName("\u4FEE\u6B63 Prompt (Reviser)").setDesc("\u7528\u4E8E\u4FEE\u6B63\u88AB\u5BA1\u6838\u5458\u62D2\u7EDD\u5185\u5BB9\u7684 Prompt\u3002").addTextArea((text) => text.setValue(this.plugin.settings.prompt_reviser).onChange(async (value) => {
      this.plugin.settings.prompt_reviser = value;
      await this.plugin.saveSettings();
    }).inputEl.style.height = "300px");
  }
};

// engine.ts
var import_obsidian4 = require("obsidian");

// apiHandler.ts
var import_obsidian3 = require("obsidian");
var ApiKeyExhaustedError = class extends Error {
  constructor(message) {
    super(message);
    this.name = "ApiKeyExhaustedError";
  }
};
var AllModelsFailedError = class extends Error {
  constructor(message) {
    super(message);
    this.name = "AllModelsFailedError";
  }
};
var APIHandler = class {
  constructor(plugin) {
    this.keyUsageOpenAI = /* @__PURE__ */ new Map();
    this.keyUsageGoogle = /* @__PURE__ */ new Map();
    this.hasNotifiedFailover = false;
    this.plugin = plugin;
    this.settings = plugin.settings;
    this.updateKeys();
  }
  updateKeys() {
    this.openai_keys = this.settings.openai_api_keys.split("\n").map((k) => k.trim()).filter(Boolean);
    this.google_keys = this.settings.google_api_keys.split("\n").map((k) => k.trim()).filter(Boolean);
    this.openai_keys.forEach((key) => {
      if (!this.keyUsageOpenAI.has(key)) {
        this.keyUsageOpenAI.set(key, { fails: 0, cooldown_until: 0 });
      }
    });
    this.google_keys.forEach((key) => {
      if (!this.keyUsageGoogle.has(key)) {
        this.keyUsageGoogle.set(key, { fails: 0, cooldown_until: 0 });
      }
    });
  }
  _selectKey(keys, provider) {
    const keyUsageMap = provider === "openai" ? this.keyUsageOpenAI : this.keyUsageGoogle;
    const currentTime = Date.now() / 1e3;
    for (const key of keys) {
      const usage = keyUsageMap.get(key);
      if (usage && currentTime >= usage.cooldown_until) {
        return key;
      }
    }
    return null;
  }
  // --- 【【【 新增：辅助函数 (API 请求) 】】】 ---
  /**
   * 实际执行 OpenAI API 请求
   */
  async _makeOpenAIRequest(key, prompt, modelName) {
    const response = await (0, import_obsidian3.requestUrl)({
      url: `${this.settings.openai_base_url}/chat/completions`,
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${key}`
      },
      body: JSON.stringify({
        model: modelName,
        // 使用传入的 modelName
        messages: [{ role: "user", content: prompt }],
        temperature: this.settings.generation_temperature,
        max_tokens: this.settings.generation_max_tokens
      })
    });
    return response.json.choices[0].message.content.trim();
  }
  /**
   * 实际执行 Google Gemini API 请求
   */
  async _makeGoogleAPIRequest(key, prompt, modelName) {
    const url = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${key}`;
    const response = await (0, import_obsidian3.requestUrl)({
      url,
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        contents: [{ parts: [{ text: prompt }] }],
        generationConfig: {
          temperature: this.settings.generation_temperature,
          maxOutputTokens: this.settings.generation_max_tokens
        }
      })
    });
    const data = response.json;
    if (!data.candidates || data.candidates.length === 0) {
      throw new Error("API response is missing candidates. Full response: " + JSON.stringify(data));
    }
    return data.candidates[0].content.parts[0].text.trim();
  }
  // --- 【【【 新增：辅助函数 (错误处理) 】】】 ---
  /**
   * 检查是否是额度/权限类错误
   */
  _isQuotaError(error) {
    var _a;
    const httpStatus = error.status;
    const errorMessage = ((_a = error.message) == null ? void 0 : _a.toLowerCase()) || "";
    if (httpStatus === 401 || httpStatus === 403 || httpStatus === 429) {
      return true;
    }
    if (errorMessage.includes("insufficient_quota") || errorMessage.includes("rate limit") || errorMessage.includes("quota") || errorMessage.includes("permission")) {
      return true;
    }
    return false;
  }
  /**
   * 冷却一个 Key
   */
  _cooldownKey(key, provider) {
    const keyUsageMap = provider === "openai" ? this.keyUsageOpenAI : this.keyUsageGoogle;
    const keyUsage = keyUsageMap.get(key);
    if (keyUsage) {
      console.warn(`Key ...${key.slice(-4)} (${provider}) failed due to quota/auth error. Applying cooldown.`);
      keyUsage.cooldown_until = Date.now() / 1e3 + this.settings.failover_cooldown_seconds;
    }
  }
  /**
   * 重置一个 Key 的冷却 (调用成功时)
   */
  _resetCooldown(key, provider) {
    const keyUsageMap = provider === "openai" ? this.keyUsageOpenAI : this.keyUsageGoogle;
    const keyUsage = keyUsageMap.get(key);
    if (keyUsage)
      keyUsage.cooldown_until = 0;
    this.hasNotifiedFailover = false;
  }
  // --- 【【【 已重构：_callOpenAI (包含备用逻辑) 】】】 ---
  async _callOpenAI(key, prompt) {
    const primaryModel = this.settings.openai_model;
    const backupModel = this.settings.openai_backup_model;
    try {
      const result = await this._makeOpenAIRequest(key, prompt, primaryModel);
      this._resetCooldown(key, "openai");
      return result;
    } catch (primaryError) {
      console.warn(`OpenAI primary model '${primaryModel}' failed for key ...${key.slice(-4)}:`, primaryError.message);
      if (this._isQuotaError(primaryError) && backupModel) {
        new import_obsidian3.Notice(`\u6A21\u578B ${primaryModel} \u5931\u8D25\uFF0C\u81EA\u52A8\u5C1D\u8BD5\u5907\u7528\u6A21\u578B ${backupModel}...`);
        try {
          const backupResult = await this._makeOpenAIRequest(key, prompt, backupModel);
          this._resetCooldown(key, "openai");
          return backupResult;
        } catch (backupError) {
          console.error(`OpenAI backup model '${backupModel}' also failed for key ...${key.slice(-4)}:`, backupError.message);
          if (this._isQuotaError(backupError)) {
            this._cooldownKey(key, "openai");
          }
          throw new ApiKeyExhaustedError(`OpenAI key failed (both primary and backup models).`);
        }
      }
      if (this._isQuotaError(primaryError)) {
        this._cooldownKey(key, "openai");
      }
      throw new ApiKeyExhaustedError(`OpenAI key failed: ${primaryError.message}`);
    }
  }
  // --- 【【【 已重构：_callGoogleAPI (包含备用逻辑) 】】】 ---
  async _callGoogleAPI(key, prompt) {
    const primaryModel = this.settings.google_model;
    const backupModel = this.settings.google_backup_model;
    try {
      const result = await this._makeGoogleAPIRequest(key, prompt, primaryModel);
      this._resetCooldown(key, "google");
      return result;
    } catch (primaryError) {
      console.warn(`Google primary model '${primaryModel}' failed for key ...${key.slice(-4)}:`, primaryError.message);
      if (this._isQuotaError(primaryError) && backupModel) {
        new import_obsidian3.Notice(`\u6A21\u578B ${primaryModel} \u5931\u8D25\uFF0C\u81EA\u52A8\u5C1D\u8BD5\u5907\u7528\u6A21\u578B ${backupModel}...`);
        try {
          const backupResult = await this._makeGoogleAPIRequest(key, prompt, backupModel);
          this._resetCooldown(key, "google");
          return backupResult;
        } catch (backupError) {
          console.error(`Google backup model '${backupModel}' also failed for key ...${key.slice(-4)}:`, backupError.message);
          if (this._isQuotaError(backupError)) {
            this._cooldownKey(key, "google");
          }
          throw new ApiKeyExhaustedError(`Google key failed (both primary and backup models).`);
        }
      }
      if (this._isQuotaError(primaryError)) {
        this._cooldownKey(key, "google");
      }
      throw new ApiKeyExhaustedError(`Google key failed: ${primaryError.message}`);
    }
  }
  // --- 【【【 call 方法保持不变 】】】 ---
  async call(prompt) {
    this.updateKeys();
    let lastError = null;
    let openAIKeysAttempted = false;
    if (this.openai_keys.length > 0) {
      openAIKeysAttempted = true;
      for (let i = 0; i < this.openai_keys.length; i++) {
        const key = this._selectKey(this.openai_keys, "openai");
        if (key) {
          try {
            console.log(`Trying OpenAI key ...${key.slice(-4)}`);
            return await this._callOpenAI(key, prompt);
          } catch (e) {
            lastError = e;
            new import_obsidian3.Notice(`OpenAI key ...${key.slice(-4)} failed. Trying next.`);
          }
        }
      }
    }
    if (this.google_keys.length > 0) {
      if (openAIKeysAttempted && !this.hasNotifiedFailover) {
        new import_obsidian3.Notice("All OpenAI keys failed or unavailable. Switching to Google Gemini...");
        this.hasNotifiedFailover = true;
      }
      for (let i = 0; i < this.google_keys.length; i++) {
        const key = this._selectKey(this.google_keys, "google");
        if (key) {
          try {
            console.log(`Trying Google Gemini key ...${key.slice(-4)}`);
            return await this._callGoogleAPI(key, prompt);
          } catch (e) {
            lastError = e;
            new import_obsidian3.Notice(`Google Gemini key ...${key.slice(-4)} failed. Trying next.`);
          }
        }
      }
    }
    throw new AllModelsFailedError(`All API providers failed. Last error: ${lastError == null ? void 0 : lastError.message}`);
  }
};

// critic.ts
var Critic = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.apiHandler = new APIHandler(plugin);
  }
  async judge(content) {
    if (this.plugin.settings.critic_mode === "ai") {
      return this._judgeByAI(content);
    }
    return this._judgeByHeuristic(content);
  }
  _judgeByHeuristic(content) {
    const reasons = [];
    const contentLower = content.toLowerCase();
    const requiredHeaders = this.plugin.settings.critic_required_headers.split("\n").map((h) => h.trim().toLowerCase()).filter(Boolean);
    const missingHeaders = requiredHeaders.filter((h) => !contentLower.includes(h));
    if (missingHeaders.length > 0) {
      reasons.push(`\u7F3A\u5C11\u5FC5\u9700\u7684\u6807\u9898: ${missingHeaders.join(", ")}`);
    }
    if (content.length < this.plugin.settings.critic_min_content_length) {
      reasons.push(`\u5185\u5BB9\u8FC7\u77ED (\u5F53\u524D: ${content.length}, \u8981\u6C42: ${this.plugin.settings.critic_min_content_length})`);
    }
    const refusalPatterns = ["\u4F5C\u4E3A\u4E00?\u4E2AAI", "\u4F5C\u4E3A\u8BED\u8A00\u6A21\u578B", "\u6211\u4E0D\u80FD", "\u6211\u65E0\u6CD5", "\u5F88\u62B1\u6B49"];
    for (const pattern of refusalPatterns) {
      if (new RegExp(pattern, "i").test(content)) {
        reasons.push(`\u5305\u542BAI\u62D2\u7EDD\u8BED (\u5339\u914D: '${pattern}')`);
        break;
      }
    }
    return {
      isApproved: reasons.length === 0,
      reason: reasons.length > 0 ? reasons.join("; ") : "\u901A\u8FC7\u6240\u6709\u542F\u53D1\u5F0F\u89C4\u5219\u68C0\u67E5\u3002"
    };
  }
  async _judgeByAI(content) {
    const prompt = this.plugin.settings.prompt_critic.replace("{content}", content);
    try {
      const response = await this.apiHandler.call(prompt);
      const decisionMatch = response.match(/DECISION:\s*(KEEP|DISCARD)/i);
      const reasonMatch = response.match(/\[REASON:\s*([^\]]+)\]/);
      const isApproved = decisionMatch ? decisionMatch[1].toUpperCase() === "KEEP" : false;
      const reason = reasonMatch ? reasonMatch[1].trim() : isApproved ? "AI \u6279\u51C6" : "AI \u62D2\u7EDD\uFF0C\u672A\u63D0\u4F9B\u660E\u786E\u7406\u7531";
      return { isApproved, reason };
    } catch (error) {
      console.error("AI Critic call failed:", error);
      return { isApproved: false, reason: `AI \u5BA1\u6838\u5668\u8C03\u7528\u5931\u8D25: ${error.message}` };
    }
  }
};

// reviser.ts
var Reviser = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  createRevisionPrompt(idea, originalContent, rejectionReason) {
    let prompt = this.plugin.settings.prompt_reviser;
    prompt = prompt.replace("{concept}", idea);
    prompt = prompt.replace("{original_content}", originalContent);
    prompt = prompt.replace("{rejection_reason}", rejectionReason);
    return prompt;
  }
};

// utils.ts
function sanitizeFilename(name) {
  let cleanName = name.replace(/\s*\(.*\)/g, "").trim();
  cleanName = cleanName.replace(/[\\/*?:"<>|]/g, "");
  return cleanName.slice(0, 100);
}
function extractNewIdeas(content) {
  const matches = content.match(/\[\[([^\]]+)\]\]/g);
  if (!matches) {
    return [];
  }
  const ideas = matches.map((match) => {
    return match.slice(2, -2).split("|")[0].trim();
  });
  return [...new Set(ideas)];
}
function cleanMarkdownOutput(content) {
  const trimmed = content.trim();
  if (trimmed.startsWith("```markdown") && trimmed.endsWith("```")) {
    let cleaned = trimmed.substring("```markdown".length, trimmed.length - "```".length);
    return cleaned.trim();
  }
  return trimmed;
}

// engine.ts
var Engine = class {
  constructor(plugin) {
    this.isRunning = false;
    this.timerId = null;
    this.plugin = plugin;
    this.app = plugin.app;
    this.apiHandler = new APIHandler(plugin);
    this.critic = new Critic(plugin);
    this.reviser = new Reviser(plugin);
  }
  // --- Public Controls ---
  /**
   * 切换引擎的运行/暂停状态
   */
  toggleEngineState() {
    if (this.isRunning) {
      this.stop();
    } else {
      this.start();
    }
  }
  /**
   * 添加单个概念到队列，并显示通知
   * @returns {boolean} 是否成功添加
   */
  addConceptToQueue(concept) {
    const added = this.addConceptsToQueue([concept]);
    if (added > 0) {
      new import_obsidian4.Notice(`'${concept}' \u5DF2\u6DFB\u52A0\u5230\u751F\u6210\u961F\u5217\u3002`);
      this.updateStatusBar();
      return true;
    }
    new import_obsidian4.Notice(`'${concept}' \u5DF2\u5B58\u5728\u4E8E\u961F\u5217\u6216\u4ED3\u5E93\u4E2D\uFF0C\u672A\u6DFB\u52A0\u3002`);
    return false;
  }
  /**
   * 添加多个概念到生成队列，会进行去重和检查文件是否存在
   * @param {string[]} concepts - 要添加的概念列表
   * @returns {number} 实际添加的新概念数量
   */
  addConceptsToQueue(concepts) {
    const currentQueue = new Set(this.plugin.data.generationQueue);
    const existingFiles = new Set(this.app.vault.getMarkdownFiles().map((f) => f.basename));
    let addedCount = 0;
    for (const concept of concepts) {
      const sanitized = sanitizeFilename(concept);
      if (!currentQueue.has(concept) && !existingFiles.has(sanitized)) {
        this.plugin.data.generationQueue.push(concept);
        currentQueue.add(concept);
        addedCount++;
      }
    }
    if (addedCount > 0) {
      this.plugin.savePluginData();
      this.updateStatusBar();
    }
    return addedCount;
  }
  // --- Core Loop ---
  /**
   * 启动引擎
   */
  async start() {
    if (this.isRunning)
      return;
    this.isRunning = true;
    this.plugin.data.status = "running";
    new import_obsidian4.Notice("\u77E5\u8BC6\u56FE\u8C31\u5F15\u64CE\u5DF2\u542F\u52A8\uFF01");
    this.updateStatusBar();
    this.tick();
  }
  /**
   * 停止引擎
   */
  stop() {
    if (!this.isRunning)
      return;
    this.isRunning = false;
    this.plugin.data.status = "paused";
    if (this.timerId) {
      clearTimeout(this.timerId);
      this.timerId = null;
    }
    new import_obsidian4.Notice("\u77E5\u8BC6\u56FE\u8C31\u5F15\u64CE\u5DF2\u6682\u505C\u3002");
    this.updateStatusBar();
    this.plugin.savePluginData();
  }
  /**
   * 安排下一个 tick
   */
  scheduleNextTick() {
    if (!this.isRunning)
      return;
    const delay = this.plugin.settings.request_delay * 1e3;
    this.timerId = setTimeout(() => this.tick(), delay);
  }
  /**
   * 引擎的核心“心跳”
   * 它会按优先级（修正 > 审核 > 生成）处理一个批次的任务
   */
  async tick() {
    if (!this.isRunning)
      return;
    try {
      let taskProcessed = false;
      if (this.plugin.data.revisionQueue.length > 0) {
        taskProcessed = await this.runRevisionPhase();
      } else if (this.plugin.data.reviewQueue.length > 0) {
        taskProcessed = await this.runCriticPhase();
      } else if (this.plugin.data.generationQueue.length > 0) {
        taskProcessed = await this.runGenerationPhase();
      }
      if (!taskProcessed && this.plugin.data.generationQueue.length === 0 && this.plugin.data.reviewQueue.length === 0 && this.plugin.data.revisionQueue.length === 0) {
        new import_obsidian4.Notice("\u{1F389} \u6240\u6709\u4EFB\u52A1\u5B8C\u6210\uFF01\u5F15\u64CE\u5DF2\u505C\u6B62\u3002");
        this.isRunning = false;
        this.plugin.data.status = "idle";
        this.updateStatusBar();
        await this.plugin.savePluginData();
        return;
      }
    } catch (error) {
      console.error("\u5F15\u64CE Tick \u53D1\u751F\u4E25\u91CD\u9519\u8BEF:", error);
      new import_obsidian4.Notice("\u5F15\u64CE\u9047\u5230\u9519\u8BEF\uFF0C\u5DF2\u6682\u505C\u3002\u8BF7\u68C0\u67E5\u63A7\u5236\u53F0\u3002");
      this.stop();
      return;
    }
    this.scheduleNextTick();
  }
  // --- Phases ---
  /**
   * 运行“生成”阶段
   * @returns {Promise<boolean>} 是否处理了任务
   */
  async runGenerationPhase() {
    const queue = this.plugin.data.generationQueue;
    if (queue.length === 0)
      return false;
    const batchSize = this.plugin.settings.generation_batch_size;
    const batch = queue.splice(0, Math.min(queue.length, batchSize));
    this.updateStatusBar();
    await this.plugin.savePluginData();
    const tasks = batch.map((idea) => this.generationTask(idea));
    await Promise.allSettled(tasks);
    await this.plugin.savePluginData();
    return true;
  }
  /**
   * 单个生成任务
   */
  async generationTask(idea) {
    const prompt = this.plugin.settings.prompt_generator.replace("{concept}", idea);
    try {
      const content = await this.apiHandler.call(prompt);
      const cleanedContent = cleanMarkdownOutput(content);
      this.plugin.data.reviewQueue.push({ idea, content: cleanedContent });
      console.log(`\u2705 [\u751F\u6210\u6210\u529F]: ${idea}`);
    } catch (e) {
      if (e instanceof AllModelsFailedError) {
        console.error(`\u274C [\u751F\u6210\u5931\u8D25]: ${idea} - ${e.message}`);
        this.plugin.data.generationQueue.unshift(idea);
      }
    }
  }
  /**
   * 运行“审核”阶段
   * @returns {Promise<boolean>} 是否处理了任务
   */
  async runCriticPhase() {
    const queue = this.plugin.data.reviewQueue;
    if (queue.length === 0)
      return false;
    const batchSize = this.plugin.settings.generation_batch_size;
    const tasksToReview = queue.splice(0, Math.min(queue.length, batchSize));
    this.updateStatusBar();
    await this.plugin.savePluginData();
    let newIdeasFound = /* @__PURE__ */ new Set();
    for (const task of tasksToReview) {
      const { isApproved, reason } = await this.critic.judge(task.content);
      if (isApproved) {
        await this.saveNote(task.idea, task.content);
        if (this.plugin.settings.extract_new_concepts) {
          const ideas = extractNewIdeas(task.content);
          ideas.forEach((idea) => newIdeasFound.add(idea));
        }
        console.log(`\u{1F44D} [\u5BA1\u6838\u901A\u8FC7]: ${task.idea}`);
      } else {
        task.reason = reason;
        task.retries = (task.retries || 0) + 1;
        this.plugin.data.revisionQueue.push(task);
        console.warn(`\u{1F44E} [\u5BA1\u6838\u62D2\u7EDD]: ${task.idea} - ${reason}`);
      }
    }
    if (newIdeasFound.size > 0) {
      this.addConceptsToQueue(Array.from(newIdeasFound));
    }
    await this.plugin.savePluginData();
    return true;
  }
  /**
   * 运行“修正”阶段
   * @returns {Promise<boolean>} 是否处理了任务
   */
  async runRevisionPhase() {
    const queue = this.plugin.data.revisionQueue;
    if (queue.length === 0)
      return false;
    const batchSize = this.plugin.settings.generation_batch_size;
    const tasksToRevise = queue.splice(0, Math.min(queue.length, batchSize));
    this.updateStatusBar();
    await this.plugin.savePluginData();
    for (const task of tasksToRevise) {
      if ((task.retries || 0) >= this.plugin.settings.max_revision_retries) {
        this.plugin.data.discardedPile.push(task);
        console.error(`\u{1F480} [\u653E\u5F03\u4FEE\u6B63]: ${task.idea} \u5DF2\u8FBE\u6700\u5927\u91CD\u8BD5\u6B21\u6570\u3002`);
        continue;
      }
      await this.revisionTask(task);
    }
    await this.plugin.savePluginData();
    return true;
  }
  /**
   * 单个修正任务
   */
  async revisionTask(task) {
    const prompt = this.reviser.createRevisionPrompt(task.idea, task.content, task.reason || "\u672A\u77E5\u539F\u56E0");
    try {
      const newContent = await this.apiHandler.call(prompt);
      const cleanedContent = cleanMarkdownOutput(newContent);
      const revisedTask = { ...task, content: cleanedContent };
      this.plugin.data.reviewQueue.push(revisedTask);
      console.log(`\u{1F504} [\u4FEE\u6B63\u5B8C\u6210]: ${task.idea}`);
    } catch (e) {
      console.error(`\u274C [\u4FEE\u6B63\u5931\u8D25]: ${task.idea} - ${e.message}`);
      this.plugin.data.revisionQueue.unshift(task);
    }
  }
  // --- File & UI ---
  /**
   * 保存笔记到文件系统
   */
  async saveNote(idea, content) {
    const filename = sanitizeFilename(idea);
    const folderPath = this.plugin.settings.output_dir;
    if (!(this.app.vault.getAbstractFileByPath(folderPath) instanceof import_obsidian4.TFolder)) {
      try {
        await this.app.vault.createFolder(folderPath);
      } catch (error) {
        console.error(`\u521B\u5EFA\u6587\u4EF6\u5939\u5931\u8D25: ${folderPath}`, error);
        new import_obsidian4.Notice(`\u65E0\u6CD5\u521B\u5EFA\u8F93\u51FA\u6587\u4EF6\u5939: ${folderPath}`);
        return;
      }
    }
    const filePath = (0, import_obsidian4.normalizePath)(`${folderPath}/${filename}.md`);
    const file = this.app.vault.getAbstractFileByPath(filePath);
    try {
      if (file instanceof import_obsidian4.TFile) {
        await this.app.vault.modify(file, content);
        new import_obsidian4.Notice(`\u7B14\u8BB0\u5DF2\u66F4\u65B0: ${filename}`);
      } else {
        await this.app.vault.create(filePath, content);
        new import_obsidian4.Notice(`\u7B14\u8BB0\u5DF2\u521B\u5EFA: ${filename}`);
      }
    } catch (error) {
      console.error(`\u4FDD\u5B58\u7B14\u8BB0\u5931\u8D25: ${filePath}`, error);
      new import_obsidian4.Notice(`\u65E0\u6CD5\u4FDD\u5B58\u7B14\u8BB0: ${filename}`);
    }
  }
  /**
   * 更新状态栏显示
   */
  updateStatusBar() {
    if (!this.plugin.statusBarEl)
      return;
    const { generationQueue, reviewQueue, revisionQueue } = this.plugin.data;
    const total = generationQueue.length + reviewQueue.length + revisionQueue.length;
    this.plugin.statusBarEl.setText(
      `KG: ${this.plugin.data.status} | G:${generationQueue.length} | C:${reviewQueue.length} | R:${revisionQueue.length} | Total:${total}`
    );
  }
};

// main.ts
var DEFAULT_PLUGIN_DATA = {
  status: "idle",
  generationQueue: [],
  reviewQueue: [],
  revisionQueue: [],
  discardedPile: []
};
var KnowledgeGraphPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    await this.loadPluginData();
    this.engine = new Engine(this);
    const ribbonIconEl = this.addRibbonIcon("brain-circuit", "\u77E5\u8BC6\u56FE\u8C31\u751F\u6210\u5668", (evt) => {
      this.engine.toggleEngineState();
    });
    ribbonIconEl.addClass("knowledge-graph-plugin-ribbon-class");
    this.statusBarEl = this.addStatusBarItem();
    this.engine.updateStatusBar();
    this.addSettingTab(new KGsSettingTab(this.app, this));
    this.addCommand({
      id: "toggle-knowledge-graph-engine",
      name: "\u542F\u52A8/\u6682\u505C \u77E5\u8BC6\u56FE\u8C31\u751F\u6210",
      callback: () => {
        this.engine.toggleEngineState();
      }
    });
    this.addCommand({
      id: "add-current-note-to-queue",
      name: "\u5C06\u5F53\u524D\u7B14\u8BB0\u6807\u9898\u6DFB\u52A0\u5230\u751F\u6210\u961F\u5217",
      checkCallback: (checking) => {
        const file = this.app.workspace.getActiveFile();
        if (file) {
          if (!checking) {
            this.engine.addConceptToQueue(file.basename);
          }
          return true;
        }
        return false;
      }
    });
    console.log("\u77E5\u8BC6\u56FE\u8C31\u63D2\u4EF6\u5DF2\u52A0\u8F7D\uFF01");
  }
  onunload() {
    console.log("\u77E5\u8BC6\u56FE\u8C31\u63D2\u4EF6\u5DF2\u5378\u8F7D\u3002");
  }
  /**
   * 加载插件的配置。
   * 它会合并默认设置、默认提示和用户保存的设置。
   * 这个方法需要兼容旧版本的数据结构。
   */
  async loadSettings() {
    const defaultPrompts = await getDefaultPrompts();
    const savedData = await this.loadData();
    const savedSettings = savedData || {};
    this.settings = Object.assign({}, DEFAULT_SETTINGS, defaultPrompts, savedSettings);
  }
  /**
   * 保存插件的配置和状态。
   * 这是唯一一个直接写入文件的方法，它将所有数据打包在一起。
   */
  async saveSettings() {
    const dataToSave = { ...this.settings, pluginState: this.data };
    await this.saveData(dataToSave);
  }
  /**
   * 加载插件的运行时状态。
   * 它会从保存的数据中提取 pluginState 部分。
   */
  async loadPluginData() {
    const savedData = await this.loadData();
    const savedState = (savedData == null ? void 0 : savedData.pluginState) || {};
    this.data = Object.assign({}, DEFAULT_PLUGIN_DATA, savedState);
  }
  /**
   * 保存插件的运行时状态。
   * 这个方法只是一个方便的别名，它实际上调用 saveSettings。
   * 这保证了状态和配置总是在一起被原子性地保存。
   */
  async savePluginData() {
    await this.saveSettings();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzZXR0aW5ncy50cyIsICJlbmdpbmUudHMiLCAiYXBpSGFuZGxlci50cyIsICJjcml0aWMudHMiLCAicmV2aXNlci50cyIsICJ1dGlscy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBLbm93bGVkZ2VHcmFwaFBsdWdpblNldHRpbmdzLCBQbHVnaW5EYXRhIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBLR3NTZXR0aW5nVGFiLCBERUZBVUxUX1NFVFRJTkdTLCBnZXREZWZhdWx0UHJvbXB0cyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgRW5naW5lIH0gZnJvbSAnLi9lbmdpbmUnO1xuXG5jb25zdCBERUZBVUxUX1BMVUdJTl9EQVRBOiBQbHVnaW5EYXRhID0ge1xuICAgIHN0YXR1czogJ2lkbGUnLFxuICAgIGdlbmVyYXRpb25RdWV1ZTogW10sXG4gICAgcmV2aWV3UXVldWU6IFtdLFxuICAgIHJldmlzaW9uUXVldWU6IFtdLFxuICAgIGRpc2NhcmRlZFBpbGU6IFtdLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS25vd2xlZGdlR3JhcGhQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBLbm93bGVkZ2VHcmFwaFBsdWdpblNldHRpbmdzO1xuICAgIGRhdGE6IFBsdWdpbkRhdGE7XG4gICAgZW5naW5lOiBFbmdpbmU7XG4gICAgc3RhdHVzQmFyRWw6IEhUTUxFbGVtZW50O1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICAvLyAxLiBcdTk5OTZcdTUxNDhcdTUyQTBcdThGN0RcdThCQkVcdTdGNkUgKHNldHRpbmdzKVxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIDIuIFx1NzEzNlx1NTQwRVx1NTJBMFx1OEY3RFx1NjNEMlx1NEVGNlx1NzJCNlx1NjAwMVxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRQbHVnaW5EYXRhKCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmVuZ2luZSA9IG5ldyBFbmdpbmUodGhpcyk7XG5cbiAgICAgICAgLy8gXHU3RjBFXHU1RTI2XHU1NkZFXHU2ODA3XG4gICAgICAgIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignYnJhaW4tY2lyY3VpdCcsICdcdTc3RTVcdThCQzZcdTU2RkVcdThDMzFcdTc1MUZcdTYyMTBcdTU2NjgnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZS50b2dnbGVFbmdpbmVTdGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmliYm9uSWNvbkVsLmFkZENsYXNzKCdrbm93bGVkZ2UtZ3JhcGgtcGx1Z2luLXJpYmJvbi1jbGFzcycpO1xuXG4gICAgICAgIC8vIFx1NzJCNlx1NjAwMVx1NjgwRlxuICAgICAgICB0aGlzLnN0YXR1c0JhckVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgICAgIHRoaXMuZW5naW5lLnVwZGF0ZVN0YXR1c0JhcigpO1xuXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1OTAwOVx1OTg3OVx1NTM2MVxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEtHc1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyBcdTU0N0RcdTRFRTRcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAndG9nZ2xlLWtub3dsZWRnZS1ncmFwaC1lbmdpbmUnLFxuICAgICAgICAgICAgbmFtZTogJ1x1NTQyRlx1NTJBOC9cdTY2ODJcdTUwNUMgXHU3N0U1XHU4QkM2XHU1NkZFXHU4QzMxXHU3NTFGXHU2MjEwJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUudG9nZ2xlRW5naW5lU3RhdGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2FkZC1jdXJyZW50LW5vdGUtdG8tcXVldWUnLFxuICAgICAgICAgICAgbmFtZTogJ1x1NUMwNlx1NUY1M1x1NTI0RFx1N0IxNFx1OEJCMFx1NjgwN1x1OTg5OFx1NkRGQlx1NTJBMFx1NTIzMFx1NzUxRlx1NjIxMFx1OTYxRlx1NTIxNycsXG4gICAgICAgICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5hZGRDb25jZXB0VG9RdWV1ZShmaWxlLmJhc2VuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1x1NzdFNVx1OEJDNlx1NTZGRVx1OEMzMVx1NjNEMlx1NEVGNlx1NURGMlx1NTJBMFx1OEY3RFx1RkYwMScpO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnXHU3N0U1XHU4QkM2XHU1NkZFXHU4QzMxXHU2M0QyXHU0RUY2XHU1REYyXHU1Mzc4XHU4RjdEXHUzMDAyJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1MkEwXHU4RjdEXHU2M0QyXHU0RUY2XHU3Njg0XHU5MTREXHU3RjZFXHUzMDAyXG4gICAgICogXHU1QjgzXHU0RjFBXHU1NDA4XHU1RTc2XHU5RUQ4XHU4QkE0XHU4QkJFXHU3RjZFXHUzMDAxXHU5RUQ4XHU4QkE0XHU2M0QwXHU3OTNBXHU1NDhDXHU3NTI4XHU2MjM3XHU0RkREXHU1QjU4XHU3Njg0XHU4QkJFXHU3RjZFXHUzMDAyXG4gICAgICogXHU4RkQ5XHU0RTJBXHU2NUI5XHU2Q0Q1XHU5NzAwXHU4OTgxXHU1MTdDXHU1QkI5XHU2NUU3XHU3MjQ4XHU2NzJDXHU3Njg0XHU2NTcwXHU2MzZFXHU3RUQzXHU2Nzg0XHUzMDAyXG4gICAgICovXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBkZWZhdWx0UHJvbXB0cyA9IGF3YWl0IGdldERlZmF1bHRQcm9tcHRzKCk7XG4gICAgICAgIC8vIGxvYWREYXRhKCkgXHU0RjFBXHU4QkZCXHU1M0Q2XHU2NTc0XHU0RTJBIGRhdGEuanNvbiBcdTY1ODdcdTRFRjZcbiAgICAgICAgY29uc3Qgc2F2ZWREYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgICAgICAvLyBcdTRFQ0VcdTRGRERcdTVCNThcdTc2ODRcdTY1NzBcdTYzNkVcdTRFMkRcdTYzRDBcdTUzRDZcdThCQkVcdTdGNkVcdTkwRThcdTUyMDZcbiAgICAgICAgY29uc3Qgc2F2ZWRTZXR0aW5ncyA9IHNhdmVkRGF0YSB8fCB7fTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTQwOFx1NUU3Nlx1NjI0MFx1NjcwOVx1OEJCRVx1N0Y2RVx1RkYwQ1x1Nzg2RVx1NEZERFx1NjI0MFx1NjcwOVx1OTE0RFx1N0Y2RVx1OTg3OVx1OTBGRFx1NjcwOVx1NTAzQ1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGVmYXVsdFByb21wdHMsIHNhdmVkU2V0dGluZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NEZERFx1NUI1OFx1NjNEMlx1NEVGNlx1NzY4NFx1OTE0RFx1N0Y2RVx1NTQ4Q1x1NzJCNlx1NjAwMVx1MzAwMlxuICAgICAqIFx1OEZEOVx1NjYyRlx1NTUyRlx1NEUwMFx1NEUwMFx1NEUyQVx1NzZGNFx1NjNBNVx1NTE5OVx1NTE2NVx1NjU4N1x1NEVGNlx1NzY4NFx1NjVCOVx1NkNENVx1RkYwQ1x1NUI4M1x1NUMwNlx1NjI0MFx1NjcwOVx1NjU3MFx1NjM2RVx1NjI1M1x1NTMwNVx1NTcyOFx1NEUwMFx1OEQ3N1x1MzAwMlxuICAgICAqL1xuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgZGF0YVRvU2F2ZSA9IHsgLi4udGhpcy5zZXR0aW5ncywgcGx1Z2luU3RhdGU6IHRoaXMuZGF0YSB9O1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKGRhdGFUb1NhdmUpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBcdTUyQTBcdThGN0RcdTYzRDJcdTRFRjZcdTc2ODRcdThGRDBcdTg4NENcdTY1RjZcdTcyQjZcdTYwMDFcdTMwMDJcbiAgICAgKiBcdTVCODNcdTRGMUFcdTRFQ0VcdTRGRERcdTVCNThcdTc2ODRcdTY1NzBcdTYzNkVcdTRFMkRcdTYzRDBcdTUzRDYgcGx1Z2luU3RhdGUgXHU5MEU4XHU1MjA2XHUzMDAyXG4gICAgICovXG4gICAgYXN5bmMgbG9hZFBsdWdpbkRhdGEoKSB7XG4gICAgICAgIC8vIGxvYWREYXRhKCkgXHU0RjFBXHU4QkZCXHU1M0Q2XHU2NTc0XHU0RTJBIGRhdGEuanNvbiBcdTY1ODdcdTRFRjZcbiAgICAgICAgY29uc3Qgc2F2ZWREYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgICAgICAvLyBcdTRFQ0VcdTRGRERcdTVCNThcdTc2ODRcdTY1NzBcdTYzNkVcdTRFMkRcdTYzRDBcdTUzRDZcdTcyQjZcdTYwMDFcdTkwRThcdTUyMDZcbiAgICAgICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IHNhdmVkRGF0YT8ucGx1Z2luU3RhdGUgfHwge307XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU0MDhcdTVFNzZcdTlFRDhcdThCQTRcdTcyQjZcdTYwMDFcdTU0OENcdTc1MjhcdTYyMzdcdTRGRERcdTVCNThcdTc2ODRcdTcyQjZcdTYwMDFcbiAgICAgICAgdGhpcy5kYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9QTFVHSU5fREFUQSwgc2F2ZWRTdGF0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU0RkREXHU1QjU4XHU2M0QyXHU0RUY2XHU3Njg0XHU4RkQwXHU4ODRDXHU2NUY2XHU3MkI2XHU2MDAxXHUzMDAyXG4gICAgICogXHU4RkQ5XHU0RTJBXHU2NUI5XHU2Q0Q1XHU1M0VBXHU2NjJGXHU0RTAwXHU0RTJBXHU2NUI5XHU0RkJGXHU3Njg0XHU1MjJCXHU1NDBEXHVGRjBDXHU1QjgzXHU1QjlFXHU5NjQ1XHU0RTBBXHU4QzAzXHU3NTI4IHNhdmVTZXR0aW5nc1x1MzAwMlxuICAgICAqIFx1OEZEOVx1NEZERFx1OEJDMVx1NEU4Nlx1NzJCNlx1NjAwMVx1NTQ4Q1x1OTE0RFx1N0Y2RVx1NjAzQlx1NjYyRlx1NTcyOFx1NEUwMFx1OEQ3N1x1ODhBQlx1NTM5Rlx1NUI1MFx1NjAyN1x1NTczMFx1NEZERFx1NUI1OFx1MzAwMlxuICAgICAqL1xuICAgIGFzeW5jIHNhdmVQbHVnaW5EYXRhKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH1cbn1cbiIsICIvLyBzZXR0aW5ncy50c1xudmFyIGltcG9ydF9vYnNpZGlhbjIgPSByZXF1aXJlKFwib2JzaWRpYW5cIik7XG5cbi8vIFF1ZXVlTW9kYWwudHNcbnZhciBpbXBvcnRfb2JzaWRpYW4gPSByZXF1aXJlKFwib2JzaWRpYW5cIik7XG5cbi8vIChcdThGRDlcdTRFMkEgTW9kYWwgXHU0RTBEXHU5NzAwXHU4OTgxIGV4cG9ydFx1RkYwQ1x1NTZFMFx1NEUzQVx1NUI4M1x1NTNFQVx1NTcyOCBLR3NTZXR0aW5nVGFiIFx1NTE4NVx1OTBFOFx1NEY3Rlx1NzUyOClcbnZhciBRdWV1ZU1hbmFnZW1lbnRNb2RhbCA9IGNsYXNzIGV4dGVuZHMgaW1wb3J0X29ic2lkaWFuLk1vZGFsIHtcbiAgY29uc3RydWN0b3IoYXBwLCBwbHVnaW4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIC8vIFx1NzUyOFx1NEU4RVx1NEZERFx1NUI1OFx1NjQxQ1x1N0QyMlx1OEJDRFxuICAgIHRoaXMuc2VhcmNoVGVybXMgPSB7XG4gICAgICBnZW46IFwiXCIsXG4gICAgICByZXY6IFwiXCIsXG4gICAgICByZXA6IFwiXCIsXG4gICAgICBkaXM6IFwiXCJcbiAgICB9O1xuICAgIC8vIFx1MzAxMFx1MzAxMFx1MzAxMCBcdTVERjJcdTRGRUVcdTY1MzlcdUZGMUFcdTlFRDhcdThCQTRcdTUxNjhcdTkwRThcdTYyOThcdTUzRTAgXHUzMDExXHUzMDExXHUzMDExXG4gICAgdGhpcy5jb2xsYXBzZVN0YXRlcyA9IHtcbiAgICAgIGdlbjogZmFsc2UsXG4gICAgICAvLyBcdTlFRDhcdThCQTRcdTYyOThcdTUzRTBcbiAgICAgIHJldjogZmFsc2UsXG4gICAgICAvLyBcdTlFRDhcdThCQTRcdTYyOThcdTUzRTBcbiAgICAgIHJlcDogZmFsc2UsXG4gICAgICAvLyBcdTlFRDhcdThCQTRcdTYyOThcdTUzRTBcbiAgICAgIGRpczogZmFsc2VcbiAgICAgIC8vIFx1OUVEOFx1OEJBNFx1NjI5OFx1NTNFMFxuICAgIH07XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcyhcImtnLW1vZGFsXCIpO1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJcXHU5NjFGXFx1NTIxN1xcdTdCQTFcXHU3NDA2XFx1NEVFQVxcdTg4NjhcXHU3NkQ4XCIgfSk7XG4gICAgY29uc3Qgc3RhdHVzID0gdGhpcy5wbHVnaW4uZGF0YS5zdGF0dXM7XG4gICAgY29uc3Qgc3RhdHVzVGV4dCA9IGBcXHU3MkI2XFx1NjAwMTogJHtzdGF0dXMudG9VcHBlckNhc2UoKX0gfCAke3RoaXMucGx1Z2luLnN0YXR1c0JhckVsLmdldFRleHQoKX1gO1xuICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4uU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoc3RhdHVzID09PSBcInJ1bm5pbmdcIiA/IFwiXFx1NUYxNVxcdTY0Q0VcXHU4RkQwXFx1ODg0Q1xcdTRFMkRcIiA6IFwiXFx1NUYxNVxcdTY0Q0VcXHU1REYyXFx1NjY4MlxcdTUwNUNcIikuc2V0RGVzYyhzdGF0dXNUZXh0KS5hZGRCdXR0b24oXG4gICAgICAoYnV0dG9uKSA9PiBidXR0b24uc2V0QnV0dG9uVGV4dChzdGF0dXMgPT09IFwicnVubmluZ1wiID8gXCJcXHU2NjgyXFx1NTA1Q1xcdTVGMTVcXHU2NENFXCIgOiBcIlxcdTU0MkZcXHU1MkE4XFx1NUYxNVxcdTY0Q0VcIikuc2V0Q3RhKHN0YXR1cyAhPT0gXCJydW5uaW5nXCIpLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLnBsdWdpbi5lbmdpbmUudG9nZ2xlRW5naW5lU3RhdGUoKTtcbiAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlclF1ZXVlU2VjdGlvbihcbiAgICAgIGNvbnRlbnRFbCxcbiAgICAgIFwiZ2VuXCIsXG4gICAgICBcIlxcdTVGODVcXHU3NTFGXFx1NjIxMCAoR2VuZXJhdGlvbilcIixcbiAgICAgIHRoaXMucGx1Z2luLmRhdGEuZ2VuZXJhdGlvblF1ZXVlLFxuICAgICAgdGhpcy5yZW5kZXJHZW5lcmF0aW9uSXRlbS5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlclF1ZXVlU2VjdGlvbihcbiAgICAgIGNvbnRlbnRFbCxcbiAgICAgIFwicmV2XCIsXG4gICAgICBcIlxcdTVGODVcXHU1QkExXFx1NjgzOCAoUmV2aWV3KVwiLFxuICAgICAgdGhpcy5wbHVnaW4uZGF0YS5yZXZpZXdRdWV1ZSxcbiAgICAgIHRoaXMucmVuZGVyUmV2aWV3SXRlbS5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlclF1ZXVlU2VjdGlvbihcbiAgICAgIGNvbnRlbnRFbCxcbiAgICAgIFwicmVwXCIsXG4gICAgICBcIlxcdTVGODVcXHU0RkVFXFx1NkI2MyAoUmV2aXNpb24pXCIsXG4gICAgICB0aGlzLnBsdWdpbi5kYXRhLnJldmlzaW9uUXVldWUsXG4gICAgICB0aGlzLnJlbmRlclJldmlzaW9uSXRlbS5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlclF1ZXVlU2VjdGlvbihcbiAgICAgIGNvbnRlbnRFbCxcbiAgICAgIFwiZGlzXCIsXG4gICAgICBcIlxcdTVERjJcXHU0RTIyXFx1NUYwMyAoRGlzY2FyZGVkKVwiLFxuICAgICAgdGhpcy5wbHVnaW4uZGF0YS5kaXNjYXJkZWRQaWxlLFxuICAgICAgdGhpcy5yZW5kZXJEaXNjYXJkZWRJdGVtLmJpbmQodGhpcylcbiAgICApO1xuICB9XG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1NEUwMFx1NEUyQVx1OTYxRlx1NTIxN1x1NTMzQVx1NTdERiAoXHU1RTI2XHU2NDFDXHU3RDIyXHU1NDhDXHU1QzU1XHU1RjAwL1x1NjI5OFx1NTNFMClcbiAgICovXG4gIHJlbmRlclF1ZXVlU2VjdGlvbihjb250YWluZXJFbCwga2V5LCB0aXRsZSwgZGF0YSwgcmVuZGVyRm4pIHtcbiAgICBjb25zdCBkaXNwbGF5TGltaXQgPSAxMDA7XG4gICAgY29uc3QgZmlsdGVyID0gdGhpcy5zZWFyY2hUZXJtc1trZXldO1xuICAgIGNvbnN0IGZpbHRlcmVkRGF0YSA9IGRhdGEuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICBpZiAoIWZpbHRlcilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBjb25zdCBuZWVkbGUgPSBmaWx0ZXIudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gaXRlbS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5lZWRsZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlbS5pZGVhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmVlZGxlKTtcbiAgICB9KTtcbiAgICBjb25zdCB0b3RhbCA9IGRhdGEubGVuZ3RoO1xuICAgIGNvbnN0IGZpbHRlcmVkVG90YWwgPSBmaWx0ZXJlZERhdGEubGVuZ3RoO1xuICAgIGNvbnN0IHRpdGxlVGV4dCA9IGAke3RpdGxlfSAoJHtmaWx0ZXJlZFRvdGFsfSR7dG90YWwgIT09IGZpbHRlcmVkVG90YWwgPyBcIiAvIFwiICsgdG90YWwgOiBcIlwifSBcXHU5ODc5KWA7XG4gICAgY29uc3QgZGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiZGV0YWlsc1wiKTtcbiAgICBkZXRhaWxzLm9wZW4gPSB0aGlzLmNvbGxhcHNlU3RhdGVzW2tleV07XG4gICAgY29uc3Qgc3VtbWFyeSA9IGRldGFpbHMuY3JlYXRlRWwoXCJzdW1tYXJ5XCIsIHsgdGV4dDogdGl0bGVUZXh0IH0pO1xuICAgIHN1bW1hcnkuc3R5bGUuZm9udFdlaWdodCA9IFwiYm9sZFwiO1xuICAgIHN1bW1hcnkuc3R5bGUuZm9udFNpemUgPSBcInZhcigtLWZvbnQtdWktbGFyZ2UpXCI7XG4gICAgc3VtbWFyeS5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICBzdW1tYXJ5LnN0eWxlLnBhZGRpbmcgPSBcIjVweCAwXCI7XG4gICAgZGV0YWlscy5hZGRFdmVudExpc3RlbmVyKFwidG9nZ2xlXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY29sbGFwc2VTdGF0ZXNba2V5XSA9IGRldGFpbHMub3BlbjtcbiAgICB9KTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuLlNldHRpbmcoZGV0YWlscykuc2V0RGVzYyhgXFx1NjQxQ1xcdTdEMjIgJHt0aXRsZX0uLi5gKS5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiXFx1OEY5M1xcdTUxNjVcXHU1MTczXFx1OTUyRVxcdThCQ0QuLi5cIikuc2V0VmFsdWUodGhpcy5zZWFyY2hUZXJtc1trZXldKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgdGhpcy5zZWFyY2hUZXJtc1trZXldID0gdmFsdWU7XG4gICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBjb25zdCB0cnVuY2F0ZWREYXRhID0gZmlsdGVyZWREYXRhLnNsaWNlKDAsIGRpc3BsYXlMaW1pdCk7XG4gICAgaWYgKHRydW5jYXRlZERhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBkZXNjID0gZGV0YWlscy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlxcdTZCNjRcXHU5NjFGXFx1NTIxN1xcdTRFM0FcXHU3QTdBXFx1RkYwQ1xcdTYyMTZcXHU2NzJBXFx1NjI3RVxcdTUyMzBcXHU1MzM5XFx1OTE0RFxcdTk4NzlcXHUzMDAyXCIsIGNsczogXCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIiB9KTtcbiAgICAgIGRlc2Muc3R5bGUucGFkZGluZ0xlZnQgPSBcIjEwcHhcIjtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGlzdENvbnRhaW5lciA9IGRldGFpbHMuY3JlYXRlRGl2KFwia2ctbGlzdC1jb250YWluZXJcIik7XG4gICAgbGlzdENvbnRhaW5lci5zdHlsZS5tYXhIZWlnaHQgPSBcIjIwMHB4XCI7XG4gICAgbGlzdENvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSBcImF1dG9cIjtcbiAgICBsaXN0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuICAgIGxpc3RDb250YWluZXIuc3R5bGUucGFkZGluZyA9IFwiNXB4XCI7XG4gICAgbGlzdENvbnRhaW5lci5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIxMHB4XCI7XG4gICAgdHJ1bmNhdGVkRGF0YS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgcmVuZGVyRm4obGlzdENvbnRhaW5lciwgaXRlbSwgaW5kZXgpO1xuICAgIH0pO1xuICAgIGlmIChmaWx0ZXJlZERhdGEubGVuZ3RoID4gZGlzcGxheUxpbWl0KSB7XG4gICAgICBjb25zdCB0cnVuY2F0ZWRJbmZvID0gZGV0YWlscy5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICB0ZXh0OiBgLi4uIFxcdTRFQzVcXHU2NjNFXFx1NzkzQVxcdTUyNEQgJHtkaXNwbGF5TGltaXR9IFxcdTk4NzkgKFxcdTUxNzEgJHtmaWx0ZXJlZERhdGEubGVuZ3RofSBcXHU5ODc5KVxcdUZGMENcXHU4QkY3XFx1NEY3RlxcdTc1MjhcXHU2NDFDXFx1N0QyMlxcdTY3RTVcXHU2MjdFXFx1NjZGNFxcdTU5MUFcXHUzMDAyYCxcbiAgICAgICAgY2xzOiBcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiXG4gICAgICB9KTtcbiAgICAgIHRydW5jYXRlZEluZm8uc3R5bGUucGFkZGluZ0xlZnQgPSBcIjEwcHhcIjtcbiAgICB9XG4gIH1cbiAgLy8gLS0tIFx1NTM1NVx1OTg3OVx1NkUzMlx1NjdEM1x1NTFGRFx1NjU3MCAoXHU0RkREXHU2MzAxXHU0RTBEXHU1M0Q4KSAtLS1cbiAgcmVuZGVyR2VuZXJhdGlvbkl0ZW0oY29udGFpbmVyLCBpdGVtKSB7XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbi5TZXR0aW5nKGNvbnRhaW5lcikuc2V0TmFtZShpdGVtKS5hZGRCdXR0b24oXG4gICAgICAoYnRuKSA9PiBidG4uc2V0SWNvbihcInRyYXNoXCIpLnNldFRvb2x0aXAoXCJcXHU1MjIwXFx1OTY2NFxcdTZCNjRcXHU2OTgyXFx1NUZGNVwiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcXVldWUgPSB0aGlzLnBsdWdpbi5kYXRhLmdlbmVyYXRpb25RdWV1ZTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBxdWV1ZS5pbmRleE9mKGl0ZW0pO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgIHF1ZXVlLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5lbmdpbmUudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIHJlbmRlclJldmlld0l0ZW0oY29udGFpbmVyLCBpdGVtKSB7XG4gICAgY29uc3QgdGFzayA9IGl0ZW07XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbi5TZXR0aW5nKGNvbnRhaW5lcikuc2V0TmFtZShgW1xcdTVCQTFcXHU2ODM4XSAke3Rhc2suaWRlYX1gKS5hZGRCdXR0b24oXG4gICAgICAoYnRuKSA9PiBidG4uc2V0SWNvbihcInRyYXNoXCIpLnNldFRvb2x0aXAoXCJcXHU0RTIyXFx1NUYwM1xcdTZCNjRcXHU0RUZCXFx1NTJBMVwiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5yZXZpZXdRdWV1ZS5zcGxpY2UodGhpcy5wbHVnaW4uZGF0YS5yZXZpZXdRdWV1ZS5pbmRleE9mKHRhc2spLCAxKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5kaXNjYXJkZWRQaWxlLnB1c2godGFzayk7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVQbHVnaW5EYXRhKCk7XG4gICAgICAgIHRoaXMucGx1Z2luLmVuZ2luZS51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuICByZW5kZXJSZXZpc2lvbkl0ZW0oY29udGFpbmVyLCBpdGVtKSB7XG4gICAgY29uc3QgdGFzayA9IGl0ZW07XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbi5TZXR0aW5nKGNvbnRhaW5lcikuc2V0TmFtZShgW1xcdTRGRUVcXHU2QjYzXSAke3Rhc2suaWRlYX1gKS5zZXREZXNjKGBcXHU1MzlGXFx1NTZFMDogJHt0YXNrLnJlYXNvbiB8fCBcIlxcdTY3MkFcXHU3N0U1XCJ9YCkuYWRkQnV0dG9uKFxuICAgICAgKGJ0bikgPT4gYnRuLnNldEljb24oXCJ0cmFzaFwiKS5zZXRUb29sdGlwKFwiXFx1NEUyMlxcdTVGMDNcXHU2QjY0XFx1NEVGQlxcdTUyQTFcIikub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLmRhdGEucmV2aXNpb25RdWV1ZS5zcGxpY2UodGhpcy5wbHVnaW4uZGF0YS5yZXZpc2lvblF1ZXVlLmluZGV4T2YodGFzayksIDEpO1xuICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLmRpc2NhcmRlZFBpbGUucHVzaCh0YXNrKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uZW5naW5lLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICB0aGlzLm9uT3BlbigpO1xuICAgICAgfSlcbiAgICApO1xuICB9XG4gIHJlbmRlckRpc2NhcmRlZEl0ZW0oY29udGFpbmVyLCBpdGVtKSB7XG4gICAgY29uc3QgdGFzayA9IGl0ZW07XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbi5TZXR0aW5nKGNvbnRhaW5lcikuc2V0TmFtZShgW1xcdTVERjJcXHU0RTIyXFx1NUYwM10gJHt0YXNrLmlkZWF9YCkuc2V0RGVzYyhgXFx1NjcwMFxcdTU0MEVcXHU1MzlGXFx1NTZFMDogJHt0YXNrLnJlYXNvbiB8fCBcIlxcdTY3MkFcXHU3N0U1XCJ9YCkuYWRkQnV0dG9uKFxuICAgICAgKGJ0bikgPT4gYnRuLnNldEljb24oXCJyZWZyZXNoLWN3XCIpLnNldFRvb2x0aXAoXCJcXHU5MUNEXFx1NjVCMFxcdTYzOTJcXHU5NjFGIChcXHU2NTNFXFx1NTZERVxcdTc1MUZcXHU2MjEwXFx1OTYxRlxcdTUyMTcpXCIpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLmRpc2NhcmRlZFBpbGUuc3BsaWNlKHRoaXMucGx1Z2luLmRhdGEuZGlzY2FyZGVkUGlsZS5pbmRleE9mKHRhc2spLCAxKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uZW5naW5lLmFkZENvbmNlcHRzVG9RdWV1ZShbdGFzay5pZGVhXSk7XG4gICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cbn07XG5cbi8vIC0tLSBcdTlFRDhcdThCQTQgUHJvbXB0cyAoXHU0RTBEXHU5NzAwXHU4OTgxIGV4cG9ydCkgLS0tXG52YXIgUFJPTVBUX0dFTkVSQVRPUl9ERUZBVUxUID0gYCMgUm9sZTogXFx1NzdFNVxcdThCQzZcXHU3Q0ZCXFx1N0VERlxcdTY3ODRcXHU1RUZBXFx1NEUxM1xcdTVCQjYuLi5gO1xudmFyIFBST01QVF9DUklUSUNfREVGQVVMVCA9IGAjIFJvbGU6IFxcdTc3RTVcXHU4QkM2XFx1NTZGRVxcdThDMzFcXHU4RDI4XFx1OTFDRlxcdTVCQTFcXHU2ODM4XFx1NTQ1OC4uLmA7XG52YXIgUFJPTVBUX1JFVklTRVJfREVGQVVMVCA9IGAjIFxcdTg5RDJcXHU4MjcyOiBcXHU4RDQ0XFx1NkRGMVxcdTc3RTVcXHU4QkM2XFx1N0YxNlxcdThGOTFcXHU0RTBFXFx1NTE4NVxcdTVCQjlcXHU0RjE4XFx1NTMxNlxcdTRFMTNcXHU1QkI2Li4uYDtcblxuLy8gLS0tIFx1MzAxMFx1MzAxMFx1MzAxMCBcdTRGRUVcdTZCNjNcdUZGMUFcdTZERkJcdTUyQTAgZXhwb3J0IFx1MzAxMVx1MzAxMVx1MzAxMSAtLS1cbmV4cG9ydCB2YXIgREVGQVVMVF9TRVRUSU5HUyA9IHtcbiAgLy8gQVBJXG4gIG9wZW5haV9hcGlfa2V5czogXCJcIixcbiAgb3BlbmFpX2Jhc2VfdXJsOiBcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjFcIixcbiAgb3BlbmFpX21vZGVsOiBcImdwdC00LXR1cmJvLXByZXZpZXdcIixcbiAgb3BlbmFpX2JhY2t1cF9tb2RlbDogXCJcIixcbiAgLy8gXHUzMDEwIFx1NjVCMFx1NTg5RVx1RkYxQU9wZW5BSSBcdTU5MDdcdTc1MjhcdTZBMjFcdTU3OEIgXHUzMDExXG4gIGdvb2dsZV9hcGlfa2V5czogXCJcIixcbiAgZ29vZ2xlX21vZGVsOiBcImdlbWluaS0xLjUtcHJvLWxhdGVzdFwiLFxuICBnb29nbGVfYmFja3VwX21vZGVsOiBcIlwiLFxuICAvLyBcdTMwMTAgXHU2NUIwXHU1ODlFXHVGRjFBR29vZ2xlIFx1NTkwN1x1NzUyOFx1NkEyMVx1NTc4QiBcdTMwMTFcbiAgZmFpbG92ZXJfY29vbGRvd25fc2Vjb25kczogMzAwLFxuICAvLyBcdTUzQzJcdTY1NzBcbiAgZ2VuZXJhdGlvbl90ZW1wZXJhdHVyZTogMC43LFxuICBnZW5lcmF0aW9uX21heF90b2tlbnM6IDQwOTYsXG4gIC8vIFx1OERFRlx1NUY4NFxuICBvdXRwdXRfZGlyOiBcIktub3dsZWRnZUdyYXBoTm90ZXNcIixcbiAgLy8gXHU3Q0ZCXHU3RURGXG4gIG1heF93b3JrZXJzOiAyLFxuICBnZW5lcmF0aW9uX2JhdGNoX3NpemU6IDUsXG4gIHJlcXVlc3RfZGVsYXk6IDUsXG4gIC8vIENyaXRpY1xuICBjcml0aWNfbW9kZTogXCJoZXVyaXN0aWNcIixcbiAgY3JpdGljX3JlcXVpcmVkX2hlYWRlcnM6IFwiIyBcXHV7MUY5RTB9XFxuPiBcXG4jIyBcXHV7MUY0RER9IFxcdTY4MzhcXHU1RkMzXFx1NjAxRFxcdTYwRjNcXG4jIyBcXHV7MUYzQUZ9IFxcdTkwMDJcXHU3NTI4XFx1NTczQVxcdTY2NkZcXG4jIyBcXHV7MUY2RTB9XFx1RkUwRiBcXHU0RjdGXFx1NzUyOFxcdTZCNjVcXHU5QUE0L1xcdTY3ODRcXHU2MjEwXFx1ODk4MVxcdTdEMjBcXG4jIyBcXHV7MUY2ODB9IFxcdTY4NDhcXHU0RjhCXFx1NTIwNlxcdTY3OTBcXG4jIyBcXHV7MUY0NER9IFxcdTRGMThcXHU3MEI5ICYgXFx1ezFGNDRFfSBcXHU3RjNBXFx1NzBCOVxcbiMjIFxcdXsxRjUxN30gXFx1NTE3M1xcdTgwNTRcXHU2QTIxXFx1NTc4QlwiLFxuICBjcml0aWNfbWluX2NvbnRlbnRfbGVuZ3RoOiA0MDAsXG4gIC8vIFJldmlzZXJcbiAgbWF4X3JldmlzaW9uX3JldHJpZXM6IDIsXG4gIC8vIFByb21wdHNcbiAgcHJvbXB0X2dlbmVyYXRvcjogUFJPTVBUX0dFTkVSQVRPUl9ERUZBVUxULFxuICBwcm9tcHRfY3JpdGljOiBQUk9NUFRfQ1JJVElDX0RFRkFVTFQsXG4gIHByb21wdF9yZXZpc2VyOiBQUk9NUFRfUkVWSVNFUl9ERUZBVUxULFxuICAvLyBcdTY0QURcdTc5Q0RcdTdCQjFcbiAgc2VlZENvbmNlcHRzOiBcIlwiLFxuICAvLyBcdTMwMTBcdTMwMTBcdTMwMTAgXHU2NUIwXHU1ODlFXHU5MTREXHU3RjZFXHU5ODc5IFx1MzAxMVx1MzAxMVx1MzAxMVxuICAvLyBcdTlFRDhcdThCQTRcdTUxNzNcdTk1RURcdTY1QjBcdTY5ODJcdTVGRjVcdTYzRDBcdTUzRDZcbiAgZXh0cmFjdF9uZXdfY29uY2VwdHM6IGZhbHNlXG59O1xuXG4vLyAtLS0gXHUzMDEwXHUzMDEwXHUzMDEwIFx1NEZFRVx1NkI2M1x1RkYxQVx1NkRGQlx1NTJBMCBleHBvcnQgXHUzMDExXHUzMDExXHUzMDExIC0tLVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERlZmF1bHRQcm9tcHRzKCkge1xuICByZXR1cm4ge1xuICAgIHByb21wdF9nZW5lcmF0b3I6IFBST01QVF9HRU5FUkFUT1JfREVGQVVMVCxcbiAgICBwcm9tcHRfY3JpdGljOiBQUk9NUFRfQ1JJVElDX0RFRkFVTFQsXG4gICAgcHJvbXB0X3JldmlzZXI6IFBST01QVF9SRVZJU0VSX0RFRkFVTFRcbiAgfTtcbn1cblxuLy8gLS0tIFx1MzAxMFx1MzAxMFx1MzAxMCBcdTRGRUVcdTZCNjNcdUZGMUFcdTZERkJcdTUyQTAgZXhwb3J0IFx1MzAxMVx1MzAxMVx1MzAxMSAtLS1cbmV4cG9ydCB2YXIgS0dzU2V0dGluZ1RhYiA9IGNsYXNzIGV4dGVuZHMgaW1wb3J0X29ic2lkaWFuMi5QbHVnaW5TZXR0aW5nVGFiIHtcbiAgY29uc3RydWN0b3IoYXBwLCBwbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cbiAgZGlzcGxheSgpIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiXFx1NzdFNVxcdThCQzZcXHU1NkZFXFx1OEMzMVxcdTc1MUZcXHU2MjEwXFx1NTY2OCAtIFxcdThCQkVcXHU3RjZFXCIgfSk7XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlxcdTVGMTVcXHU2NENFXFx1NEVFQVxcdTg4NjhcXHU3NkQ4XCIpLnNldERlc2MoXCJcXHU3QkExXFx1NzQwNlxcdTVGODVcXHU3NTFGXFx1NjIxMFxcdTMwMDFcXHU1Rjg1XFx1NUJBMVxcdTY4MzhcXHU1NDhDXFx1NURGMlxcdTRFMjJcXHU1RjAzXFx1NzY4NFxcdTRFRkJcXHU1MkExXFx1MzAwMlwiKS5hZGRCdXR0b24oXG4gICAgICAoYnV0dG9uKSA9PiBidXR0b24uc2V0QnV0dG9uVGV4dChcIlxcdTYyNTNcXHU1RjAwXFx1OTYxRlxcdTUyMTdcXHU3QkExXFx1NzQwNlxcdTU2NjhcIikuc2V0Q3RhKCkub25DbGljaygoKSA9PiB7XG4gICAgICAgIG5ldyBRdWV1ZU1hbmFnZW1lbnRNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiQVBJIFxcdThCQkVcXHU3RjZFXCIpLnNldEhlYWRpbmcoKTtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJPcGVuQUlcIiB9KTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiT3BlbkFJIEFQSSBLZXlzXCIpLnNldERlc2MoXCJcXHU2QkNGXFx1ODg0Q1xcdTRFMDBcXHU0RTJBIEtleVxcdTMwMDJcXHU2M0QyXFx1NEVGNlxcdTVDMDZcXHU4MUVBXFx1NTJBOFxcdThGNkVcXHU2MzYyXFx1NTQ4Q1xcdTUxQjdcXHU1Mzc0XFx1NEY3RlxcdTc1MjhcXHUzMDAyXCIpLmFkZFRleHRBcmVhKCh0ZXh0KSA9PiB0ZXh0LnNldFBsYWNlaG9sZGVyKFwic2stLi4uXCIpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haV9hcGlfa2V5cykub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfYXBpX2tleXMgPSB2YWx1ZTtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH0pKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiT3BlbkFJIEJhc2UgVVJMXCIpLnNldERlc2MoXCJcXHU1OTgyXFx1Njc5Q1xcdTRGNjBcXHU0RjdGXFx1NzUyOFxcdTdCMkNcXHU0RTA5XFx1NjVCOVxcdTRFRTNcXHU3NDA2XFx1RkYwQ1xcdThCRjdcXHU1NzI4XFx1NkI2NFxcdTU5MDRcXHU1ODZCXFx1NTE2NVxcdTRFRTNcXHU3NDA2XFx1NTczMFxcdTU3NDBcXHUzMDAyXCIpLmFkZFRleHQoKHRleHQpID0+IHRleHQuc2V0UGxhY2Vob2xkZXIoXCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxXCIpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haV9iYXNlX3VybCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfYmFzZV91cmwgPSB2YWx1ZS50cmltKCk7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KSk7XG4gICAgXG4gICAgLy8gLS0tIFx1MzAxMFx1MzAxMFx1MzAxMCBcdTY2RjRcdTY1QjBcdUZGMUFPcGVuQUkgXHU2QTIxXHU1NzhCXHU4QkJFXHU3RjZFIFx1MzAxMVx1MzAxMVx1MzAxMSAtLS1cbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiT3BlbkFJIE1vZGVsIChcXHU0RTNCXFx1NkEyMVxcdTU3OEIpXCIpLnNldERlc2MoXCJcXHU4RjkzXFx1NTE2NVxcdTRGNjBcXHU2MEYzXFx1NEY3RlxcdTc1MjhcXHU3Njg0IE9wZW5BSSBcXHU0RTNCXFx1ODk4MVxcdTZBMjFcXHU1NzhCXFx1NTQwRFxcdTc5RjBcXHUzMDAyXCIpLmFkZFRleHQoKHRleHQpID0+IHRleHQuc2V0UGxhY2Vob2xkZXIoXCJncHQtNC10dXJiby1wcmV2aWV3XCIpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haV9tb2RlbCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfbW9kZWwgPSB2YWx1ZS50cmltKCk7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KSk7XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIk9wZW5BSSBcXHU1OTA3XFx1NzUyOFxcdTZBMjFcXHU1NzhCIChCYWNrdXAgTW9kZWwpXCIpLnNldERlc2MoXCIoXFx1NTNFRlxcdTkwMDkpIFxcdTVGNTNcXHU0RTNCXFx1NkEyMVxcdTU3OEJcXHU5ODlEXFx1NUVBNlxcdTgwMTdcXHU1QzNEXFx1NjIxNlxcdTU5MzFcXHU4RDI1XFx1NjVGNlxcdUZGMENcXHU1QzA2XFx1ODFFQVxcdTUyQThcXHU1QzFEXFx1OEJENVxcdTZCNjRcXHU1OTA3XFx1NzUyOFxcdTZBMjFcXHU1NzhCXFx1MzAwMlwiKS5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiZ3B0LTMuNS10dXJib1wiKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlfYmFja3VwX21vZGVsKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haV9iYWNrdXBfbW9kZWwgPSB2YWx1ZS50cmltKCk7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KSk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJHb29nbGUgR2VtaW5pXCIgfSk7XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkdvb2dsZSBHZW1pbmkgQVBJIEtleXNcIikuc2V0RGVzYyhcIlxcdTZCQ0ZcXHU4ODRDXFx1NEUwMFxcdTRFMkEgS2V5XFx1MzAwMlwiKS5hZGRUZXh0QXJlYSgodGV4dCkgPT4gdGV4dC5zZXRQbGFjZWhvbGRlcihcIkFJemFTeS4uLlwiKS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVfYXBpX2tleXMpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlX2FwaV9rZXlzID0gdmFsdWU7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KSk7XG4gICAgXG4gICAgLy8gLS0tIFx1MzAxMFx1MzAxMFx1MzAxMCBcdTY2RjRcdTY1QjBcdUZGMUFHb29nbGUgXHU2QTIxXHU1NzhCXHU4QkJFXHU3RjZFIFx1MzAxMVx1MzAxMVx1MzAxMSAtLS1cbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiR29vZ2xlIEdlbWluaSBNb2RlbCAoXFx1NEUzQlxcdTZBMjFcXHU1NzhCKVwiKS5zZXREZXNjKFwiXFx1OEY5M1xcdTUxNjVcXHU0RjYwXFx1NjBGM1xcdTRGN0ZcXHU3NTI4XFx1NzY4NCBHb29nbGUgXFx1NEUzQlxcdTg5ODFcXHU2QTIxXFx1NTc4QlxcdTU0MERcXHU3OUYwXFx1MzAwMlwiKS5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiZ2VtaW5pLTEuNS1wcm8tbGF0ZXN0XCIpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZV9tb2RlbCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb29nbGVfbW9kZWwgPSB2YWx1ZS50cmltKCk7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KSk7XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIkdvb2dsZSBHZW1pbmkgXFx1NTkwN1xcdTc1MjhcXHU2QTIxXFx1NTc4QiAoQmFja3VwIE1vZGVsKVwiKS5zZXREZXNjKFwiKFxcdTUzRUZcXHU5MDA5KSBcXHU1RjUzXFx1NEUzQlxcdTZBMjFcXHU1NzhCXFx1OTg5RFxcdTVFQTZcXHU4MDE3XFx1NUMzRFxcdTYyMTZcXHU1OTMxXFx1OEQyNVxcdTY1RjZcXHVGRjBDXFx1NUMwNlxcdTgxRUFcXHU1MkE4XFx1NUMxRFxcdThCRDVcXHU2QjY0XFx1NTkwN1xcdTc1MjhcXHU2QTIxXFx1NTc4QlxcdTMwMDJcIikuYWRkVGV4dCgodGV4dCkgPT4gdGV4dC5zZXRQbGFjZWhvbGRlcihcImdlbWluaS0xLjAtcHJvXCIpLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvb2dsZV9iYWNrdXBfbW9kZWwpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29vZ2xlX2JhY2t1cF9tb2RlbCA9IHZhbHVlLnRyaW0oKTtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH0pKTtcbiAgICBcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiS2V5IFxcdTUxQjdcXHU1Mzc0XFx1NjVGNlxcdTk1RjQgKFxcdTc5RDIpXCIpLnNldERlc2MoXCJBUEkgS2V5IFxcdTU5MzFcXHU4RDI1XFx1NTQwRVxcdUZGMENcXHU5NzAwXFx1ODk4MVxcdTdCNDlcXHU1Rjg1XFx1NTkxQVxcdTVDMTFcXHU3OUQyXFx1NjI0RFxcdTgwRkRcXHU1MThEXFx1NkIyMVxcdTRGN0ZcXHU3NTI4XFx1MzAwMlwiKS5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0LnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mYWlsb3Zlcl9jb29sZG93bl9zZWNvbmRzKSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgaWYgKCFpc05hTihudW0pICYmIG51bSA+PSAwKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZhaWxvdmVyX2Nvb2xkb3duX3NlY29uZHMgPSBudW07XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiTExNIFxcdTUzQzJcXHU2NTcwXFx1OEJCRVxcdTdGNkVcIikuc2V0SGVhZGluZygpO1xuICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4yLlNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJcXHU3NTFGXFx1NjIxMFxcdTZFMjlcXHU1RUE2IChUZW1wZXJhdHVyZSlcIikuc2V0RGVzYyhcIlxcdTYzQTdcXHU1MjM2XFx1NzUxRlxcdTYyMTBcXHU1MTg1XFx1NUJCOVxcdTc2ODRcXHU5NjhGXFx1NjczQVxcdTYwMjdcXHUzMDAyXFx1OEY4M1xcdTRGNEVcXHU3Njg0XFx1NTAzQ1xcdUZGMDhcXHU1OTgyIDAuMlxcdUZGMDlcXHU2NkY0XFx1NTE3N1xcdTc4NkVcXHU1QjlBXFx1NjAyN1xcdUZGMENcXHU4RjgzXFx1OUFEOFxcdTc2ODRcXHU1MDNDXFx1RkYwOFxcdTU5ODIgMC44XFx1RkYwOVxcdTY2RjRcXHU1MTc3XFx1NTIxQlxcdTkwMjBcXHU2MDI3XFx1MzAwMlwiKS5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0LnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW5lcmF0aW9uX3RlbXBlcmF0dXJlKSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCAmJiBudW0gPD0gMikge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW5lcmF0aW9uX3RlbXBlcmF0dXJlID0gbnVtO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlxcdTY3MDBcXHU1OTI3IFRva2VuIFxcdTY1NzAgKE1heCBUb2tlbnMpXCIpLnNldERlc2MoXCJBUEkgXFx1NEUwMFxcdTZCMjFcXHU4QzAzXFx1NzUyOFxcdTUxNDFcXHU4QkI4XFx1NzUxRlxcdTYyMTBcXHU3Njg0XFx1NjcwMFxcdTU5MjcgVG9rZW4gXFx1NjU3MFxcdTkxQ0ZcXHUzMDAyXCIpLmFkZFRleHQoKHRleHQpID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbmVyYXRpb25fbWF4X3Rva2VucykpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbmVyYXRpb25fbWF4X3Rva2VucyA9IG51bTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4yLlNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJcXHU1RjE1XFx1NjRDRVxcdThCQkVcXHU3RjZFXCIpLnNldEhlYWRpbmcoKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiXFx1OEY5M1xcdTUxRkFcXHU2NTg3XFx1NEVGNlxcdTU5MzlcIikuc2V0RGVzYyhcIlxcdTYyNDBcXHU2NzA5XFx1NzUxRlxcdTYyMTBcXHU3Njg0XFx1N0IxNFxcdThCQjBcXHU1QzA2XFx1NEZERFxcdTVCNThcXHU1MjMwXFx1NkI2NFxcdTY1ODdcXHU0RUY2XFx1NTkzOVxcdTMwMDJcIikuYWRkVGV4dCgodGV4dCkgPT4gdGV4dC5zZXRQbGFjZWhvbGRlcihcIktub3dsZWRnZUdyYXBoTm90ZXNcIikuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3V0cHV0X2Rpcikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdXRwdXRfZGlyID0gdmFsdWUudHJpbSgpLnJlcGxhY2UoL1xcLyQvLCBcIlwiKTtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH0pKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiXFx1NjcwMFxcdTU5MjdcXHU1RTc2XFx1NTNEMVxcdTY1NzAgKE1heCBXb3JrZXJzKVwiKS5zZXREZXNjKFwiXFx1RkYwOFxcdTZDRThcXHU2MTBGXFx1RkYxQVxcdTVGNTNcXHU1MjREIFYyLjIgXFx1NUYxNVxcdTY0Q0VcXHU0RTNBXFx1NTM1NVxcdTdFQkZcXHU3QTBCXFx1NkQ0MVxcdTZDMzRcXHU3RUJGXFx1RkYwQ1xcdTZCNjRcXHU4QkJFXFx1N0Y2RVxcdTY2ODJcXHU2NzJBXFx1NzUxRlxcdTY1NDhcXHVGRjA5XCIpLmFkZFRleHQoKHRleHQpID0+IHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heF93b3JrZXJzKSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgaWYgKCFpc05hTihudW0pICYmIG51bSA+IDApIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4X3dvcmtlcnMgPSBudW07XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiXFx1NzUxRlxcdTYyMTBcXHU2Mjc5XFx1NTkwNFxcdTc0MDZcXHU1OTI3XFx1NUMwRlwiKS5zZXREZXNjKFwiXFx1NUYxNVxcdTY0Q0VcXHU2QkNGXFx1NEUwMFxcdThGNkVcXHU0RUNFXFx1MjAxQ1xcdTVGODVcXHU3NTFGXFx1NjIxMFxcdTk2MUZcXHU1MjE3XFx1MjAxRFxcdTRFMkRcXHU1M0Q2XFx1NTFGQVxcdTc2ODRcXHU0RUZCXFx1NTJBMVxcdTY1NzBcXHU5MUNGXFx1MzAwMlwiKS5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0LnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW5lcmF0aW9uX2JhdGNoX3NpemUpKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID4gMCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW5lcmF0aW9uX2JhdGNoX3NpemUgPSBudW07XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiXFx1NkJDRlxcdThGNkVcXHU4QkY3XFx1NkM0MlxcdTVFRjZcXHU4RkRGIChcXHU3OUQyKVwiKS5zZXREZXNjKFwiXFx1NUYxNVxcdTY0Q0VcXHU1NzI4XFx1NTkwNFxcdTc0MDZcXHU1QjhDXFx1NEUwMFxcdTRFMkFcXHU2Mjc5XFx1NkIyMVxcdTU0MEVcXHVGRjBDXFx1N0I0OVxcdTVGODVcXHU1OTFBXFx1NUMxMVxcdTc5RDJcXHU1MThEXFx1NUYwMFxcdTU5Q0JcXHU0RTBCXFx1NEUwMFxcdTRFMkFcXHU2Mjc5XFx1NkIyMVxcdTMwMDJcIikuYWRkVGV4dCgodGV4dCkgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVxdWVzdF9kZWxheSkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXF1ZXN0X2RlbGF5ID0gbnVtO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlxcdTY3MDBcXHU1OTI3XFx1NEZFRVxcdTZCNjNcXHU2QjIxXFx1NjU3MFwiKS5zZXREZXNjKFwiXFx1NEUwMFxcdTdCQzdcXHU3QjE0XFx1OEJCMFxcdTU3MjhcXHU4OEFCXFx1NjUzRVxcdTVGMDNcXHVGRjA4XFx1NzlGQlxcdTUxNjUgRGlzY2FyZGVkIFBpbGVcXHVGRjA5XFx1NTI0RFxcdUZGMENcXHU2NzAwXFx1NTkxQVxcdTUxNDFcXHU4QkI4XFx1ODhBQlxcdTRGRUVcXHU2QjYzXFx1NzY4NFxcdTZCMjFcXHU2NTcwXFx1MzAwMlwiKS5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0LnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhfcmV2aXNpb25fcmV0cmllcykpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhfcmV2aXNpb25fcmV0cmllcyA9IG51bTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4yLlNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJcXHU4MUVBXFx1NTJBOFxcdTYzRDBcXHU1M0Q2XFx1NjVCMFxcdTY5ODJcXHU1RkY1IChFeHRyYWN0IE5ldyBDb25jZXB0cylcIikuc2V0RGVzYyhcIlxcdTVGMDBcXHU1NDJGXFx1NTQwRVxcdUZGMENcXHU1QzA2XFx1ODFFQVxcdTUyQThcXHU0RUNFXFx1NURGMlxcdTYyNzlcXHU1MUM2XFx1N0IxNFxcdThCQjBcXHU3Njg0XFx1NTE4NVxcdTVCQjlcXHU0RTJEXFx1NjNEMFxcdTUzRDYgW1tXaWtpbGlua3NdXSBcXHU0RjVDXFx1NEUzQVxcdTY1QjBcXHU2OTgyXFx1NUZGNVxcdTUyQTBcXHU1MTY1XFx1MjAxQ1xcdTVGODVcXHU3NTFGXFx1NjIxMFxcdTk2MUZcXHU1MjE3XFx1MjAxRFxcdTMwMDIoXFx1OUVEOFxcdThCQTRcXHU1MTczXFx1OTVFRClcIikuYWRkVG9nZ2xlKFxuICAgICAgKHRvZ2dsZSkgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4dHJhY3RfbmV3X2NvbmNlcHRzKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXh0cmFjdF9uZXdfY29uY2VwdHMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KVxuICAgICk7XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlxcdTVCQTFcXHU2ODM4XFx1NkEyMVxcdTVGMEYgKENyaXRpYyBNb2RlKVwiKS5zZXREZXNjKFwiXFx1OTAwOVxcdTYyRTlcXHU1MTg1XFx1NUJCOVxcdTVCQTFcXHU2ODM4XFx1NzY4NFxcdTY1QjlcXHU1RjBGXFx1MzAwMlxcdTU0MkZcXHU1M0QxXFx1NUYwRlxcdTZBMjFcXHU1RjBGXFx1OTAxRlxcdTVFQTZcXHU1RkVCXFx1NEUxNFxcdTUxNERcXHU4RDM5XFx1RkYwQ1xcdTRGNDZcXHU1M0VBXFx1NjhDMFxcdTY3RTVcXHU2ODNDXFx1NUYwRlxcdUZGMUJBSVxcdTZBMjFcXHU1RjBGXFx1NjZGNFxcdTY2N0FcXHU4MEZEXFx1RkYwQ1xcdTRGNDZcXHU0RjFBXFx1NkQ4OFxcdTgwMTdBUElcXHU5ODlEXFx1NUVBNlxcdTMwMDJcIikuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiBkcm9wZG93bi5hZGRPcHRpb24oXCJoZXVyaXN0aWNcIiwgXCJcXHU1NDJGXFx1NTNEMVxcdTVGMEYgKEhldXJpc3RpYylcIikuYWRkT3B0aW9uKFwiYWlcIiwgXCJcXHU0RUJBXFx1NURFNVxcdTY2N0FcXHU4MEZEIChBSSlcIikuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JpdGljX21vZGUpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JpdGljX21vZGUgPSB2YWx1ZTtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgfSkpO1xuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfbW9kZSA9PT0gXCJoZXVyaXN0aWNcIikge1xuICAgICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlxcdTU0MkZcXHU1M0QxXFx1NUYwRlxcdTVCQTFcXHU2ODM4XFx1RkYxQVxcdTVGQzVcXHU5ODdCXFx1NzY4NFxcdTY4MDdcXHU5ODk4XCIpLnNldERlc2MoXCJcXHU1NzI4XFx1NTQyRlxcdTUzRDFcXHU1RjBGXFx1NkEyMVxcdTVGMEZcXHU0RTBCXFx1RkYwQ1xcdTY4QzBcXHU2N0U1XFx1N0IxNFxcdThCQjBcXHU2NjJGXFx1NTQyNlxcdTUzMDVcXHU1NDJCXFx1NjI0MFxcdTY3MDlcXHU4RkQ5XFx1NEU5QlxcdTY4MDdcXHU5ODk4XFx1RkYwOFxcdTZCQ0ZcXHU4ODRDXFx1NEUwMFxcdTRFMkFcXHVGRjA5XFx1MzAwMlwiKS5hZGRUZXh0QXJlYSgodGV4dCkgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfcmVxdWlyZWRfaGVhZGVycykub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNyaXRpY19yZXF1aXJlZF9oZWFkZXJzID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkuaW5wdXRFbC5zdHlsZS5oZWlnaHQgPSBcIjE1MHB4XCIpO1xuICAgICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlxcdTU0MkZcXHU1M0QxXFx1NUYwRlxcdTVCQTFcXHU2ODM4XFx1RkYxQVxcdTY3MDBcXHU1QzBGXFx1NTE4NVxcdTVCQjlcXHU5NTdGXFx1NUVBNlwiKS5zZXREZXNjKFwiXFx1NTcyOFxcdTU0MkZcXHU1M0QxXFx1NUYwRlxcdTZBMjFcXHU1RjBGXFx1NEUwQlxcdUZGMENcXHU3QjE0XFx1OEJCMFxcdTUxODVcXHU1QkI5XFx1NUZDNVxcdTk4N0JcXHU4RkJFXFx1NTIzMFxcdTc2ODRcXHU2NzAwXFx1NUMwRlxcdTVCNTdcXHU3QjI2XFx1NjU3MFxcdTMwMDJcIikuYWRkVGV4dCgodGV4dCkgPT4gdGV4dC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JpdGljX21pbl9jb250ZW50X2xlbmd0aCkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID49IDApIHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfbWluX2NvbnRlbnRfbGVuZ3RoID0gbnVtO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfVxuICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4yLlNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJcXHU2OTgyXFx1NUZGNVxcdTY0QURcXHU3OUNEIChDb25jZXB0IFNlZWRpbmcpXCIpLnNldEhlYWRpbmcoKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiXFx1Njk4MlxcdTVGRjVcXHU2NEFEXFx1NzlDRFxcdTdCQjFcIikuc2V0RGVzYyhcIlxcdTU3MjhcXHU2QjY0XFx1NTkwNFxcdTdDOThcXHU4RDM0XFx1NjIxNlxcdThGOTNcXHU1MTY1XFx1NjBBOFxcdTYwRjNcXHU4OTgxXFx1NzUxRlxcdTYyMTBcXHU1MjFEXFx1NTlDQlxcdTdCMTRcXHU4QkIwXFx1NzY4NFxcdTY5ODJcXHU1RkY1XFx1NTIxN1xcdTg4NjhcXHVGRjBDXFx1NkJDRlxcdTg4NENcXHU0RTAwXFx1NEUyQVxcdTY5ODJcXHU1RkY1XFx1MzAwMlwiKS5hZGRUZXh0QXJlYShcbiAgICAgICh0ZXh0KSA9PiB0ZXh0LnNldFBsYWNlaG9sZGVyKFwiXFx1NEY4QlxcdTU5ODJcXHVGRjFBXFxuXFx1N0IyQ1xcdTRFMDBcXHU2MDI3XFx1NTM5RlxcdTc0MDZcXG5cXHU1OTY1XFx1NTM2MVxcdTU5QzZcXHU1MjQzXFx1NTIwMFxcblxcdTUyM0JcXHU2MTBGXFx1N0VDM1xcdTRFNjBcXG4uLi5cIikuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VlZENvbmNlcHRzKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VlZENvbmNlcHRzID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkuaW5wdXRFbC5zdHlsZS5oZWlnaHQgPSBcIjIwMHB4XCJcbiAgICApO1xuICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4yLlNldHRpbmcoY29udGFpbmVyRWwpLmFkZEJ1dHRvbihcbiAgICAgIChidXR0b24pID0+IGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiXFx1NjRBRFxcdTc5Q0RcXHU1MjMwXFx1NUY4NVxcdTc1MUZcXHU2MjEwXFx1OTYxRlxcdTUyMTdcIikuc2V0Q3RhKCkub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJhd1RleHQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWVkQ29uY2VwdHM7XG4gICAgICAgIGlmICghcmF3VGV4dC50cmltKCkpIHtcbiAgICAgICAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5Ob3RpY2UoXCJcXHU2NEFEXFx1NzlDRFxcdTdCQjFcXHU0RTNBXFx1N0E3QVxcdUZGMENcXHU2NUUwXFx1OTcwMFxcdTY0Q0RcXHU0RjVDXFx1MzAwMlwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29uY2VwdHNUb1NlZWQgPSBbLi4ubmV3IFNldChyYXdUZXh0LnNwbGl0KFwiXFxuXCIpLm1hcCgobGluZSkgPT4gbGluZS50cmltKCkpLmZpbHRlcihCb29sZWFuKSldO1xuICAgICAgICBjb25zdCBhZGRlZENvdW50ID0gdGhpcy5wbHVnaW4uZW5naW5lLmFkZENvbmNlcHRzVG9RdWV1ZShjb25jZXB0c1RvU2VlZCk7XG4gICAgICAgIGNvbnN0IGlnbm9yZWRDb3VudCA9IGNvbmNlcHRzVG9TZWVkLmxlbmd0aCAtIGFkZGVkQ291bnQ7XG4gICAgICAgIGxldCBub3RpY2VNZXNzYWdlID0gYFxcdTYyMTBcXHU1MjlGXFx1NkRGQlxcdTUyQTAgJHthZGRlZENvdW50fSBcXHU0RTJBXFx1NjVCMFxcdTY5ODJcXHU1RkY1XFx1NTIzMFxcdTk2MUZcXHU1MjE3XFx1MzAwMmA7XG4gICAgICAgIGlmIChpZ25vcmVkQ291bnQgPiAwKSB7XG4gICAgICAgICAgbm90aWNlTWVzc2FnZSArPSBgXG4ke2lnbm9yZWRDb3VudH0gXFx1NEUyQVxcdTY5ODJcXHU1RkY1XFx1NTZFMFxcdTVERjJcXHU1QjU4XFx1NTcyOFxcdTYyMTZcXHU5MUNEXFx1NTkwRFxcdTgwMENcXHU4OEFCXFx1NUZGRFxcdTc1NjVcXHUzMDAyYDtcbiAgICAgICAgfVxuICAgICAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5Ob3RpY2Uobm90aWNlTWVzc2FnZSwgNWUzKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VlZENvbmNlcHRzID0gXCJcIjtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgfSlcbiAgICApO1xuICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4yLlNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQcm9tcHRzIFxcdThCQkVcXHU3RjZFXCIpLnNldEhlYWRpbmcoKTtcbiAgICBuZXcgaW1wb3J0X29ic2lkaWFuMi5TZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiXFx1NzUxRlxcdTYyMTAgUHJvbXB0XCIpLnNldERlc2MoXCJcXHU3NTI4XFx1NEU4RVxcdTc1MUZcXHU2MjEwXFx1NjVCMFxcdTY5ODJcXHU1RkY1XFx1NTE4NVxcdTVCQjlcXHU3Njg0IFByb21wdFxcdTMwMDJcIikuYWRkVGV4dEFyZWEoKHRleHQpID0+IHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X2dlbmVyYXRvcikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9tcHRfZ2VuZXJhdG9yID0gdmFsdWU7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KS5pbnB1dEVsLnN0eWxlLmhlaWdodCA9IFwiMzAwcHhcIik7XG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNyaXRpY19tb2RlID09PSBcImFpXCIpIHtcbiAgICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4yLlNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJcXHU1QkExXFx1NjgzOCBQcm9tcHQgKENyaXRpYylcIikuc2V0RGVzYyhcIlxcdTc1MjhcXHU0RThFIEFJIFxcdTZBMjFcXHU1RjBGXFx1NEUwQlxcdTVCQTFcXHU2ODM4XFx1NzUxRlxcdTYyMTBcXHU1MTg1XFx1NUJCOVxcdTc2ODQgUHJvbXB0XFx1MzAwMlwiKS5hZGRUZXh0QXJlYSgodGV4dCkgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9tcHRfY3JpdGljKS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X2NyaXRpYyA9IHZhbHVlO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pLmlucHV0RWwuc3R5bGUuaGVpZ2h0ID0gXCIzMDBweFwiKTtcbiAgICB9XG4gICAgbmV3IGltcG9ydF9vYnNpZGlhbjIuU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlxcdTRGRUVcXHU2QjYzIFByb21wdCAoUmV2aXNlcilcIikuc2V0RGVzYyhcIlxcdTc1MjhcXHU0RThFXFx1NEZFRVxcdTZCNjNcXHU4OEFCXFx1NUJBMVxcdTY4MzhcXHU1NDU4XFx1NjJEMlxcdTdFRERcXHU1MTg1XFx1NUJCOVxcdTc2ODQgUHJvbXB0XFx1MzAwMlwiKS5hZGRUZXh0QXJlYSgodGV4dCkgPT4gdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9tcHRfcmV2aXNlcikub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9tcHRfcmV2aXNlciA9IHZhbHVlO1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgfSkuaW5wdXRFbC5zdHlsZS5oZWlnaHQgPSBcIjMwMHB4XCIpO1xuICB9XG59O1xuIiwgIi8vIGVuZ2luZS50c1xuXG5pbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBURm9sZGVyLCBub3JtYWxpemVQYXRoLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBLbm93bGVkZ2VHcmFwaFBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5pbXBvcnQgeyBBUElIYW5kbGVyLCBBbGxNb2RlbHNGYWlsZWRFcnJvciB9IGZyb20gXCIuL2FwaUhhbmRsZXJcIjtcbmltcG9ydCB7IENyaXRpYyB9IGZyb20gXCIuL2NyaXRpY1wiO1xuaW1wb3J0IHsgUmV2aXNlciB9IGZyb20gXCIuL3JldmlzZXJcIjtcbmltcG9ydCB7IHNhbml0aXplRmlsZW5hbWUsIGV4dHJhY3ROZXdJZGVhcywgY2xlYW5NYXJrZG93bk91dHB1dCB9IGZyb20gXCIuL3V0aWxzXCI7XG4vLyBcdTUwNDdcdThCQkVcdTRGNjBcdTc2ODRcdTdDN0JcdTU3OEJcdTVCOUFcdTRFNDlcdTU3MjhcdTRFMDBcdTRFMkFcdTUzRUIgJ3R5cGVzLnRzJyBcdTc2ODRcdTY1ODdcdTRFRjZcdTkxQ0NcbmltcG9ydCB7IFRhc2tEYXRhIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIEVuZ2luZSB7XG4gICAgcGx1Z2luOiBLbm93bGVkZ2VHcmFwaFBsdWdpbjtcbiAgICBhcHA6IEFwcDtcbiAgICBhcGlIYW5kbGVyOiBBUElIYW5kbGVyO1xuICAgIGNyaXRpYzogQ3JpdGljO1xuICAgIHJldmlzZXI6IFJldmlzZXI7XG4gICAgcHJpdmF0ZSBpc1J1bm5pbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIHRpbWVySWQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEtub3dsZWRnZUdyYXBoUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XG4gICAgICAgIHRoaXMuYXBpSGFuZGxlciA9IG5ldyBBUElIYW5kbGVyKHBsdWdpbik7XG4gICAgICAgIHRoaXMuY3JpdGljID0gbmV3IENyaXRpYyhwbHVnaW4pO1xuICAgICAgICB0aGlzLnJldmlzZXIgPSBuZXcgUmV2aXNlcihwbHVnaW4pO1xuICAgIH1cblxuICAgIC8vIC0tLSBQdWJsaWMgQ29udHJvbHMgLS0tXG5cbiAgICAvKipcbiAgICAgKiBcdTUyMDdcdTYzNjJcdTVGMTVcdTY0Q0VcdTc2ODRcdThGRDBcdTg4NEMvXHU2NjgyXHU1MDVDXHU3MkI2XHU2MDAxXG4gICAgICovXG4gICAgcHVibGljIHRvZ2dsZUVuZ2luZVN0YXRlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU2REZCXHU1MkEwXHU1MzU1XHU0RTJBXHU2OTgyXHU1RkY1XHU1MjMwXHU5NjFGXHU1MjE3XHVGRjBDXHU1RTc2XHU2NjNFXHU3OTNBXHU5MDFBXHU3N0U1XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFx1NjYyRlx1NTQyNlx1NjIxMFx1NTI5Rlx1NkRGQlx1NTJBMFxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRDb25jZXB0VG9RdWV1ZShjb25jZXB0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYWRkZWQgPSB0aGlzLmFkZENvbmNlcHRzVG9RdWV1ZShbY29uY2VwdF0pO1xuICAgICAgICBpZiAoYWRkZWQgPiAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGAnJHtjb25jZXB0fScgXHU1REYyXHU2REZCXHU1MkEwXHU1MjMwXHU3NTFGXHU2MjEwXHU5NjFGXHU1MjE3XHUzMDAyYCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbmV3IE5vdGljZShgJyR7Y29uY2VwdH0nIFx1NURGMlx1NUI1OFx1NTcyOFx1NEU4RVx1OTYxRlx1NTIxN1x1NjIxNlx1NEVEM1x1NUU5M1x1NEUyRFx1RkYwQ1x1NjcyQVx1NkRGQlx1NTJBMFx1MzAwMmApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU2REZCXHU1MkEwXHU1OTFBXHU0RTJBXHU2OTgyXHU1RkY1XHU1MjMwXHU3NTFGXHU2MjEwXHU5NjFGXHU1MjE3XHVGRjBDXHU0RjFBXHU4RkRCXHU4ODRDXHU1M0JCXHU5MUNEXHU1NDhDXHU2OEMwXHU2N0U1XHU2NTg3XHU0RUY2XHU2NjJGXHU1NDI2XHU1QjU4XHU1NzI4XG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gY29uY2VwdHMgLSBcdTg5ODFcdTZERkJcdTUyQTBcdTc2ODRcdTY5ODJcdTVGRjVcdTUyMTdcdTg4NjhcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBcdTVCOUVcdTk2NDVcdTZERkJcdTUyQTBcdTc2ODRcdTY1QjBcdTY5ODJcdTVGRjVcdTY1NzBcdTkxQ0ZcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkQ29uY2VwdHNUb1F1ZXVlKGNvbmNlcHRzOiBzdHJpbmdbXSk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRRdWV1ZSA9IG5ldyBTZXQodGhpcy5wbHVnaW4uZGF0YS5nZW5lcmF0aW9uUXVldWUpO1xuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTRFMDBcdTRFMkEgU2V0XHVGRjBDXHU1MzA1XHU1NDJCXHU2MjQwXHU2NzA5XHU1REYyXHU1QjU4XHU1NzI4XHU3QjE0XHU4QkIwXHU3Njg0IGJhc2VuYW1lIChcdTY1RTAgLm1kIFx1NTQwRVx1N0YwMClcbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlcyA9IG5ldyBTZXQodGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLm1hcChmID0+IGYuYmFzZW5hbWUpKTtcblxuICAgICAgICBsZXQgYWRkZWRDb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgY29uY2VwdCBvZiBjb25jZXB0cykge1xuICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVkID0gc2FuaXRpemVGaWxlbmFtZShjb25jZXB0KTtcbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1RkYxQTEuIFx1OTYxRlx1NTIxN1x1NEUyRFx1NkNBMVx1NjcwOSAyLiBcdTRFRDNcdTVFOTNcdTRFMkRcdTRFNUZcdTZDQTFcdTY3MDlcdTU0MENcdTU0MERcdTY1ODdcdTRFRjZcbiAgICAgICAgICAgIGlmICghY3VycmVudFF1ZXVlLmhhcyhjb25jZXB0KSAmJiAhZXhpc3RpbmdGaWxlcy5oYXMoc2FuaXRpemVkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGEuZ2VuZXJhdGlvblF1ZXVlLnB1c2goY29uY2VwdCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlLmFkZChjb25jZXB0KTsgLy8gXHU0RkREXHU4QkMxXHU1NzI4XHU1MzU1XHU2QjIxXHU4QzAzXHU3NTI4XHU0RTJEXHU0RTVGXHU0RTBEXHU5MUNEXHU1OTBEXHU2REZCXHU1MkEwXG4gICAgICAgICAgICAgICAgYWRkZWRDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFkZGVkQ291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyAvLyBcdTRGRERcdTVCNThcdTY2RjRcdTY1QjBcdTU0MEVcdTc2ODRcdTk2MUZcdTUyMTdcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFkZGVkQ291bnQ7XG4gICAgfVxuXG4gICAgLy8gLS0tIENvcmUgTG9vcCAtLS1cblxuICAgIC8qKlxuICAgICAqIFx1NTQyRlx1NTJBOFx1NUYxNVx1NjRDRVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc3RhcnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLmlzUnVubmluZykgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgICAgIHRoaXMucGx1Z2luLmRhdGEuc3RhdHVzID0gXCJydW5uaW5nXCI7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTc3RTVcdThCQzZcdTU2RkVcdThDMzFcdTVGMTVcdTY0Q0VcdTVERjJcdTU0MkZcdTUyQThcdUZGMDFcIik7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIC8vIFx1N0FDQlx1NTM3M1x1NUYwMFx1NTlDQlx1N0IyQ1x1NEUwMFx1NkIyMSB0aWNrXG4gICAgICAgIHRoaXMudGljaygpOyBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTUwNUNcdTZCNjJcdTVGMTVcdTY0Q0VcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0b3AoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5zdGF0dXMgPSBcInBhdXNlZFwiO1xuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbmV3IE5vdGljZShcIlx1NzdFNVx1OEJDNlx1NTZGRVx1OEMzMVx1NUYxNVx1NjRDRVx1NURGMlx1NjY4Mlx1NTA1Q1x1MzAwMlwiKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTsgLy8gXHU1NzI4XHU2NjgyXHU1MDVDXHU2NUY2XHU0RkREXHU1QjU4XHU3MkI2XHU2MDAxXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1Qjg5XHU2MzkyXHU0RTBCXHU0RTAwXHU0RTJBIHRpY2tcbiAgICAgKi9cbiAgICBwcml2YXRlIHNjaGVkdWxlTmV4dFRpY2soKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHJldHVybjtcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXF1ZXN0X2RlbGF5ICogMTAwMDtcbiAgICAgICAgdGhpcy50aW1lcklkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpY2soKSwgZGVsYXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFx1NUYxNVx1NjRDRVx1NzY4NFx1NjgzOFx1NUZDM1x1MjAxQ1x1NUZDM1x1OERGM1x1MjAxRFxuICAgICAqIFx1NUI4M1x1NEYxQVx1NjMwOVx1NEYxOFx1NTE0OFx1N0VBN1x1RkYwOFx1NEZFRVx1NkI2MyA+IFx1NUJBMVx1NjgzOCA+IFx1NzUxRlx1NjIxMFx1RkYwOVx1NTkwNFx1NzQwNlx1NEUwMFx1NEUyQVx1NjI3OVx1NkIyMVx1NzY4NFx1NEVGQlx1NTJBMVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdGljaygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykgcmV0dXJuO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgdGFza1Byb2Nlc3NlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyAxLiBcdTRGMThcdTUxNDhcdTU5MDRcdTc0MDZcdTRGRUVcdTZCNjNcdTk2MUZcdTUyMTdcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5kYXRhLnJldmlzaW9uUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRhc2tQcm9jZXNzZWQgPSBhd2FpdCB0aGlzLnJ1blJldmlzaW9uUGhhc2UoKTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAvLyAyLiBcdTUxNzZcdTZCMjFcdTU5MDRcdTc0MDZcdTVCQTFcdTY4MzhcdTk2MUZcdTUyMTdcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGx1Z2luLmRhdGEucmV2aWV3UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRhc2tQcm9jZXNzZWQgPSBhd2FpdCB0aGlzLnJ1bkNyaXRpY1BoYXNlKCk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgLy8gMy4gXHU2NzAwXHU1NDBFXHU1OTA0XHU3NDA2XHU3NTFGXHU2MjEwXHU5NjFGXHU1MjE3XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBsdWdpbi5kYXRhLmdlbmVyYXRpb25RdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGFza1Byb2Nlc3NlZCA9IGF3YWl0IHRoaXMucnVuR2VuZXJhdGlvblBoYXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjI0MFx1NjcwOVx1NURFNVx1NEY1Q1x1OTBGRFx1NUI4Q1x1NjIxMFx1NEU4NlxuICAgICAgICAgICAgaWYgKCF0YXNrUHJvY2Vzc2VkICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5nZW5lcmF0aW9uUXVldWUubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5yZXZpZXdRdWV1ZS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnJldmlzaW9uUXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlx1RDgzQ1x1REY4OSBcdTYyNDBcdTY3MDlcdTRFRkJcdTUyQTFcdTVCOENcdTYyMTBcdUZGMDFcdTVGMTVcdTY0Q0VcdTVERjJcdTUwNUNcdTZCNjJcdTMwMDJcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnN0YXR1cyA9IFwiaWRsZVwiOyAvLyBcdTUzRDhcdTRFM0FcdTdBN0FcdTk1RjJcdTcyQjZcdTYwMDFcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVQbHVnaW5EYXRhKCk7IC8vIFx1NEZERFx1NUI1OFx1NjcwMFx1N0VDOFx1NzJCNlx1NjAwMVxuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gXHU1MDVDXHU2QjYyIHRpY2sgXHU1RkFBXHU3M0FGXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdTVGMTVcdTY0Q0UgVGljayBcdTUzRDFcdTc1MUZcdTRFMjVcdTkxQ0RcdTk1MTlcdThCRUY6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJcdTVGMTVcdTY0Q0VcdTkwNDdcdTUyMzBcdTk1MTlcdThCRUZcdUZGMENcdTVERjJcdTY2ODJcdTUwNUNcdTMwMDJcdThCRjdcdTY4QzBcdTY3RTVcdTYzQTdcdTUyMzZcdTUzRjBcdTMwMDJcIik7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTsgLy8gXHU1M0QxXHU3NTFGXHU0RTI1XHU5MUNEXHU5NTE5XHU4QkVGXHU2NUY2XHU1MDVDXHU2QjYyXHU1RjE1XHU2NENFXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTVGMTVcdTY0Q0VcdTRFQ0RcdTU3MjhcdThGRDBcdTg4NENcdUZGMENcdTVCODlcdTYzOTJcdTRFMEJcdTRFMDBcdTRFMkEgdGlja1xuICAgICAgICB0aGlzLnNjaGVkdWxlTmV4dFRpY2soKTtcbiAgICB9XG5cbiAgICAvLyAtLS0gUGhhc2VzIC0tLVxuXG4gICAgLyoqXG4gICAgICogXHU4RkQwXHU4ODRDXHUyMDFDXHU3NTFGXHU2MjEwXHUyMDFEXHU5NjM2XHU2QkI1XG4gICAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFx1NjYyRlx1NTQyNlx1NTkwNFx1NzQwNlx1NEU4Nlx1NEVGQlx1NTJBMVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcnVuR2VuZXJhdGlvblBoYXNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBxdWV1ZSA9IHRoaXMucGx1Z2luLmRhdGEuZ2VuZXJhdGlvblF1ZXVlO1xuICAgICAgICBpZiAocXVldWUubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VuZXJhdGlvbl9iYXRjaF9zaXplO1xuICAgICAgICAvLyBcdTUzRDZcdTUxRkFcdTRFMDBcdTRFMkFcdTYyNzlcdTZCMjFcdTc2ODRcdTRFRkJcdTUyQTFcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBxdWV1ZS5zcGxpY2UoMCwgTWF0aC5taW4ocXVldWUubGVuZ3RoLCBiYXRjaFNpemUpKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1c0JhcigpO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyAvLyBcdTRGRERcdTVCNThcdTVERjJcdTUzRDZcdTUxRkFcdTc2ODRcdTk2MUZcdTUyMTdcdTcyQjZcdTYwMDFcblxuICAgICAgICAvLyBcdTVFNzZcdTg4NENcdTU5MDRcdTc0MDZcdThGRDlcdTRFMDBcdTYyNzlcdTZCMjFcdTc2ODRcdTYyNDBcdTY3MDlcdTRFRkJcdTUyQTFcbiAgICAgICAgY29uc3QgdGFza3MgPSBiYXRjaC5tYXAoaWRlYSA9PiB0aGlzLmdlbmVyYXRpb25UYXNrKGlkZWEpKTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHRhc2tzKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyAvLyBcdTRGRERcdTVCNThcdTRFRkJcdTUyQTFcdTdFRDNcdTY3OUNcdUZGMDhcdThGREJcdTUxNjVcdTVCQTFcdTY4MzhcdTk2MUZcdTUyMTdcdUZGMDlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1MzU1XHU0RTJBXHU3NTFGXHU2MjEwXHU0RUZCXHU1MkExXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0aW9uVGFzayhpZGVhOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbXB0X2dlbmVyYXRvci5yZXBsYWNlKFwie2NvbmNlcHR9XCIsIGlkZWEpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBpSGFuZGxlci5jYWxsKHByb21wdCk7XG4gICAgICAgICAgICBjb25zdCBjbGVhbmVkQ29udGVudCA9IGNsZWFuTWFya2Rvd25PdXRwdXQoY29udGVudCk7XG4gICAgICAgICAgICAvLyBcdTYyMTBcdTUyOUZcdTU0MEVcdUZGMENcdTY1M0VcdTUxNjVcdTVCQTFcdTY4MzhcdTk2MUZcdTUyMTdcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGEucmV2aWV3UXVldWUucHVzaCh7IGlkZWEsIGNvbnRlbnQ6IGNsZWFuZWRDb250ZW50IH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFx1MjcwNSBbXHU3NTFGXHU2MjEwXHU2MjEwXHU1MjlGXTogJHtpZGVhfWApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEFsbE1vZGVsc0ZhaWxlZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIFtcdTc1MUZcdTYyMTBcdTU5MzFcdThEMjVdOiAke2lkZWF9IC0gJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgLy8gXHU1OTMxXHU4RDI1XHU1NDBFXHVGRjBDXHU2NTNFXHU1NkRFXHU5NjFGXHU1MjE3XHU1OTM0XHU5MEU4XHVGRjBDXHU0RTBCXHU2QjIxXHU0RjE4XHU1MTQ4XHU5MUNEXHU4QkQ1XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5nZW5lcmF0aW9uUXVldWUudW5zaGlmdChpZGVhKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdThGRDBcdTg4NENcdTIwMUNcdTVCQTFcdTY4MzhcdTIwMURcdTk2MzZcdTZCQjVcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gXHU2NjJGXHU1NDI2XHU1OTA0XHU3NDA2XHU0RTg2XHU0RUZCXHU1MkExXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBydW5Dcml0aWNQaGFzZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgY29uc3QgcXVldWUgPSB0aGlzLnBsdWdpbi5kYXRhLnJldmlld1F1ZXVlO1xuICAgICAgICBpZiAocXVldWUubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VuZXJhdGlvbl9iYXRjaF9zaXplO1xuICAgICAgICBjb25zdCB0YXNrc1RvUmV2aWV3ID0gcXVldWUuc3BsaWNlKDAsIE1hdGgubWluKHF1ZXVlLmxlbmd0aCwgYmF0Y2hTaXplKSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVBsdWdpbkRhdGEoKTsgLy8gXHU0RkREXHU1QjU4XHU1REYyXHU1M0Q2XHU1MUZBXHU3Njg0XHU5NjFGXHU1MjE3XHU3MkI2XHU2MDAxXG5cbiAgICAgICAgbGV0IG5ld0lkZWFzRm91bmQ6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrc1RvUmV2aWV3KSB7XG4gICAgICAgICAgICBjb25zdCB7IGlzQXBwcm92ZWQsIHJlYXNvbiB9ID0gYXdhaXQgdGhpcy5jcml0aWMuanVkZ2UodGFzay5jb250ZW50KTtcbiAgICAgICAgICAgIGlmIChpc0FwcHJvdmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gMS4gXHU2Mjc5XHU1MUM2XHVGRjFBXHU0RkREXHU1QjU4XHU3QjE0XHU4QkIwXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlTm90ZSh0YXNrLmlkZWEsIHRhc2suY29udGVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHUzMDEwXHUzMDEwXHUzMDEwIFx1NEZFRVx1NjUzOVx1NzBCOSBcdTMwMTFcdTMwMTFcdTMwMTFcbiAgICAgICAgICAgICAgICAvLyBcdTRFQzVcdTU3MjhcdTVGMDBcdTUxNzNcdTVGMDBcdTU0MkZcdTY1RjZcdTYyNERcdTYzRDBcdTUzRDZcdTY1QjBcdTY5ODJcdTVGRjVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXh0cmFjdF9uZXdfY29uY2VwdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWRlYXMgPSBleHRyYWN0TmV3SWRlYXModGFzay5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWRlYXMuZm9yRWFjaCgoaWRlYSkgPT4gbmV3SWRlYXNGb3VuZC5hZGQoaWRlYSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBcdTMwMTBcdTMwMTBcdTMwMTAgXHU0RkVFXHU2NTM5XHU3RUQzXHU2NzVGIFx1MzAxMVx1MzAxMVx1MzAxMVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REM0RCBbXHU1QkExXHU2ODM4XHU5MDFBXHU4RkM3XTogJHt0YXNrLmlkZWF9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIDIuIFx1NjJEMlx1N0VERFx1RkYxQVx1OEJCRVx1N0Y2RVx1NTM5Rlx1NTZFMFx1RkYwQ1x1NTg5RVx1NTJBMFx1OTFDRFx1OEJENVx1NkIyMVx1NjU3MFx1RkYwQ1x1NjUzRVx1NTE2NVx1NEZFRVx1NkI2M1x1OTYxRlx1NTIxN1xuICAgICAgICAgICAgICAgIHRhc2sucmVhc29uID0gcmVhc29uO1xuICAgICAgICAgICAgICAgIHRhc2sucmV0cmllcyA9ICh0YXNrLnJldHJpZXMgfHwgMCkgKyAxO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRhdGEucmV2aXNpb25RdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXHVEODNEXHVEQzRFIFtcdTVCQTFcdTY4MzhcdTYyRDJcdTdFRERdOiAke3Rhc2suaWRlYX0gLSAke3JlYXNvbn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTNEMVx1NzNCMFx1NEU4Nlx1NjVCMFx1Njk4Mlx1NUZGNVx1RkYwQ1x1NUMwNlx1NUI4M1x1NEVFQ1x1NkRGQlx1NTJBMFx1NTIzMFx1NzUxRlx1NjIxMFx1OTYxRlx1NTIxN1x1NEUyRFxuICAgICAgICBpZiAobmV3SWRlYXNGb3VuZC5zaXplID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hZGRDb25jZXB0c1RvUXVldWUoQXJyYXkuZnJvbShuZXdJZGVhc0ZvdW5kKSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyAvLyBcdTRGRERcdTVCNThcdTVCQTFcdTY4MzgvXHU0RkVFXHU2QjYzL1x1NzUxRlx1NjIxMFx1OTYxRlx1NTIxN1x1NzY4NFx1NTNEOFx1NTJBOFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdThGRDBcdTg4NENcdTIwMUNcdTRGRUVcdTZCNjNcdTIwMURcdTk2MzZcdTZCQjVcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gXHU2NjJGXHU1NDI2XHU1OTA0XHU3NDA2XHU0RTg2XHU0RUZCXHU1MkExXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBydW5SZXZpc2lvblBoYXNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBxdWV1ZSA9IHRoaXMucGx1Z2luLmRhdGEucmV2aXNpb25RdWV1ZTtcbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbmVyYXRpb25fYmF0Y2hfc2l6ZTtcbiAgICAgICAgY29uc3QgdGFza3NUb1JldmlzZSA9IHF1ZXVlLnNwbGljZSgwLCBNYXRoLm1pbihxdWV1ZS5sZW5ndGgsIGJhdGNoU2l6ZSkpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVQbHVnaW5EYXRhKCk7IC8vIFx1NEZERFx1NUI1OFx1NURGMlx1NTNENlx1NTFGQVx1NzY4NFx1OTYxRlx1NTIxN1x1NzJCNlx1NjAwMVxuXG4gICAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrc1RvUmV2aXNlKSB7XG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdThGQkVcdTUyMzBcdTY3MDBcdTU5MjdcdTkxQ0RcdThCRDVcdTZCMjFcdTY1NzBcbiAgICAgICAgICAgIGlmICgodGFzay5yZXRyaWVzIHx8IDApID49IHRoaXMucGx1Z2luLnNldHRpbmdzLm1heF9yZXZpc2lvbl9yZXRyaWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGF0YS5kaXNjYXJkZWRQaWxlLnB1c2godGFzayk7IC8vIFx1NjUzRVx1NTE2NVx1NEUyMlx1NUYwM1x1NTgwNlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1RDgzRFx1REM4MCBbXHU2NTNFXHU1RjAzXHU0RkVFXHU2QjYzXTogJHt0YXNrLmlkZWF9IFx1NURGMlx1OEZCRVx1NjcwMFx1NTkyN1x1OTFDRFx1OEJENVx1NkIyMVx1NjU3MFx1MzAwMmApO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBcdTRFMERcdTUxOERcdTU5MDRcdTc0MDZcdTZCNjRcdTRFRkJcdTUyQTFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFx1NjcyQVx1OEZCRVx1NTIzMFx1NkIyMVx1NjU3MFx1RkYwQ1x1NjI2N1x1ODg0Q1x1NEZFRVx1NkI2M1x1NEVGQlx1NTJBMVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXZpc2lvblRhc2sodGFzayk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlUGx1Z2luRGF0YSgpOyAvLyBcdTRGRERcdTVCNThcdTRFRkJcdTUyQTFcdTdFRDNcdTY3OUNcdUZGMDhcdThGREJcdTUxNjVcdTVCQTFcdTY4MzhcdTk2MUZcdTUyMTdcdTYyMTZcdTRFMjJcdTVGMDNcdTU4MDZcdUZGMDlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXHU1MzU1XHU0RTJBXHU0RkVFXHU2QjYzXHU0RUZCXHU1MkExXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyByZXZpc2lvblRhc2sodGFzazogVGFza0RhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5yZXZpc2VyLmNyZWF0ZVJldmlzaW9uUHJvbXB0KHRhc2suaWRlYSwgdGFzay5jb250ZW50LCB0YXNrLnJlYXNvbiB8fCBcIlx1NjcyQVx1NzdFNVx1NTM5Rlx1NTZFMFwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwaUhhbmRsZXIuY2FsbChwcm9tcHQpO1xuICAgICAgICAgICAgY29uc3QgY2xlYW5lZENvbnRlbnQgPSBjbGVhbk1hcmtkb3duT3V0cHV0KG5ld0NvbnRlbnQpO1xuICAgICAgICAgICAgY29uc3QgcmV2aXNlZFRhc2s6IFRhc2tEYXRhID0geyAuLi50YXNrLCBjb250ZW50OiBjbGVhbmVkQ29udGVudCB9O1xuICAgICAgICAgICAgLy8gXHU0RkVFXHU2QjYzXHU1NDBFXHVGRjBDXHU2NTNFXHU1NkRFXHU1QkExXHU2ODM4XHU5NjFGXHU1MjE3XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnJldmlld1F1ZXVlLnB1c2gocmV2aXNlZFRhc2spOyBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMDQgW1x1NEZFRVx1NkI2M1x1NUI4Q1x1NjIxMF06ICR7dGFzay5pZGVhfWApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgW1x1NEZFRVx1NkI2M1x1NTkzMVx1OEQyNV06ICR7dGFzay5pZGVhfSAtICR7ZS5tZXNzYWdlfWApO1xuICAgICAgICAgICAgLy8gXHU1OTMxXHU4RDI1XHU1NDBFXHVGRjBDXHU2NTNFXHU1NkRFXHU0RkVFXHU2QjYzXHU5NjFGXHU1MjE3XHU1OTM0XHU5MEU4XHVGRjBDXHU0RTBCXHU2QjIxXHU0RjE4XHU1MTQ4XHU5MUNEXHU4QkQ1XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5kYXRhLnJldmlzaW9uUXVldWUudW5zaGlmdCh0YXNrKTsgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAtLS0gRmlsZSAmIFVJIC0tLVxuXG4gICAgLyoqXG4gICAgICogXHU0RkREXHU1QjU4XHU3QjE0XHU4QkIwXHU1MjMwXHU2NTg3XHU0RUY2XHU3Q0ZCXHU3RURGXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlTm90ZShpZGVhOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHNhbml0aXplRmlsZW5hbWUoaWRlYSk7XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdXRwdXRfZGlyO1xuXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjU4N1x1NEVGNlx1NTkzOVx1NjYyRlx1NTQyNlx1NUI1OFx1NTcyOFx1RkYwQ1x1NEUwRFx1NUI1OFx1NTcyOFx1NTIxOVx1NTIxQlx1NUVGQVxuICAgICAgICBpZiAoISh0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCkgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1NTIxQlx1NUVGQVx1NjU4N1x1NEVGNlx1NTkzOVx1NTkzMVx1OEQyNTogJHtmb2xkZXJQYXRofWAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTY1RTBcdTZDRDVcdTUyMUJcdTVFRkFcdThGOTNcdTUxRkFcdTY1ODdcdTRFRjZcdTU5Mzk6ICR7Zm9sZGVyUGF0aH1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFx1NjVFMFx1NkNENVx1NTIxQlx1NUVGQVx1NjU4N1x1NEVGNlx1NTkzOVx1RkYwQ1x1NTA1Q1x1NkI2Mlx1NEZERFx1NUI1OFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7Zm9sZGVyUGF0aH0vJHtmaWxlbmFtZX0ubWRgKTtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBcdTY1ODdcdTRFRjZcdTVERjJcdTVCNThcdTU3MjhcdUZGMENcdTRGRUVcdTY1MzlcdTUxODVcdTVCQjlcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU3QjE0XHU4QkIwXHU1REYyXHU2NkY0XHU2NUIwOiAke2ZpbGVuYW1lfWApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBcdTY1ODdcdTRFRjZcdTRFMERcdTVCNThcdTU3MjhcdUZGMENcdTUyMUJcdTVFRkFcdTY1QjBcdTY1ODdcdTRFRjZcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1N0IxNFx1OEJCMFx1NURGMlx1NTIxQlx1NUVGQTogJHtmaWxlbmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFx1NEZERFx1NUI1OFx1N0IxNFx1OEJCMFx1NTkzMVx1OEQyNTogJHtmaWxlUGF0aH1gLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTY1RTBcdTZDRDVcdTRGRERcdTVCNThcdTdCMTRcdThCQjA6ICR7ZmlsZW5hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcdTY2RjRcdTY1QjBcdTcyQjZcdTYwMDFcdTY4MEZcdTY2M0VcdTc5M0FcbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlU3RhdHVzQmFyKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnN0YXR1c0JhckVsKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgZ2VuZXJhdGlvblF1ZXVlLCByZXZpZXdRdWV1ZSwgcmV2aXNpb25RdWV1ZSB9ID0gdGhpcy5wbHVnaW4uZGF0YTtcbiAgICAgICAgY29uc3QgdG90YWwgPSBnZW5lcmF0aW9uUXVldWUubGVuZ3RoICsgcmV2aWV3UXVldWUubGVuZ3RoICsgcmV2aXNpb25RdWV1ZS5sZW5ndGg7XG4gICAgICAgIC8vIFx1NzkzQVx1NEY4QjogS0c6IHJ1bm5pbmcgfCBHOjUgfCBDOjIgfCBSOjEgfCBUb3RhbDo4XG4gICAgICAgIHRoaXMucGx1Z2luLnN0YXR1c0JhckVsLnNldFRleHQoXG4gICAgICAgICAgICBgS0c6ICR7dGhpcy5wbHVnaW4uZGF0YS5zdGF0dXN9IHwgRzoke2dlbmVyYXRpb25RdWV1ZS5sZW5ndGh9IHwgQzoke3Jldmlld1F1ZXVlLmxlbmd0aH0gfCBSOiR7cmV2aXNpb25RdWV1ZS5sZW5ndGh9IHwgVG90YWw6JHt0b3RhbH1gXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwgIi8vIGFwaUhhbmRsZXIudHNcbnZhciBpbXBvcnRfb2JzaWRpYW4zID0gcmVxdWlyZShcIm9ic2lkaWFuXCIpO1xuXG4vLyAtLS0gXHUzMDEwXHUzMDEwXHUzMDEwIFx1NEZFRVx1NkI2M1x1RkYxQVx1NkRGQlx1NTJBMCBleHBvcnQgXHUzMDExXHUzMDExXHUzMDExIC0tLVxuZXhwb3J0IHZhciBBcGlLZXlFeGhhdXN0ZWRFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJBcGlLZXlFeGhhdXN0ZWRFcnJvclwiO1xuICB9XG59O1xuXG4vLyAtLS0gXHUzMDEwXHUzMDEwXHUzMDEwIFx1NEZFRVx1NkI2M1x1RkYxQVx1NkRGQlx1NTJBMCBleHBvcnQgXHUzMDExXHUzMDExXHUzMDExIC0tLVxuZXhwb3J0IHZhciBBbGxNb2RlbHNGYWlsZWRFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJBbGxNb2RlbHNGYWlsZWRFcnJvclwiO1xuICB9XG59O1xuXG4vLyAtLS0gXHUzMDEwXHUzMDEwXHUzMDEwIFx1NEZFRVx1NkI2M1x1RkYxQVx1NkRGQlx1NTJBMCBleHBvcnQgXHUzMDExXHUzMDExXHUzMDExIC0tLVxuZXhwb3J0IHZhciBBUElIYW5kbGVyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihwbHVnaW4pIHtcbiAgICB0aGlzLmtleVVzYWdlT3BlbkFJID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLmtleVVzYWdlR29vZ2xlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAvLyBcdTc1MjhcdTRFOEVcdThEREZcdThFMkFcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTkwMUFcdTc3RTVcdThGQzdcdTY1NDVcdTk2OUNcdTUyMDdcdTYzNjJcbiAgICB0aGlzLmhhc05vdGlmaWVkRmFpbG92ZXIgPSBmYWxzZTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuICAgIHRoaXMudXBkYXRlS2V5cygpO1xuICB9XG4gIHVwZGF0ZUtleXMoKSB7XG4gICAgdGhpcy5vcGVuYWlfa2V5cyA9IHRoaXMuc2V0dGluZ3Mub3BlbmFpX2FwaV9rZXlzLnNwbGl0KFwiXFxuXCIpLm1hcCgoaykgPT4gay50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcbiAgICB0aGlzLmdvb2dsZV9rZXlzID0gdGhpcy5zZXR0aW5ncy5nb29nbGVfYXBpX2tleXMuc3BsaXQoXCJcXG5cIikubWFwKChrKSA9PiBrLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgIHRoaXMub3BlbmFpX2tleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBpZiAoIXRoaXMua2V5VXNhZ2VPcGVuQUkuaGFzKGtleSkpIHtcbiAgICAgICAgdGhpcy5rZXlVc2FnZU9wZW5BSS5zZXQoa2V5LCB7IGZhaWxzOiAwLCBjb29sZG93bl91bnRpbDogMCB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmdvb2dsZV9rZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmtleVVzYWdlR29vZ2xlLmhhcyhrZXkpKSB7XG4gICAgICAgIHRoaXMua2V5VXNhZ2VHb29nbGUuc2V0KGtleSwgeyBmYWlsczogMCwgY29vbGRvd25fdW50aWw6IDAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX3NlbGVjdEtleShrZXlzLCBwcm92aWRlcikge1xuICAgIGNvbnN0IGtleVVzYWdlTWFwID0gcHJvdmlkZXIgPT09IFwib3BlbmFpXCIgPyB0aGlzLmtleVVzYWdlT3BlbkFJIDogdGhpcy5rZXlVc2FnZUdvb2dsZTtcbiAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCkgLyAxZTM7XG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgY29uc3QgdXNhZ2UgPSBrZXlVc2FnZU1hcC5nZXQoa2V5KTtcbiAgICAgIGlmICh1c2FnZSAmJiBjdXJyZW50VGltZSA+PSB1c2FnZS5jb29sZG93bl91bnRpbCkge1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvLyAtLS0gXHUzMDEwXHUzMDEwXHUzMDEwIFx1NjVCMFx1NTg5RVx1RkYxQVx1OEY4NVx1NTJBOVx1NTFGRFx1NjU3MCAoQVBJIFx1OEJGN1x1NkM0MikgXHUzMDExXHUzMDExXHUzMDExIC0tLVxuICAvKipcbiAgICogXHU1QjlFXHU5NjQ1XHU2MjY3XHU4ODRDIE9wZW5BSSBBUEkgXHU4QkY3XHU2QzQyXG4gICAqL1xuICBhc3luYyBfbWFrZU9wZW5BSVJlcXVlc3Qoa2V5LCBwcm9tcHQsIG1vZGVsTmFtZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIGltcG9ydF9vYnNpZGlhbjMucmVxdWVzdFVybCkoe1xuICAgICAgdXJsOiBgJHt0aGlzLnNldHRpbmdzLm9wZW5haV9iYXNlX3VybH0vY2hhdC9jb21wbGV0aW9uc2AsXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IGBCZWFyZXIgJHtrZXl9YFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6IG1vZGVsTmFtZSxcbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU0RjIwXHU1MTY1XHU3Njg0IG1vZGVsTmFtZVxuICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHByb21wdCB9XSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMuc2V0dGluZ3MuZ2VuZXJhdGlvbl90ZW1wZXJhdHVyZSxcbiAgICAgICAgbWF4X3Rva2VuczogdGhpcy5zZXR0aW5ncy5nZW5lcmF0aW9uX21heF90b2tlbnNcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQudHJpbSgpO1xuICB9XG4gIC8qKlxuICAgKiBcdTVCOUVcdTk2NDVcdTYyNjdcdTg4NEMgR29vZ2xlIEdlbWluaSBBUEkgXHU4QkY3XHU2QzQyXG4gICAqL1xuICBhc3luYyBfbWFrZUdvb2dsZUFQSVJlcXVlc3Qoa2V5LCBwcm9tcHQsIG1vZGVsTmFtZSkge1xuICAgIGNvbnN0IHVybCA9IGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzLyR7bW9kZWxOYW1lfTpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7a2V5fWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCAoMCwgaW1wb3J0X29ic2lkaWFuMy5yZXF1ZXN0VXJsKSh7XG4gICAgICB1cmwsXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjb250ZW50czogW3sgcGFydHM6IFt7IHRleHQ6IHByb21wdCB9XSB9XSxcbiAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xuICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnNldHRpbmdzLmdlbmVyYXRpb25fdGVtcGVyYXR1cmUsXG4gICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiB0aGlzLnNldHRpbmdzLmdlbmVyYXRpb25fbWF4X3Rva2Vuc1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pO1xuICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uO1xuICAgIGlmICghZGF0YS5jYW5kaWRhdGVzIHx8IGRhdGEuY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSByZXNwb25zZSBpcyBtaXNzaW5nIGNhbmRpZGF0ZXMuIEZ1bGwgcmVzcG9uc2U6IFwiICsgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YS5jYW5kaWRhdGVzWzBdLmNvbnRlbnQucGFydHNbMF0udGV4dC50cmltKCk7XG4gIH1cbiAgLy8gLS0tIFx1MzAxMFx1MzAxMFx1MzAxMCBcdTY1QjBcdTU4OUVcdUZGMUFcdThGODVcdTUyQTlcdTUxRkRcdTY1NzAgKFx1OTUxOVx1OEJFRlx1NTkwNFx1NzQwNikgXHUzMDExXHUzMDExXHUzMDExIC0tLVxuICAvKipcbiAgICogXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU5ODlEXHU1RUE2L1x1Njc0M1x1OTY1MFx1N0M3Qlx1OTUxOVx1OEJFRlxuICAgKi9cbiAgX2lzUXVvdGFFcnJvcihlcnJvcikge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBodHRwU3RhdHVzID0gZXJyb3Iuc3RhdHVzO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICgoX2EgPSBlcnJvci5tZXNzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2EudG9Mb3dlckNhc2UoKSkgfHwgXCJcIjtcbiAgICBpZiAoaHR0cFN0YXR1cyA9PT0gNDAxIHx8IGh0dHBTdGF0dXMgPT09IDQwMyB8fCBodHRwU3RhdHVzID09PSA0MjkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiaW5zdWZmaWNpZW50X3F1b3RhXCIpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcInJhdGUgbGltaXRcIikgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwicXVvdGFcIikgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwicGVybWlzc2lvblwiKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogXHU1MUI3XHU1Mzc0XHU0RTAwXHU0RTJBIEtleVxuICAgKi9cbiAgX2Nvb2xkb3duS2V5KGtleSwgcHJvdmlkZXIpIHtcbiAgICBjb25zdCBrZXlVc2FnZU1hcCA9IHByb3ZpZGVyID09PSBcIm9wZW5haVwiID8gdGhpcy5rZXlVc2FnZU9wZW5BSSA6IHRoaXMua2V5VXNhZ2VHb29nbGU7XG4gICAgY29uc3Qga2V5VXNhZ2UgPSBrZXlVc2FnZU1hcC5nZXQoa2V5KTtcbiAgICBpZiAoa2V5VXNhZ2UpIHtcbiAgICAgIGNvbnNvbGUud2FybihgS2V5IC4uLiR7a2V5LnNsaWNlKC00KX0gKCR7cHJvdmlkZXJ9KSBmYWlsZWQgZHVlIHRvIHF1b3RhL2F1dGggZXJyb3IuIEFwcGx5aW5nIGNvb2xkb3duLmApO1xuICAgICAga2V5VXNhZ2UuY29vbGRvd25fdW50aWwgPSBEYXRlLm5vdygpIC8gMWUzICsgdGhpcy5zZXR0aW5ncy5mYWlsb3Zlcl9jb29sZG93bl9zZWNvbmRzO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogXHU5MUNEXHU3RjZFXHU0RTAwXHU0RTJBIEtleSBcdTc2ODRcdTUxQjdcdTUzNzQgKFx1OEMwM1x1NzUyOFx1NjIxMFx1NTI5Rlx1NjVGNilcbiAgICovXG4gIF9yZXNldENvb2xkb3duKGtleSwgcHJvdmlkZXIpIHtcbiAgICBjb25zdCBrZXlVc2FnZU1hcCA9IHByb3ZpZGVyID09PSBcIm9wZW5haVwiID8gdGhpcy5rZXlVc2FnZU9wZW5BSSA6IHRoaXMua2V5VXNhZ2VHb29nbGU7XG4gICAgY29uc3Qga2V5VXNhZ2UgPSBrZXlVc2FnZU1hcC5nZXQoa2V5KTtcbiAgICBpZiAoa2V5VXNhZ2UpXG4gICAgICBrZXlVc2FnZS5jb29sZG93bl91bnRpbCA9IDA7XG4gICAgdGhpcy5oYXNOb3RpZmllZEZhaWxvdmVyID0gZmFsc2U7XG4gIH1cbiAgLy8gLS0tIFx1MzAxMFx1MzAxMFx1MzAxMCBcdTVERjJcdTkxQ0RcdTY3ODRcdUZGMUFfY2FsbE9wZW5BSSAoXHU1MzA1XHU1NDJCXHU1OTA3XHU3NTI4XHU5MDNCXHU4RjkxKSBcdTMwMTFcdTMwMTFcdTMwMTEgLS0tXG4gIGFzeW5jIF9jYWxsT3BlbkFJKGtleSwgcHJvbXB0KSB7XG4gICAgY29uc3QgcHJpbWFyeU1vZGVsID0gdGhpcy5zZXR0aW5ncy5vcGVuYWlfbW9kZWw7XG4gICAgY29uc3QgYmFja3VwTW9kZWwgPSB0aGlzLnNldHRpbmdzLm9wZW5haV9iYWNrdXBfbW9kZWw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX21ha2VPcGVuQUlSZXF1ZXN0KGtleSwgcHJvbXB0LCBwcmltYXJ5TW9kZWwpO1xuICAgICAgdGhpcy5fcmVzZXRDb29sZG93bihrZXksIFwib3BlbmFpXCIpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChwcmltYXJ5RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgT3BlbkFJIHByaW1hcnkgbW9kZWwgJyR7cHJpbWFyeU1vZGVsfScgZmFpbGVkIGZvciBrZXkgLi4uJHtrZXkuc2xpY2UoLTQpfTpgLCBwcmltYXJ5RXJyb3IubWVzc2FnZSk7XG4gICAgICBpZiAodGhpcy5faXNRdW90YUVycm9yKHByaW1hcnlFcnJvcikgJiYgYmFja3VwTW9kZWwpIHtcbiAgICAgICAgbmV3IGltcG9ydF9vYnNpZGlhbjMuTm90aWNlKGBcXHU2QTIxXFx1NTc4QiAke3ByaW1hcnlNb2RlbH0gXFx1NTkzMVxcdThEMjVcXHVGRjBDXFx1ODFFQVxcdTUyQThcXHU1QzFEXFx1OEJENVxcdTU5MDdcXHU3NTI4XFx1NkEyMVxcdTU3OEIgJHtiYWNrdXBNb2RlbH0uLi5gKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBiYWNrdXBSZXN1bHQgPSBhd2FpdCB0aGlzLl9tYWtlT3BlbkFJUmVxdWVzdChrZXksIHByb21wdCwgYmFja3VwTW9kZWwpO1xuICAgICAgICAgIHRoaXMuX3Jlc2V0Q29vbGRvd24oa2V5LCBcIm9wZW5haVwiKTtcbiAgICAgICAgICByZXR1cm4gYmFja3VwUmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChiYWNrdXBFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYE9wZW5BSSBiYWNrdXAgbW9kZWwgJyR7YmFja3VwTW9kZWx9JyBhbHNvIGZhaWxlZCBmb3Iga2V5IC4uLiR7a2V5LnNsaWNlKC00KX06YCwgYmFja3VwRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzUXVvdGFFcnJvcihiYWNrdXBFcnJvcikpIHtcbiAgICAgICAgICAgIHRoaXMuX2Nvb2xkb3duS2V5KGtleSwgXCJvcGVuYWlcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IG5ldyBBcGlLZXlFeGhhdXN0ZWRFcnJvcihgT3BlbkFJIGtleSBmYWlsZWQgKGJvdGggcHJpbWFyeSBhbmQgYmFja3VwIG1vZGVscykuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9pc1F1b3RhRXJyb3IocHJpbWFyeUVycm9yKSkge1xuICAgICAgICB0aGlzLl9jb29sZG93bktleShrZXksIFwib3BlbmFpXCIpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEFwaUtleUV4aGF1c3RlZEVycm9yKGBPcGVuQUkga2V5IGZhaWxlZDogJHtwcmltYXJ5RXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cbiAgLy8gLS0tIFx1MzAxMFx1MzAxMFx1MzAxMCBcdTVERjJcdTkxQ0RcdTY3ODRcdUZGMUFfY2FsbEdvb2dsZUFQSSAoXHU1MzA1XHU1NDJCXHU1OTA3XHU3NTI4XHU5MDNCXHU4RjkxKSBcdTMwMTFcdTMwMTFcdTMwMTEgLS0tXG4gIGFzeW5jIF9jYWxsR29vZ2xlQVBJKGtleSwgcHJvbXB0KSB7XG4gICAgY29uc3QgcHJpbWFyeU1vZGVsID0gdGhpcy5zZXR0aW5ncy5nb29nbGVfbW9kZWw7XG4gICAgY29uc3QgYmFja3VwTW9kZWwgPSB0aGlzLnNldHRpbmdzLmdvb2dsZV9iYWNrdXBfbW9kZWw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX21ha2VHb29nbGVBUElSZXF1ZXN0KGtleSwgcHJvbXB0LCBwcmltYXJ5TW9kZWwpO1xuICAgICAgdGhpcy5fcmVzZXRDb29sZG93bihrZXksIFwiZ29vZ2xlXCIpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChwcmltYXJ5RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgR29vZ2xlIHByaW1hcnkgbW9kZWwgJyR7cHJpbWFyeU1vZGVsfScgZmFpbGVkIGZvciBrZXkgLi4uJHtrZXkuc2xpY2UoLTQpfTpgLCBwcmltYXJ5RXJyb3IubWVzc2FnZSk7XG4gICAgICBpZiAodGhpcy5faXNRdW90YUVycm9yKHByaW1hcnlFcnJvcikgJiYgYmFja3VwTW9kZWwpIHtcbiAgICAgICAgbmV3IGltcG9ydF9vYnNpZGlhbjMuTm90aWNlKGBcXHU2QTIxXFx1NTc4QiAke3ByaW1hcnlNb2RlbH0gXFx1NTkzMVxcdThEMjVcXHVGRjBDXFx1ODFFQVxcdTUyQThcXHU1QzFEXFx1OEJENVxcdTU5MDdcXHU3NTI4XFx1NkEyMVxcdTU3OEIgJHtiYWNrdXBNb2RlbH0uLi5gKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBiYWNrdXBSZXN1bHQgPSBhd2FpdCB0aGlzLl9tYWtlR29vZ2xlQVBJUmVxdWVzdChrZXksIHByb21wdCwgYmFja3VwTW9kZWwpO1xuICAgICAgICAgIHRoaXMuX3Jlc2V0Q29vbGRvd24oa2V5LCBcImdvb2dsZVwiKTtcbiAgICAgICAgICByZXR1cm4gYmFja3VwUmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChiYWNrdXBFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEdvb2dsZSBiYWNrdXAgbW9kZWwgJyR7YmFja3VwTW9kZWx9JyBhbHNvIGZhaWxlZCBmb3Iga2V5IC4uLiR7a2V5LnNsaWNlKC00KX06YCwgYmFja3VwRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzUXVvdGFFcnJvcihiYWNrdXBFcnJvcikpIHtcbiAgICAgICAgICAgIHRoaXMuX2Nvb2xkb3duS2V5KGtleSwgXCJnb29nbGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IG5ldyBBcGlLZXlFeGhhdXN0ZWRFcnJvcihgR29vZ2xlIGtleSBmYWlsZWQgKGJvdGggcHJpbWFyeSBhbmQgYmFja3VwIG1vZGVscykuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9pc1F1b3RhRXJyb3IocHJpbWFyeUVycm9yKSkge1xuICAgICAgICB0aGlzLl9jb29sZG93bktleShrZXksIFwiZ29vZ2xlXCIpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEFwaUtleUV4aGF1c3RlZEVycm9yKGBHb29nbGUga2V5IGZhaWxlZDogJHtwcmltYXJ5RXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cbiAgLy8gLS0tIFx1MzAxMFx1MzAxMFx1MzAxMCBjYWxsIFx1NjVCOVx1NkNENVx1NEZERFx1NjMwMVx1NEUwRFx1NTNEOCBcdTMwMTFcdTMwMTFcdTMwMTEgLS0tXG4gIGFzeW5jIGNhbGwocHJvbXB0KSB7XG4gICAgdGhpcy51cGRhdGVLZXlzKCk7XG4gICAgbGV0IGxhc3RFcnJvciA9IG51bGw7XG4gICAgbGV0IG9wZW5BSUtleXNBdHRlbXB0ZWQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5vcGVuYWlfa2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICBvcGVuQUlLZXlzQXR0ZW1wdGVkID0gdHJ1ZTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vcGVuYWlfa2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLl9zZWxlY3RLZXkodGhpcy5vcGVuYWlfa2V5cywgXCJvcGVuYWlcIik7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFRyeWluZyBPcGVuQUkga2V5IC4uLiR7a2V5LnNsaWNlKC00KX1gKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9jYWxsT3BlbkFJKGtleSwgcHJvbXB0KTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsYXN0RXJyb3IgPSBlO1xuICAgICAgICAgICAgbmV3IGltcG9ydF9vYnNpZGlhbjMuTm90aWNlKGBPcGVuQUkga2V5IC4uLiR7a2V5LnNsaWNlKC00KX0gZmFpbGVkLiBUcnlpbmcgbmV4dC5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZ29vZ2xlX2tleXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKG9wZW5BSUtleXNBdHRlbXB0ZWQgJiYgIXRoaXMuaGFzTm90aWZpZWRGYWlsb3Zlcikge1xuICAgICAgICBuZXcgaW1wb3J0X29ic2lkaWFuMy5Ob3RpY2UoXCJBbGwgT3BlbkFJIGtleXMgZmFpbGVkIG9yIHVuYXZhaWxhYmxlLiBTd2l0Y2hpbmcgdG8gR29vZ2xlIEdlbWluaS4uLlwiKTtcbiAgICAgICAgdGhpcy5oYXNOb3RpZmllZEZhaWxvdmVyID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nb29nbGVfa2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLl9zZWxlY3RLZXkodGhpcy5nb29nbGVfa2V5cywgXCJnb29nbGVcIik7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFRyeWluZyBHb29nbGUgR2VtaW5pIGtleSAuLi4ke2tleS5zbGljZSgtNCl9YCk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FsbEdvb2dsZUFQSShrZXksIHByb21wdCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbGFzdEVycm9yID0gZTtcbiAgICAgICAgICAgIG5ldyBpbXBvcnRfb2JzaWRpYW4zLk5vdGljZShgR29vZ2xlIEdlbWluaSBrZXkgLi4uJHtrZXkuc2xpY2UoLTQpfSBmYWlsZWQuIFRyeWluZyBuZXh0LmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgQWxsTW9kZWxzRmFpbGVkRXJyb3IoYEFsbCBBUEkgcHJvdmlkZXJzIGZhaWxlZC4gTGFzdCBlcnJvcjogJHtsYXN0RXJyb3IgPT0gbnVsbCA/IHZvaWQgMCA6IGxhc3RFcnJvci5tZXNzYWdlfWApO1xuICB9XG59O1xuIiwgIi8vIGNyaXRpYy50c1xuXG5pbXBvcnQgS25vd2xlZGdlR3JhcGhQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IEFQSUhhbmRsZXIgfSBmcm9tICcuL2FwaUhhbmRsZXInO1xuXG5leHBvcnQgY2xhc3MgQ3JpdGljIHtcbiAgICBwcml2YXRlIHBsdWdpbjogS25vd2xlZGdlR3JhcGhQbHVnaW47XG4gICAgcHJpdmF0ZSBhcGlIYW5kbGVyOiBBUElIYW5kbGVyO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBLbm93bGVkZ2VHcmFwaFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcGlIYW5kbGVyID0gbmV3IEFQSUhhbmRsZXIocGx1Z2luKTsgLy8gQ3JpdGljIGNhbiBoYXZlIGl0cyBvd24gaGFuZGxlciBpZiBuZWVkZWRcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMganVkZ2UoY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx7IGlzQXBwcm92ZWQ6IGJvb2xlYW4sIHJlYXNvbjogc3RyaW5nIH0+IHtcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNyaXRpY19tb2RlID09PSAnYWknKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fanVkZ2VCeUFJKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9qdWRnZUJ5SGV1cmlzdGljKGNvbnRlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2p1ZGdlQnlIZXVyaXN0aWMoY29udGVudDogc3RyaW5nKTogeyBpc0FwcHJvdmVkOiBib29sZWFuLCByZWFzb246IHN0cmluZyB9IHtcbiAgICAgICAgY29uc3QgcmVhc29uczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgY29udGVudExvd2VyID0gY29udGVudC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIC8vIDEuIENoZWNrIGZvciByZXF1aXJlZCBoZWFkZXJzXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkSGVhZGVycyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNyaXRpY19yZXF1aXJlZF9oZWFkZXJzXG4gICAgICAgICAgICAuc3BsaXQoJ1xcbicpLm1hcChoID0+IGgudHJpbSgpLnRvTG93ZXJDYXNlKCkpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgY29uc3QgbWlzc2luZ0hlYWRlcnMgPSByZXF1aXJlZEhlYWRlcnMuZmlsdGVyKGggPT4gIWNvbnRlbnRMb3dlci5pbmNsdWRlcyhoKSk7XG4gICAgICAgIGlmIChtaXNzaW5nSGVhZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZWFzb25zLnB1c2goYFx1N0YzQVx1NUMxMVx1NUZDNVx1OTcwMFx1NzY4NFx1NjgwN1x1OTg5ODogJHttaXNzaW5nSGVhZGVycy5qb2luKCcsICcpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMi4gQ2hlY2sgZm9yIG1pbiBsZW5ndGhcbiAgICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoIDwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JpdGljX21pbl9jb250ZW50X2xlbmd0aCkge1xuICAgICAgICAgICAgcmVhc29ucy5wdXNoKGBcdTUxODVcdTVCQjlcdThGQzdcdTc3RUQgKFx1NUY1M1x1NTI0RDogJHtjb250ZW50Lmxlbmd0aH0sIFx1ODk4MVx1NkM0MjogJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jcml0aWNfbWluX2NvbnRlbnRfbGVuZ3RofSlgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDMuIENoZWNrIGZvciByZWZ1c2FsIHBhdHRlcm5zXG4gICAgICAgIGNvbnN0IHJlZnVzYWxQYXR0ZXJucyA9IFtcIlx1NEY1Q1x1NEUzQVx1NEUwMD9cdTRFMkFBSVwiLCBcIlx1NEY1Q1x1NEUzQVx1OEJFRFx1OEEwMFx1NkEyMVx1NTc4QlwiLCBcIlx1NjIxMVx1NEUwRFx1ODBGRFwiLCBcIlx1NjIxMVx1NjVFMFx1NkNENVwiLCBcIlx1NUY4OFx1NjJCMVx1NkI0OVwiXTtcbiAgICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHJlZnVzYWxQYXR0ZXJucykge1xuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAocGF0dGVybiwgJ2knKS50ZXN0KGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmVhc29ucy5wdXNoKGBcdTUzMDVcdTU0MkJBSVx1NjJEMlx1N0VERFx1OEJFRCAoXHU1MzM5XHU5MTREOiAnJHtwYXR0ZXJufScpYCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0FwcHJvdmVkOiByZWFzb25zLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgIHJlYXNvbjogcmVhc29ucy5sZW5ndGggPiAwID8gcmVhc29ucy5qb2luKCc7ICcpIDogXCJcdTkwMUFcdThGQzdcdTYyNDBcdTY3MDlcdTU0MkZcdTUzRDFcdTVGMEZcdTg5QzRcdTUyMTlcdTY4QzBcdTY3RTVcdTMwMDJcIlxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2p1ZGdlQnlBSShjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHsgaXNBcHByb3ZlZDogYm9vbGVhbiwgcmVhc29uOiBzdHJpbmcgfT4ge1xuICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9tcHRfY3JpdGljLnJlcGxhY2UoJ3tjb250ZW50fScsIGNvbnRlbnQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUhhbmRsZXIuY2FsbChwcm9tcHQpO1xuICAgICAgICAgICAgY29uc3QgZGVjaXNpb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9ERUNJU0lPTjpcXHMqKEtFRVB8RElTQ0FSRCkvaSk7XG4gICAgICAgICAgICBjb25zdCByZWFzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9cXFtSRUFTT046XFxzKihbXlxcXV0rKVxcXS8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBpc0FwcHJvdmVkID0gZGVjaXNpb25NYXRjaCA/IGRlY2lzaW9uTWF0Y2hbMV0udG9VcHBlckNhc2UoKSA9PT0gJ0tFRVAnIDogZmFsc2U7XG4gICAgICAgICAgICBjb25zdCByZWFzb24gPSByZWFzb25NYXRjaCA/IHJlYXNvbk1hdGNoWzFdLnRyaW0oKSA6IChpc0FwcHJvdmVkID8gXCJBSSBcdTYyNzlcdTUxQzZcIiA6IFwiQUkgXHU2MkQyXHU3RUREXHVGRjBDXHU2NzJBXHU2M0QwXHU0RjlCXHU2NjBFXHU3ODZFXHU3NDA2XHU3NTMxXCIpO1xuXG4gICAgICAgICAgICByZXR1cm4geyBpc0FwcHJvdmVkLCByZWFzb24gfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBSSBDcml0aWMgY2FsbCBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7IGlzQXBwcm92ZWQ6IGZhbHNlLCByZWFzb246IGBBSSBcdTVCQTFcdTY4MzhcdTU2NjhcdThDMDNcdTc1MjhcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZX1gIH07XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLy8gcmV2aXNlci50c1xuXG5pbXBvcnQgS25vd2xlZGdlR3JhcGhQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIFJldmlzZXIge1xuICAgIHByaXZhdGUgcGx1Z2luOiBLbm93bGVkZ2VHcmFwaFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogS25vd2xlZGdlR3JhcGhQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVJldmlzaW9uUHJvbXB0KGlkZWE6IHN0cmluZywgb3JpZ2luYWxDb250ZW50OiBzdHJpbmcsIHJlamVjdGlvblJlYXNvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHByb21wdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByb21wdF9yZXZpc2VyO1xuICAgICAgICBwcm9tcHQgPSBwcm9tcHQucmVwbGFjZSgne2NvbmNlcHR9JywgaWRlYSk7XG4gICAgICAgIHByb21wdCA9IHByb21wdC5yZXBsYWNlKCd7b3JpZ2luYWxfY29udGVudH0nLCBvcmlnaW5hbENvbnRlbnQpO1xuICAgICAgICBwcm9tcHQgPSBwcm9tcHQucmVwbGFjZSgne3JlamVjdGlvbl9yZWFzb259JywgcmVqZWN0aW9uUmVhc29uKTtcbiAgICAgICAgcmV0dXJuIHByb21wdDtcbiAgICB9XG59XG4iLCAiLy8gdXRpbHMudHMgKFx1NTM5Rlx1NTlDQlx1N0EzM1x1NUI5QVx1NzI0OClcblxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRmlsZW5hbWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTYyRUNcdTUzRjdcdTUzQ0FcdTUxNzZcdTUxODVcdTVCQjlcbiAgICBsZXQgY2xlYW5OYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMqXFwoLipcXCkvZywgJycpLnRyaW0oKTtcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTY1ODdcdTRFRjZcdTdDRkJcdTdFREZcdTRFMERcdTUxNDFcdThCQjhcdTc2ODRcdTVCNTdcdTdCMjZcbiAgICBjbGVhbk5hbWUgPSBjbGVhbk5hbWUucmVwbGFjZSgvW1xcXFwvKj86XCI8PnxdL2csIFwiXCIpO1xuICAgIC8vIFx1OTY1MFx1NTIzNlx1OTU3Rlx1NUVBNlxuICAgIHJldHVybiBjbGVhbk5hbWUuc2xpY2UoMCwgMTAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3ROZXdJZGVhcyhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IGNvbnRlbnQubWF0Y2goL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS9nKTtcbiAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvLyBcdTRFQ0UgW1tMaW5rfEFsaWFzXV0gXHU2MjE2IFtbTGlua11dIFx1NEUyRFx1NjNEMFx1NTNENiBcIkxpbmtcIlxuICAgIGNvbnN0IGlkZWFzID0gbWF0Y2hlcy5tYXAobWF0Y2ggPT4ge1xuICAgICAgICByZXR1cm4gbWF0Y2guc2xpY2UoMiwgLTIpLnNwbGl0KCd8JylbMF0udHJpbSgpO1xuICAgIH0pO1xuICAgIHJldHVybiBbLi4ubmV3IFNldChpZGVhcyldOyAvLyBcdThGRDRcdTU2REVcdTUzQkJcdTkxQ0RcdTU0MEVcdTc2ODRcdTdFRDNcdTY3OUNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuTWFya2Rvd25PdXRwdXQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB0cmltbWVkID0gY29udGVudC50cmltKCk7XG4gICAgaWYgKHRyaW1tZWQuc3RhcnRzV2l0aChcImBgYG1hcmtkb3duXCIpICYmIHRyaW1tZWQuZW5kc1dpdGgoXCJgYGBcIikpIHtcbiAgICAgICAgbGV0IGNsZWFuZWQgPSB0cmltbWVkLnN1YnN0cmluZyhcImBgYG1hcmtkb3duXCIubGVuZ3RoLCB0cmltbWVkLmxlbmd0aCAtIFwiYGBgXCIubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIGNsZWFuZWQudHJpbSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJpbW1lZDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBc0U7OztBQ0N0RSxJQUFJLG1CQUFtQixRQUFRLFVBQVU7QUFHekMsSUFBSSxrQkFBa0IsUUFBUSxVQUFVO0FBR3hDLElBQUksdUJBQXVCLGNBQWMsZ0JBQWdCLE1BQU07QUFBQSxFQUM3RCxZQUFZLEtBQUssUUFBUTtBQUN2QixVQUFNLEdBQUc7QUFFVCxTQUFLLGNBQWM7QUFBQSxNQUNqQixLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQUEsSUFDUDtBQUVBLFNBQUssaUJBQWlCO0FBQUEsTUFDcEIsS0FBSztBQUFBO0FBQUEsTUFFTCxLQUFLO0FBQUE7QUFBQSxNQUVMLEtBQUs7QUFBQTtBQUFBLE1BRUwsS0FBSztBQUFBO0FBQUEsSUFFUDtBQUNBLFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFDQSxTQUFTO0FBQ1AsVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixjQUFVLE1BQU07QUFDaEIsY0FBVSxTQUFTLFVBQVU7QUFDN0IsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLDZDQUE2QyxDQUFDO0FBQy9FLFVBQU0sU0FBUyxLQUFLLE9BQU8sS0FBSztBQUNoQyxVQUFNLGFBQWEsaUJBQWlCLE9BQU8sWUFBWSxPQUFPLEtBQUssT0FBTyxZQUFZLFFBQVE7QUFDOUYsUUFBSSxnQkFBZ0IsUUFBUSxTQUFTLEVBQUUsUUFBUSxXQUFXLFlBQVksbUNBQW1DLGdDQUFnQyxFQUFFLFFBQVEsVUFBVSxFQUFFO0FBQUEsTUFDN0osQ0FBQyxXQUFXLE9BQU8sY0FBYyxXQUFXLFlBQVksNkJBQTZCLDBCQUEwQixFQUFFLE9BQU8sV0FBVyxTQUFTLEVBQUUsUUFBUSxNQUFNO0FBQzFKLGFBQUssT0FBTyxPQUFPLGtCQUFrQjtBQUNyQyxhQUFLLE9BQU87QUFBQSxNQUNkLENBQUM7QUFBQSxJQUNIO0FBQ0EsU0FBSztBQUFBLE1BQ0g7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsS0FBSyxPQUFPLEtBQUs7QUFBQSxNQUNqQixLQUFLLHFCQUFxQixLQUFLLElBQUk7QUFBQSxJQUNyQztBQUNBLFNBQUs7QUFBQSxNQUNIO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBLEtBQUssT0FBTyxLQUFLO0FBQUEsTUFDakIsS0FBSyxpQkFBaUIsS0FBSyxJQUFJO0FBQUEsSUFDakM7QUFDQSxTQUFLO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQSxLQUFLLE9BQU8sS0FBSztBQUFBLE1BQ2pCLEtBQUssbUJBQW1CLEtBQUssSUFBSTtBQUFBLElBQ25DO0FBQ0EsU0FBSztBQUFBLE1BQ0g7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsS0FBSyxPQUFPLEtBQUs7QUFBQSxNQUNqQixLQUFLLG9CQUFvQixLQUFLLElBQUk7QUFBQSxJQUNwQztBQUFBLEVBQ0Y7QUFBQSxFQUNBLFVBQVU7QUFDUixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2xCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJQSxtQkFBbUIsYUFBYSxLQUFLLE9BQU8sTUFBTSxVQUFVO0FBQzFELFVBQU0sZUFBZTtBQUNyQixVQUFNLFNBQVMsS0FBSyxZQUFZLEdBQUc7QUFDbkMsVUFBTSxlQUFlLEtBQUssT0FBTyxDQUFDLFNBQVM7QUFDekMsVUFBSSxDQUFDO0FBQ0gsZUFBTztBQUNULFlBQU0sU0FBUyxPQUFPLFlBQVk7QUFDbEMsVUFBSSxPQUFPLFNBQVMsVUFBVTtBQUM1QixlQUFPLEtBQUssWUFBWSxFQUFFLFNBQVMsTUFBTTtBQUFBLE1BQzNDO0FBQ0EsYUFBTyxLQUFLLEtBQUssWUFBWSxFQUFFLFNBQVMsTUFBTTtBQUFBLElBQ2hELENBQUM7QUFDRCxVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLGdCQUFnQixhQUFhO0FBQ25DLFVBQU0sWUFBWSxHQUFHLFVBQVUsZ0JBQWdCLFVBQVUsZ0JBQWdCLFFBQVEsUUFBUTtBQUN6RixVQUFNLFVBQVUsWUFBWSxTQUFTLFNBQVM7QUFDOUMsWUFBUSxPQUFPLEtBQUssZUFBZSxHQUFHO0FBQ3RDLFVBQU0sVUFBVSxRQUFRLFNBQVMsV0FBVyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQy9ELFlBQVEsTUFBTSxhQUFhO0FBQzNCLFlBQVEsTUFBTSxXQUFXO0FBQ3pCLFlBQVEsTUFBTSxTQUFTO0FBQ3ZCLFlBQVEsTUFBTSxVQUFVO0FBQ3hCLFlBQVEsaUJBQWlCLFVBQVUsTUFBTTtBQUN2QyxXQUFLLGVBQWUsR0FBRyxJQUFJLFFBQVE7QUFBQSxJQUNyQyxDQUFDO0FBQ0QsUUFBSSxnQkFBZ0IsUUFBUSxPQUFPLEVBQUUsUUFBUSxnQkFBZ0IsVUFBVSxFQUFFLFFBQVEsQ0FBQyxTQUFTO0FBQ3pGLFdBQUssZUFBZSxtQ0FBbUMsRUFBRSxTQUFTLEtBQUssWUFBWSxHQUFHLENBQUMsRUFBRSxTQUFTLENBQUMsVUFBVTtBQUMzRyxhQUFLLFlBQVksR0FBRyxJQUFJO0FBQ3hCLGFBQUssT0FBTztBQUFBLE1BQ2QsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUNELFVBQU0sZ0JBQWdCLGFBQWEsTUFBTSxHQUFHLFlBQVk7QUFDeEQsUUFBSSxjQUFjLFdBQVcsR0FBRztBQUM5QixZQUFNLE9BQU8sUUFBUSxTQUFTLEtBQUssRUFBRSxNQUFNLHdGQUF3RixLQUFLLDJCQUEyQixDQUFDO0FBQ3BLLFdBQUssTUFBTSxjQUFjO0FBQ3pCO0FBQUEsSUFDRjtBQUNBLFVBQU0sZ0JBQWdCLFFBQVEsVUFBVSxtQkFBbUI7QUFDM0Qsa0JBQWMsTUFBTSxZQUFZO0FBQ2hDLGtCQUFjLE1BQU0sWUFBWTtBQUNoQyxrQkFBYyxNQUFNLFNBQVM7QUFDN0Isa0JBQWMsTUFBTSxVQUFVO0FBQzlCLGtCQUFjLE1BQU0sYUFBYTtBQUNqQyxrQkFBYyxRQUFRLENBQUMsTUFBTSxVQUFVO0FBQ3JDLGVBQVMsZUFBZSxNQUFNLEtBQUs7QUFBQSxJQUNyQyxDQUFDO0FBQ0QsUUFBSSxhQUFhLFNBQVMsY0FBYztBQUN0QyxZQUFNLGdCQUFnQixRQUFRLFNBQVMsS0FBSztBQUFBLFFBQzFDLE1BQU0sZ0NBQWdDLCtCQUErQixhQUFhO0FBQUEsUUFDbEYsS0FBSztBQUFBLE1BQ1AsQ0FBQztBQUNELG9CQUFjLE1BQU0sY0FBYztBQUFBLElBQ3BDO0FBQUEsRUFDRjtBQUFBO0FBQUEsRUFFQSxxQkFBcUIsV0FBVyxNQUFNO0FBQ3BDLFFBQUksZ0JBQWdCLFFBQVEsU0FBUyxFQUFFLFFBQVEsSUFBSSxFQUFFO0FBQUEsTUFDbkQsQ0FBQyxRQUFRLElBQUksUUFBUSxPQUFPLEVBQUUsV0FBVyxnQ0FBZ0MsRUFBRSxRQUFRLFlBQVk7QUFDN0YsY0FBTSxRQUFRLEtBQUssT0FBTyxLQUFLO0FBQy9CLGNBQU0sUUFBUSxNQUFNLFFBQVEsSUFBSTtBQUNoQyxZQUFJLFFBQVEsSUFBSTtBQUNkLGdCQUFNLE9BQU8sT0FBTyxDQUFDO0FBQ3JCLGdCQUFNLEtBQUssT0FBTyxlQUFlO0FBQ2pDLGVBQUssT0FBTyxPQUFPLGdCQUFnQjtBQUNuQyxlQUFLLE9BQU87QUFBQSxRQUNkO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFBQSxFQUNBLGlCQUFpQixXQUFXLE1BQU07QUFDaEMsVUFBTSxPQUFPO0FBQ2IsUUFBSSxnQkFBZ0IsUUFBUSxTQUFTLEVBQUUsUUFBUSxrQkFBa0IsS0FBSyxNQUFNLEVBQUU7QUFBQSxNQUM1RSxDQUFDLFFBQVEsSUFBSSxRQUFRLE9BQU8sRUFBRSxXQUFXLGdDQUFnQyxFQUFFLFFBQVEsWUFBWTtBQUM3RixhQUFLLE9BQU8sS0FBSyxZQUFZLE9BQU8sS0FBSyxPQUFPLEtBQUssWUFBWSxRQUFRLElBQUksR0FBRyxDQUFDO0FBQ2pGLGFBQUssT0FBTyxLQUFLLGNBQWMsS0FBSyxJQUFJO0FBQ3hDLGNBQU0sS0FBSyxPQUFPLGVBQWU7QUFDakMsYUFBSyxPQUFPLE9BQU8sZ0JBQWdCO0FBQ25DLGFBQUssT0FBTztBQUFBLE1BQ2QsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBQUEsRUFDQSxtQkFBbUIsV0FBVyxNQUFNO0FBQ2xDLFVBQU0sT0FBTztBQUNiLFFBQUksZ0JBQWdCLFFBQVEsU0FBUyxFQUFFLFFBQVEsa0JBQWtCLEtBQUssTUFBTSxFQUFFLFFBQVEsaUJBQWlCLEtBQUssVUFBVSxnQkFBZ0IsRUFBRTtBQUFBLE1BQ3RJLENBQUMsUUFBUSxJQUFJLFFBQVEsT0FBTyxFQUFFLFdBQVcsZ0NBQWdDLEVBQUUsUUFBUSxZQUFZO0FBQzdGLGFBQUssT0FBTyxLQUFLLGNBQWMsT0FBTyxLQUFLLE9BQU8sS0FBSyxjQUFjLFFBQVEsSUFBSSxHQUFHLENBQUM7QUFDckYsYUFBSyxPQUFPLEtBQUssY0FBYyxLQUFLLElBQUk7QUFDeEMsY0FBTSxLQUFLLE9BQU8sZUFBZTtBQUNqQyxhQUFLLE9BQU8sT0FBTyxnQkFBZ0I7QUFDbkMsYUFBSyxPQUFPO0FBQUEsTUFDZCxDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0Y7QUFBQSxFQUNBLG9CQUFvQixXQUFXLE1BQU07QUFDbkMsVUFBTSxPQUFPO0FBQ2IsUUFBSSxnQkFBZ0IsUUFBUSxTQUFTLEVBQUUsUUFBUSx3QkFBd0IsS0FBSyxNQUFNLEVBQUUsUUFBUSw2QkFBNkIsS0FBSyxVQUFVLGdCQUFnQixFQUFFO0FBQUEsTUFDeEosQ0FBQyxRQUFRLElBQUksUUFBUSxZQUFZLEVBQUUsV0FBVyxpRUFBaUUsRUFBRSxRQUFRLFlBQVk7QUFDbkksYUFBSyxPQUFPLEtBQUssY0FBYyxPQUFPLEtBQUssT0FBTyxLQUFLLGNBQWMsUUFBUSxJQUFJLEdBQUcsQ0FBQztBQUNyRixhQUFLLE9BQU8sT0FBTyxtQkFBbUIsQ0FBQyxLQUFLLElBQUksQ0FBQztBQUNqRCxhQUFLLE9BQU87QUFBQSxNQUNkLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRjtBQUNGO0FBR0EsSUFBSSwyQkFBMkI7QUFDL0IsSUFBSSx3QkFBd0I7QUFDNUIsSUFBSSx5QkFBeUI7QUFHdEIsSUFBSSxtQkFBbUI7QUFBQTtBQUFBLEVBRTVCLGlCQUFpQjtBQUFBLEVBQ2pCLGlCQUFpQjtBQUFBLEVBQ2pCLGNBQWM7QUFBQSxFQUNkLHFCQUFxQjtBQUFBO0FBQUEsRUFFckIsaUJBQWlCO0FBQUEsRUFDakIsY0FBYztBQUFBLEVBQ2QscUJBQXFCO0FBQUE7QUFBQSxFQUVyQiwyQkFBMkI7QUFBQTtBQUFBLEVBRTNCLHdCQUF3QjtBQUFBLEVBQ3hCLHVCQUF1QjtBQUFBO0FBQUEsRUFFdkIsWUFBWTtBQUFBO0FBQUEsRUFFWixhQUFhO0FBQUEsRUFDYix1QkFBdUI7QUFBQSxFQUN2QixlQUFlO0FBQUE7QUFBQSxFQUVmLGFBQWE7QUFBQSxFQUNiLHlCQUF5QjtBQUFBLEVBQ3pCLDJCQUEyQjtBQUFBO0FBQUEsRUFFM0Isc0JBQXNCO0FBQUE7QUFBQSxFQUV0QixrQkFBa0I7QUFBQSxFQUNsQixlQUFlO0FBQUEsRUFDZixnQkFBZ0I7QUFBQTtBQUFBLEVBRWhCLGNBQWM7QUFBQTtBQUFBO0FBQUEsRUFHZCxzQkFBc0I7QUFDeEI7QUFHQSxlQUFzQixvQkFBb0I7QUFDeEMsU0FBTztBQUFBLElBQ0wsa0JBQWtCO0FBQUEsSUFDbEIsZUFBZTtBQUFBLElBQ2YsZ0JBQWdCO0FBQUEsRUFDbEI7QUFDRjtBQUdPLElBQUksZ0JBQWdCLGNBQWMsaUJBQWlCLGlCQUFpQjtBQUFBLEVBQ3pFLFlBQVksS0FBSyxRQUFRO0FBQ3ZCLFVBQU0sS0FBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFDQSxVQUFVO0FBQ1IsVUFBTSxFQUFFLFlBQVksSUFBSTtBQUN4QixnQkFBWSxNQUFNO0FBQ2xCLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0sNERBQTRELENBQUM7QUFDaEcsUUFBSSxpQkFBaUIsUUFBUSxXQUFXLEVBQUUsUUFBUSxnQ0FBZ0MsRUFBRSxRQUFRLHdHQUF3RyxFQUFFO0FBQUEsTUFDcE0sQ0FBQyxXQUFXLE9BQU8sY0FBYyw0Q0FBNEMsRUFBRSxPQUFPLEVBQUUsUUFBUSxNQUFNO0FBQ3BHLFlBQUkscUJBQXFCLEtBQUssS0FBSyxLQUFLLE1BQU0sRUFBRSxLQUFLO0FBQUEsTUFDdkQsQ0FBQztBQUFBLElBQ0g7QUFDQSxRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLGtCQUFrQixFQUFFLFdBQVc7QUFDakYsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDN0MsUUFBSSxpQkFBaUIsUUFBUSxXQUFXLEVBQUUsUUFBUSxpQkFBaUIsRUFBRSxRQUFRLGtIQUFrSCxFQUFFLFlBQVksQ0FBQyxTQUFTLEtBQUssZUFBZSxRQUFRLEVBQUUsU0FBUyxLQUFLLE9BQU8sU0FBUyxlQUFlLEVBQUUsU0FBUyxPQUFPLFVBQVU7QUFDNVQsV0FBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQ3ZDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNqQyxDQUFDLENBQUM7QUFDRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLGlCQUFpQixFQUFFLFFBQVEsc0lBQXNJLEVBQUUsUUFBUSxDQUFDLFNBQVMsS0FBSyxlQUFlLDJCQUEyQixFQUFFLFNBQVMsS0FBSyxPQUFPLFNBQVMsZUFBZSxFQUFFLFNBQVMsT0FBTyxVQUFVO0FBQy9WLFdBQUssT0FBTyxTQUFTLGtCQUFrQixNQUFNLEtBQUs7QUFDbEQsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2pDLENBQUMsQ0FBQztBQUdGLFFBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsbUNBQW1DLEVBQUUsUUFBUSw4RkFBOEYsRUFBRSxRQUFRLENBQUMsU0FBUyxLQUFLLGVBQWUscUJBQXFCLEVBQUUsU0FBUyxLQUFLLE9BQU8sU0FBUyxZQUFZLEVBQUUsU0FBUyxPQUFPLFVBQVU7QUFDaFUsV0FBSyxPQUFPLFNBQVMsZUFBZSxNQUFNLEtBQUs7QUFDL0MsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2pDLENBQUMsQ0FBQztBQUNGLFFBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsZ0RBQWdELEVBQUUsUUFBUSxpS0FBaUssRUFBRSxRQUFRLENBQUMsU0FBUyxLQUFLLGVBQWUsZUFBZSxFQUFFLFNBQVMsS0FBSyxPQUFPLFNBQVMsbUJBQW1CLEVBQUUsU0FBUyxPQUFPLFVBQVU7QUFDalosV0FBSyxPQUFPLFNBQVMsc0JBQXNCLE1BQU0sS0FBSztBQUN0RCxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDakMsQ0FBQyxDQUFDO0FBRUYsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRCxRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLHdCQUF3QixFQUFFLFFBQVEsb0NBQW9DLEVBQUUsWUFBWSxDQUFDLFNBQVMsS0FBSyxlQUFlLFdBQVcsRUFBRSxTQUFTLEtBQUssT0FBTyxTQUFTLGVBQWUsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUN4UCxXQUFLLE9BQU8sU0FBUyxrQkFBa0I7QUFDdkMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2pDLENBQUMsQ0FBQztBQUdGLFFBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsMENBQTBDLEVBQUUsUUFBUSw4RkFBOEYsRUFBRSxRQUFRLENBQUMsU0FBUyxLQUFLLGVBQWUsdUJBQXVCLEVBQUUsU0FBUyxLQUFLLE9BQU8sU0FBUyxZQUFZLEVBQUUsU0FBUyxPQUFPLFVBQVU7QUFDelUsV0FBSyxPQUFPLFNBQVMsZUFBZSxNQUFNLEtBQUs7QUFDL0MsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2pDLENBQUMsQ0FBQztBQUNGLFFBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsdURBQXVELEVBQUUsUUFBUSxpS0FBaUssRUFBRSxRQUFRLENBQUMsU0FBUyxLQUFLLGVBQWUsZ0JBQWdCLEVBQUUsU0FBUyxLQUFLLE9BQU8sU0FBUyxtQkFBbUIsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUN6WixXQUFLLE9BQU8sU0FBUyxzQkFBc0IsTUFBTSxLQUFLO0FBQ3RELFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNqQyxDQUFDLENBQUM7QUFFRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLHVDQUF1QyxFQUFFLFFBQVEsc0hBQXNILEVBQUUsUUFBUSxDQUFDLFNBQVMsS0FBSyxTQUFTLE9BQU8sS0FBSyxPQUFPLFNBQVMseUJBQXlCLENBQUMsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUMzVSxZQUFNLE1BQU0sU0FBUyxPQUFPLEVBQUU7QUFDOUIsVUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLE9BQU8sR0FBRztBQUMzQixhQUFLLE9BQU8sU0FBUyw0QkFBNEI7QUFDakQsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDO0FBQUEsSUFDRixDQUFDLENBQUM7QUFDRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLDhCQUE4QixFQUFFLFdBQVc7QUFDN0YsUUFBSSxpQkFBaUIsUUFBUSxXQUFXLEVBQUUsUUFBUSx3Q0FBd0MsRUFBRSxRQUFRLHdPQUF3TyxFQUFFLFFBQVEsQ0FBQyxTQUFTLEtBQUssU0FBUyxPQUFPLEtBQUssT0FBTyxTQUFTLHNCQUFzQixDQUFDLEVBQUUsU0FBUyxPQUFPLFVBQVU7QUFDM2IsWUFBTSxNQUFNLFdBQVcsS0FBSztBQUM1QixVQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssT0FBTyxLQUFLLE9BQU8sR0FBRztBQUN2QyxhQUFLLE9BQU8sU0FBUyx5QkFBeUI7QUFDOUMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDO0FBQUEsSUFDRixDQUFDLENBQUM7QUFDRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLHdDQUF3QyxFQUFFLFFBQVEsaUdBQWlHLEVBQUUsUUFBUSxDQUFDLFNBQVMsS0FBSyxTQUFTLE9BQU8sS0FBSyxPQUFPLFNBQVMscUJBQXFCLENBQUMsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUNuVCxZQUFNLE1BQU0sU0FBUyxPQUFPLEVBQUU7QUFDOUIsVUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLE1BQU0sR0FBRztBQUMxQixhQUFLLE9BQU8sU0FBUyx3QkFBd0I7QUFDN0MsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDO0FBQUEsSUFDRixDQUFDLENBQUM7QUFDRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLDBCQUEwQixFQUFFLFdBQVc7QUFDekYsUUFBSSxpQkFBaUIsUUFBUSxXQUFXLEVBQUUsUUFBUSxnQ0FBZ0MsRUFBRSxRQUFRLGtHQUFrRyxFQUFFLFFBQVEsQ0FBQyxTQUFTLEtBQUssZUFBZSxxQkFBcUIsRUFBRSxTQUFTLEtBQUssT0FBTyxTQUFTLFVBQVUsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUMvVCxXQUFLLE9BQU8sU0FBUyxhQUFhLE1BQU0sS0FBSyxFQUFFLFFBQVEsT0FBTyxFQUFFO0FBQ2hFLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNqQyxDQUFDLENBQUM7QUFDRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLDhDQUE4QyxFQUFFLFFBQVEsd0pBQXdKLEVBQUUsUUFBUSxDQUFDLFNBQVMsS0FBSyxTQUFTLE9BQU8sS0FBSyxPQUFPLFNBQVMsV0FBVyxDQUFDLEVBQUUsU0FBUyxPQUFPLFVBQVU7QUFDdFcsWUFBTSxNQUFNLFNBQVMsT0FBTyxFQUFFO0FBQzlCLFVBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxNQUFNLEdBQUc7QUFDMUIsYUFBSyxPQUFPLFNBQVMsY0FBYztBQUNuQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDakM7QUFBQSxJQUNGLENBQUMsQ0FBQztBQUNGLFFBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsNENBQTRDLEVBQUUsUUFBUSxzSUFBc0ksRUFBRSxRQUFRLENBQUMsU0FBUyxLQUFLLFNBQVMsT0FBTyxLQUFLLE9BQU8sU0FBUyxxQkFBcUIsQ0FBQyxFQUFFLFNBQVMsT0FBTyxVQUFVO0FBQzVWLFlBQU0sTUFBTSxTQUFTLE9BQU8sRUFBRTtBQUM5QixVQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssTUFBTSxHQUFHO0FBQzFCLGFBQUssT0FBTyxTQUFTLHdCQUF3QjtBQUM3QyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDakM7QUFBQSxJQUNGLENBQUMsQ0FBQztBQUNGLFFBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsK0NBQStDLEVBQUUsUUFBUSw4SkFBOEosRUFBRSxRQUFRLENBQUMsU0FBUyxLQUFLLFNBQVMsT0FBTyxLQUFLLE9BQU8sU0FBUyxhQUFhLENBQUMsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUMvVyxZQUFNLE1BQU0sU0FBUyxPQUFPLEVBQUU7QUFDOUIsVUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLE9BQU8sR0FBRztBQUMzQixhQUFLLE9BQU8sU0FBUyxnQkFBZ0I7QUFDckMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDO0FBQUEsSUFDRixDQUFDLENBQUM7QUFDRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLHNDQUFzQyxFQUFFLFFBQVEsdUtBQXVLLEVBQUUsUUFBUSxDQUFDLFNBQVMsS0FBSyxTQUFTLE9BQU8sS0FBSyxPQUFPLFNBQVMsb0JBQW9CLENBQUMsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUN0WCxZQUFNLE1BQU0sU0FBUyxPQUFPLEVBQUU7QUFDOUIsVUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLE9BQU8sR0FBRztBQUMzQixhQUFLLE9BQU8sU0FBUyx1QkFBdUI7QUFDNUMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDO0FBQUEsSUFDRixDQUFDLENBQUM7QUFDRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLG1FQUFtRSxFQUFFLFFBQVEsdVBBQXVQLEVBQUU7QUFBQSxNQUN0WCxDQUFDLFdBQVcsT0FBTyxTQUFTLEtBQUssT0FBTyxTQUFTLG9CQUFvQixFQUFFLFNBQVMsT0FBTyxVQUFVO0FBQy9GLGFBQUssT0FBTyxTQUFTLHVCQUF1QjtBQUM1QyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDakMsQ0FBQztBQUFBLElBQ0g7QUFDQSxRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLHdDQUF3QyxFQUFFLFFBQVEsbVFBQW1RLEVBQUUsWUFBWSxDQUFDLGFBQWEsU0FBUyxVQUFVLGFBQWEsZ0NBQWdDLEVBQUUsVUFBVSxNQUFNLCtCQUErQixFQUFFLFNBQVMsS0FBSyxPQUFPLFNBQVMsV0FBVyxFQUFFLFNBQVMsT0FBTyxVQUFVO0FBQ3pqQixXQUFLLE9BQU8sU0FBUyxjQUFjO0FBQ25DLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsV0FBSyxRQUFRO0FBQUEsSUFDZixDQUFDLENBQUM7QUFDRixRQUFJLEtBQUssT0FBTyxTQUFTLGdCQUFnQixhQUFhO0FBQ3BELFVBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsb0VBQW9FLEVBQUUsUUFBUSxnTEFBZ0wsRUFBRSxZQUFZLENBQUMsU0FBUyxLQUFLLFNBQVMsS0FBSyxPQUFPLFNBQVMsdUJBQXVCLEVBQUUsU0FBUyxPQUFPLFVBQVU7QUFDNVosYUFBSyxPQUFPLFNBQVMsMEJBQTBCO0FBQy9DLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNqQyxDQUFDLEVBQUUsUUFBUSxNQUFNLFNBQVMsT0FBTztBQUNqQyxVQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLDBFQUEwRSxFQUFFLFFBQVEsNElBQTRJLEVBQUUsUUFBUSxDQUFDLFNBQVMsS0FBSyxTQUFTLE9BQU8sS0FBSyxPQUFPLFNBQVMseUJBQXlCLENBQUMsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUNwWSxjQUFNLE1BQU0sU0FBUyxPQUFPLEVBQUU7QUFDOUIsWUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLE9BQU8sR0FBRztBQUMzQixlQUFLLE9BQU8sU0FBUyw0QkFBNEI7QUFDakQsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNqQztBQUFBLE1BQ0YsQ0FBQyxDQUFDO0FBQUEsSUFDSjtBQUNBLFFBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsNENBQTRDLEVBQUUsV0FBVztBQUMzRyxRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLGdDQUFnQyxFQUFFLFFBQVEsc0xBQXNMLEVBQUU7QUFBQSxNQUNsUixDQUFDLFNBQVMsS0FBSyxlQUFlLG1IQUFtSCxFQUFFLFNBQVMsS0FBSyxPQUFPLFNBQVMsWUFBWSxFQUFFLFNBQVMsT0FBTyxVQUFVO0FBQ3ZOLGFBQUssT0FBTyxTQUFTLGVBQWU7QUFDcEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUMsRUFBRSxRQUFRLE1BQU0sU0FBUztBQUFBLElBQzVCO0FBQ0EsUUFBSSxpQkFBaUIsUUFBUSxXQUFXLEVBQUU7QUFBQSxNQUN4QyxDQUFDLFdBQVcsT0FBTyxjQUFjLGtEQUFrRCxFQUFFLE9BQU8sRUFBRSxRQUFRLFlBQVk7QUFDaEgsY0FBTSxVQUFVLEtBQUssT0FBTyxTQUFTO0FBQ3JDLFlBQUksQ0FBQyxRQUFRLEtBQUssR0FBRztBQUNuQixjQUFJLGlCQUFpQixPQUFPLG9FQUFvRTtBQUNoRztBQUFBLFFBQ0Y7QUFDQSxjQUFNLGlCQUFpQixDQUFDLEdBQUcsSUFBSSxJQUFJLFFBQVEsTUFBTSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsS0FBSyxLQUFLLENBQUMsRUFBRSxPQUFPLE9BQU8sQ0FBQyxDQUFDO0FBQ2xHLGNBQU0sYUFBYSxLQUFLLE9BQU8sT0FBTyxtQkFBbUIsY0FBYztBQUN2RSxjQUFNLGVBQWUsZUFBZSxTQUFTO0FBQzdDLFlBQUksZ0JBQWdCLDRCQUE0QjtBQUNoRCxZQUFJLGVBQWUsR0FBRztBQUNwQiwyQkFBaUI7QUFBQSxFQUN6QjtBQUFBLFFBQ007QUFDQSxZQUFJLGlCQUFpQixPQUFPLGVBQWUsR0FBRztBQUM5QyxhQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsYUFBSyxRQUFRO0FBQUEsTUFDZixDQUFDO0FBQUEsSUFDSDtBQUNBLFFBQUksaUJBQWlCLFFBQVEsV0FBVyxFQUFFLFFBQVEsc0JBQXNCLEVBQUUsV0FBVztBQUNyRixRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLHFCQUFxQixFQUFFLFFBQVEsMkVBQTJFLEVBQUUsWUFBWSxDQUFDLFNBQVMsS0FBSyxTQUFTLEtBQUssT0FBTyxTQUFTLGdCQUFnQixFQUFFLFNBQVMsT0FBTyxVQUFVO0FBQ2pRLFdBQUssT0FBTyxTQUFTLG1CQUFtQjtBQUN4QyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDakMsQ0FBQyxFQUFFLFFBQVEsTUFBTSxTQUFTLE9BQU87QUFDakMsUUFBSSxLQUFLLE9BQU8sU0FBUyxnQkFBZ0IsTUFBTTtBQUM3QyxVQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLDhCQUE4QixFQUFFLFFBQVEsMkZBQTJGLEVBQUUsWUFBWSxDQUFDLFNBQVMsS0FBSyxTQUFTLEtBQUssT0FBTyxTQUFTLGFBQWEsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUN2UixhQUFLLE9BQU8sU0FBUyxnQkFBZ0I7QUFDckMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUMsRUFBRSxRQUFRLE1BQU0sU0FBUyxPQUFPO0FBQUEsSUFDbkM7QUFDQSxRQUFJLGlCQUFpQixRQUFRLFdBQVcsRUFBRSxRQUFRLCtCQUErQixFQUFFLFFBQVEsNkZBQTZGLEVBQUUsWUFBWSxDQUFDLFNBQVMsS0FBSyxTQUFTLEtBQUssT0FBTyxTQUFTLGNBQWMsRUFBRSxTQUFTLE9BQU8sVUFBVTtBQUMzUixXQUFLLE9BQU8sU0FBUyxpQkFBaUI7QUFDdEMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2pDLENBQUMsRUFBRSxRQUFRLE1BQU0sU0FBUyxPQUFPO0FBQUEsRUFDbkM7QUFDRjs7O0FDMVpBLElBQUFDLG1CQUEyRDs7O0FDRDNELElBQUksbUJBQW1CLFFBQVEsVUFBVTtBQUdsQyxJQUFJLHVCQUF1QixjQUFjLE1BQU07QUFBQSxFQUNwRCxZQUFZLFNBQVM7QUFDbkIsVUFBTSxPQUFPO0FBQ2IsU0FBSyxPQUFPO0FBQUEsRUFDZDtBQUNGO0FBR08sSUFBSSx1QkFBdUIsY0FBYyxNQUFNO0FBQUEsRUFDcEQsWUFBWSxTQUFTO0FBQ25CLFVBQU0sT0FBTztBQUNiLFNBQUssT0FBTztBQUFBLEVBQ2Q7QUFDRjtBQUdPLElBQUksYUFBYSxNQUFNO0FBQUEsRUFDNUIsWUFBWSxRQUFRO0FBQ2xCLFNBQUssaUJBQWlDLG9CQUFJLElBQUk7QUFDOUMsU0FBSyxpQkFBaUMsb0JBQUksSUFBSTtBQUU5QyxTQUFLLHNCQUFzQjtBQUMzQixTQUFLLFNBQVM7QUFDZCxTQUFLLFdBQVcsT0FBTztBQUN2QixTQUFLLFdBQVc7QUFBQSxFQUNsQjtBQUFBLEVBQ0EsYUFBYTtBQUNYLFNBQUssY0FBYyxLQUFLLFNBQVMsZ0JBQWdCLE1BQU0sSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsT0FBTyxPQUFPO0FBQ2hHLFNBQUssY0FBYyxLQUFLLFNBQVMsZ0JBQWdCLE1BQU0sSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsT0FBTyxPQUFPO0FBQ2hHLFNBQUssWUFBWSxRQUFRLENBQUMsUUFBUTtBQUNoQyxVQUFJLENBQUMsS0FBSyxlQUFlLElBQUksR0FBRyxHQUFHO0FBQ2pDLGFBQUssZUFBZSxJQUFJLEtBQUssRUFBRSxPQUFPLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztBQUFBLE1BQzlEO0FBQUEsSUFDRixDQUFDO0FBQ0QsU0FBSyxZQUFZLFFBQVEsQ0FBQyxRQUFRO0FBQ2hDLFVBQUksQ0FBQyxLQUFLLGVBQWUsSUFBSSxHQUFHLEdBQUc7QUFDakMsYUFBSyxlQUFlLElBQUksS0FBSyxFQUFFLE9BQU8sR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO0FBQUEsTUFDOUQ7QUFBQSxJQUNGLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFDQSxXQUFXLE1BQU0sVUFBVTtBQUN6QixVQUFNLGNBQWMsYUFBYSxXQUFXLEtBQUssaUJBQWlCLEtBQUs7QUFDdkUsVUFBTSxjQUFjLEtBQUssSUFBSSxJQUFJO0FBQ2pDLGVBQVcsT0FBTyxNQUFNO0FBQ3RCLFlBQU0sUUFBUSxZQUFZLElBQUksR0FBRztBQUNqQyxVQUFJLFNBQVMsZUFBZSxNQUFNLGdCQUFnQjtBQUNoRCxlQUFPO0FBQUEsTUFDVDtBQUFBLElBQ0Y7QUFDQSxXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLG1CQUFtQixLQUFLLFFBQVEsV0FBVztBQUMvQyxVQUFNLFdBQVcsT0FBTyxHQUFHLGlCQUFpQixZQUFZO0FBQUEsTUFDdEQsS0FBSyxHQUFHLEtBQUssU0FBUztBQUFBLE1BQ3RCLFFBQVE7QUFBQSxNQUNSLFNBQVM7QUFBQSxRQUNQLGdCQUFnQjtBQUFBLFFBQ2hCLGlCQUFpQixVQUFVO0FBQUEsTUFDN0I7QUFBQSxNQUNBLE1BQU0sS0FBSyxVQUFVO0FBQUEsUUFDbkIsT0FBTztBQUFBO0FBQUEsUUFFUCxVQUFVLENBQUMsRUFBRSxNQUFNLFFBQVEsU0FBUyxPQUFPLENBQUM7QUFBQSxRQUM1QyxhQUFhLEtBQUssU0FBUztBQUFBLFFBQzNCLFlBQVksS0FBSyxTQUFTO0FBQUEsTUFDNUIsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUNELFdBQU8sU0FBUyxLQUFLLFFBQVEsQ0FBQyxFQUFFLFFBQVEsUUFBUSxLQUFLO0FBQUEsRUFDdkQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLE1BQU0sc0JBQXNCLEtBQUssUUFBUSxXQUFXO0FBQ2xELFVBQU0sTUFBTSwyREFBMkQsaUNBQWlDO0FBQ3hHLFVBQU0sV0FBVyxPQUFPLEdBQUcsaUJBQWlCLFlBQVk7QUFBQSxNQUN0RDtBQUFBLE1BQ0EsUUFBUTtBQUFBLE1BQ1IsU0FBUyxFQUFFLGdCQUFnQixtQkFBbUI7QUFBQSxNQUM5QyxNQUFNLEtBQUssVUFBVTtBQUFBLFFBQ25CLFVBQVUsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxFQUFFLE1BQU0sT0FBTyxDQUFDLEVBQUUsQ0FBQztBQUFBLFFBQ3hDLGtCQUFrQjtBQUFBLFVBQ2hCLGFBQWEsS0FBSyxTQUFTO0FBQUEsVUFDM0IsaUJBQWlCLEtBQUssU0FBUztBQUFBLFFBQ2pDO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDSCxDQUFDO0FBQ0QsVUFBTSxPQUFPLFNBQVM7QUFDdEIsUUFBSSxDQUFDLEtBQUssY0FBYyxLQUFLLFdBQVcsV0FBVyxHQUFHO0FBQ3BELFlBQU0sSUFBSSxNQUFNLHdEQUF3RCxLQUFLLFVBQVUsSUFBSSxDQUFDO0FBQUEsSUFDOUY7QUFDQSxXQUFPLEtBQUssV0FBVyxDQUFDLEVBQUUsUUFBUSxNQUFNLENBQUMsRUFBRSxLQUFLLEtBQUs7QUFBQSxFQUN2RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxjQUFjLE9BQU87QUFDbkIsUUFBSTtBQUNKLFVBQU0sYUFBYSxNQUFNO0FBQ3pCLFVBQU0saUJBQWlCLEtBQUssTUFBTSxZQUFZLE9BQU8sU0FBUyxHQUFHLFlBQVksTUFBTTtBQUNuRixRQUFJLGVBQWUsT0FBTyxlQUFlLE9BQU8sZUFBZSxLQUFLO0FBQ2xFLGFBQU87QUFBQSxJQUNUO0FBQ0EsUUFBSSxhQUFhLFNBQVMsb0JBQW9CLEtBQUssYUFBYSxTQUFTLFlBQVksS0FBSyxhQUFhLFNBQVMsT0FBTyxLQUFLLGFBQWEsU0FBUyxZQUFZLEdBQUc7QUFDL0osYUFBTztBQUFBLElBQ1Q7QUFDQSxXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsYUFBYSxLQUFLLFVBQVU7QUFDMUIsVUFBTSxjQUFjLGFBQWEsV0FBVyxLQUFLLGlCQUFpQixLQUFLO0FBQ3ZFLFVBQU0sV0FBVyxZQUFZLElBQUksR0FBRztBQUNwQyxRQUFJLFVBQVU7QUFDWixjQUFRLEtBQUssVUFBVSxJQUFJLE1BQU0sRUFBRSxNQUFNLDhEQUE4RDtBQUN2RyxlQUFTLGlCQUFpQixLQUFLLElBQUksSUFBSSxNQUFNLEtBQUssU0FBUztBQUFBLElBQzdEO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsZUFBZSxLQUFLLFVBQVU7QUFDNUIsVUFBTSxjQUFjLGFBQWEsV0FBVyxLQUFLLGlCQUFpQixLQUFLO0FBQ3ZFLFVBQU0sV0FBVyxZQUFZLElBQUksR0FBRztBQUNwQyxRQUFJO0FBQ0YsZUFBUyxpQkFBaUI7QUFDNUIsU0FBSyxzQkFBc0I7QUFBQSxFQUM3QjtBQUFBO0FBQUEsRUFFQSxNQUFNLFlBQVksS0FBSyxRQUFRO0FBQzdCLFVBQU0sZUFBZSxLQUFLLFNBQVM7QUFDbkMsVUFBTSxjQUFjLEtBQUssU0FBUztBQUNsQyxRQUFJO0FBQ0YsWUFBTSxTQUFTLE1BQU0sS0FBSyxtQkFBbUIsS0FBSyxRQUFRLFlBQVk7QUFDdEUsV0FBSyxlQUFlLEtBQUssUUFBUTtBQUNqQyxhQUFPO0FBQUEsSUFDVCxTQUFTLGNBQVA7QUFDQSxjQUFRLEtBQUsseUJBQXlCLG1DQUFtQyxJQUFJLE1BQU0sRUFBRSxNQUFNLGFBQWEsT0FBTztBQUMvRyxVQUFJLEtBQUssY0FBYyxZQUFZLEtBQUssYUFBYTtBQUNuRCxZQUFJLGlCQUFpQixPQUFPLGdCQUFnQixtRkFBbUYsZ0JBQWdCO0FBQy9JLFlBQUk7QUFDRixnQkFBTSxlQUFlLE1BQU0sS0FBSyxtQkFBbUIsS0FBSyxRQUFRLFdBQVc7QUFDM0UsZUFBSyxlQUFlLEtBQUssUUFBUTtBQUNqQyxpQkFBTztBQUFBLFFBQ1QsU0FBUyxhQUFQO0FBQ0Esa0JBQVEsTUFBTSx3QkFBd0IsdUNBQXVDLElBQUksTUFBTSxFQUFFLE1BQU0sWUFBWSxPQUFPO0FBQ2xILGNBQUksS0FBSyxjQUFjLFdBQVcsR0FBRztBQUNuQyxpQkFBSyxhQUFhLEtBQUssUUFBUTtBQUFBLFVBQ2pDO0FBQ0EsZ0JBQU0sSUFBSSxxQkFBcUIscURBQXFEO0FBQUEsUUFDdEY7QUFBQSxNQUNGO0FBQ0EsVUFBSSxLQUFLLGNBQWMsWUFBWSxHQUFHO0FBQ3BDLGFBQUssYUFBYSxLQUFLLFFBQVE7QUFBQSxNQUNqQztBQUNBLFlBQU0sSUFBSSxxQkFBcUIsc0JBQXNCLGFBQWEsU0FBUztBQUFBLElBQzdFO0FBQUEsRUFDRjtBQUFBO0FBQUEsRUFFQSxNQUFNLGVBQWUsS0FBSyxRQUFRO0FBQ2hDLFVBQU0sZUFBZSxLQUFLLFNBQVM7QUFDbkMsVUFBTSxjQUFjLEtBQUssU0FBUztBQUNsQyxRQUFJO0FBQ0YsWUFBTSxTQUFTLE1BQU0sS0FBSyxzQkFBc0IsS0FBSyxRQUFRLFlBQVk7QUFDekUsV0FBSyxlQUFlLEtBQUssUUFBUTtBQUNqQyxhQUFPO0FBQUEsSUFDVCxTQUFTLGNBQVA7QUFDQSxjQUFRLEtBQUsseUJBQXlCLG1DQUFtQyxJQUFJLE1BQU0sRUFBRSxNQUFNLGFBQWEsT0FBTztBQUMvRyxVQUFJLEtBQUssY0FBYyxZQUFZLEtBQUssYUFBYTtBQUNuRCxZQUFJLGlCQUFpQixPQUFPLGdCQUFnQixtRkFBbUYsZ0JBQWdCO0FBQy9JLFlBQUk7QUFDRixnQkFBTSxlQUFlLE1BQU0sS0FBSyxzQkFBc0IsS0FBSyxRQUFRLFdBQVc7QUFDOUUsZUFBSyxlQUFlLEtBQUssUUFBUTtBQUNqQyxpQkFBTztBQUFBLFFBQ1QsU0FBUyxhQUFQO0FBQ0Esa0JBQVEsTUFBTSx3QkFBd0IsdUNBQXVDLElBQUksTUFBTSxFQUFFLE1BQU0sWUFBWSxPQUFPO0FBQ2xILGNBQUksS0FBSyxjQUFjLFdBQVcsR0FBRztBQUNuQyxpQkFBSyxhQUFhLEtBQUssUUFBUTtBQUFBLFVBQ2pDO0FBQ0EsZ0JBQU0sSUFBSSxxQkFBcUIscURBQXFEO0FBQUEsUUFDdEY7QUFBQSxNQUNGO0FBQ0EsVUFBSSxLQUFLLGNBQWMsWUFBWSxHQUFHO0FBQ3BDLGFBQUssYUFBYSxLQUFLLFFBQVE7QUFBQSxNQUNqQztBQUNBLFlBQU0sSUFBSSxxQkFBcUIsc0JBQXNCLGFBQWEsU0FBUztBQUFBLElBQzdFO0FBQUEsRUFDRjtBQUFBO0FBQUEsRUFFQSxNQUFNLEtBQUssUUFBUTtBQUNqQixTQUFLLFdBQVc7QUFDaEIsUUFBSSxZQUFZO0FBQ2hCLFFBQUksc0JBQXNCO0FBQzFCLFFBQUksS0FBSyxZQUFZLFNBQVMsR0FBRztBQUMvQiw0QkFBc0I7QUFDdEIsZUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFlBQVksUUFBUSxLQUFLO0FBQ2hELGNBQU0sTUFBTSxLQUFLLFdBQVcsS0FBSyxhQUFhLFFBQVE7QUFDdEQsWUFBSSxLQUFLO0FBQ1AsY0FBSTtBQUNGLG9CQUFRLElBQUksd0JBQXdCLElBQUksTUFBTSxFQUFFLEdBQUc7QUFDbkQsbUJBQU8sTUFBTSxLQUFLLFlBQVksS0FBSyxNQUFNO0FBQUEsVUFDM0MsU0FBUyxHQUFQO0FBQ0Esd0JBQVk7QUFDWixnQkFBSSxpQkFBaUIsT0FBTyxpQkFBaUIsSUFBSSxNQUFNLEVBQUUsd0JBQXdCO0FBQUEsVUFDbkY7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFDQSxRQUFJLEtBQUssWUFBWSxTQUFTLEdBQUc7QUFDL0IsVUFBSSx1QkFBdUIsQ0FBQyxLQUFLLHFCQUFxQjtBQUNwRCxZQUFJLGlCQUFpQixPQUFPLHNFQUFzRTtBQUNsRyxhQUFLLHNCQUFzQjtBQUFBLE1BQzdCO0FBQ0EsZUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFlBQVksUUFBUSxLQUFLO0FBQ2hELGNBQU0sTUFBTSxLQUFLLFdBQVcsS0FBSyxhQUFhLFFBQVE7QUFDdEQsWUFBSSxLQUFLO0FBQ1AsY0FBSTtBQUNGLG9CQUFRLElBQUksK0JBQStCLElBQUksTUFBTSxFQUFFLEdBQUc7QUFDMUQsbUJBQU8sTUFBTSxLQUFLLGVBQWUsS0FBSyxNQUFNO0FBQUEsVUFDOUMsU0FBUyxHQUFQO0FBQ0Esd0JBQVk7QUFDWixnQkFBSSxpQkFBaUIsT0FBTyx3QkFBd0IsSUFBSSxNQUFNLEVBQUUsd0JBQXdCO0FBQUEsVUFDMUY7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFDQSxVQUFNLElBQUkscUJBQXFCLHlDQUF5QyxhQUFhLE9BQU8sU0FBUyxVQUFVLFNBQVM7QUFBQSxFQUMxSDtBQUNGOzs7QUN4T08sSUFBTSxTQUFOLE1BQWE7QUFBQSxFQUloQixZQUFZLFFBQThCO0FBQ3RDLFNBQUssU0FBUztBQUNkLFNBQUssYUFBYSxJQUFJLFdBQVcsTUFBTTtBQUFBLEVBQzNDO0FBQUEsRUFFQSxNQUFhLE1BQU0sU0FBbUU7QUFDbEYsUUFBSSxLQUFLLE9BQU8sU0FBUyxnQkFBZ0IsTUFBTTtBQUMzQyxhQUFPLEtBQUssV0FBVyxPQUFPO0FBQUEsSUFDbEM7QUFDQSxXQUFPLEtBQUssa0JBQWtCLE9BQU87QUFBQSxFQUN6QztBQUFBLEVBRVEsa0JBQWtCLFNBQTBEO0FBQ2hGLFVBQU0sVUFBb0IsQ0FBQztBQUMzQixVQUFNLGVBQWUsUUFBUSxZQUFZO0FBR3pDLFVBQU0sa0JBQWtCLEtBQUssT0FBTyxTQUFTLHdCQUN4QyxNQUFNLElBQUksRUFBRSxJQUFJLE9BQUssRUFBRSxLQUFLLEVBQUUsWUFBWSxDQUFDLEVBQUUsT0FBTyxPQUFPO0FBQ2hFLFVBQU0saUJBQWlCLGdCQUFnQixPQUFPLE9BQUssQ0FBQyxhQUFhLFNBQVMsQ0FBQyxDQUFDO0FBQzVFLFFBQUksZUFBZSxTQUFTLEdBQUc7QUFDM0IsY0FBUSxLQUFLLCtDQUFZLGVBQWUsS0FBSyxJQUFJLEdBQUc7QUFBQSxJQUN4RDtBQUdBLFFBQUksUUFBUSxTQUFTLEtBQUssT0FBTyxTQUFTLDJCQUEyQjtBQUNqRSxjQUFRLEtBQUssMkNBQWEsUUFBUSx5QkFBZSxLQUFLLE9BQU8sU0FBUyw0QkFBNEI7QUFBQSxJQUN0RztBQUdBLFVBQU0sa0JBQWtCLENBQUMsK0JBQVcsd0NBQVUsc0JBQU8sc0JBQU8sb0JBQUs7QUFDakUsZUFBVyxXQUFXLGlCQUFpQjtBQUNuQyxVQUFJLElBQUksT0FBTyxTQUFTLEdBQUcsRUFBRSxLQUFLLE9BQU8sR0FBRztBQUN4QyxnQkFBUSxLQUFLLG9EQUFpQixXQUFXO0FBQ3pDO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFFQSxXQUFPO0FBQUEsTUFDSCxZQUFZLFFBQVEsV0FBVztBQUFBLE1BQy9CLFFBQVEsUUFBUSxTQUFTLElBQUksUUFBUSxLQUFLLElBQUksSUFBSTtBQUFBLElBQ3REO0FBQUEsRUFDSjtBQUFBLEVBRUEsTUFBYyxXQUFXLFNBQW1FO0FBQ3hGLFVBQU0sU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjLFFBQVEsYUFBYSxPQUFPO0FBQzlFLFFBQUk7QUFDQSxZQUFNLFdBQVcsTUFBTSxLQUFLLFdBQVcsS0FBSyxNQUFNO0FBQ2xELFlBQU0sZ0JBQWdCLFNBQVMsTUFBTSw2QkFBNkI7QUFDbEUsWUFBTSxjQUFjLFNBQVMsTUFBTSx3QkFBd0I7QUFFM0QsWUFBTSxhQUFhLGdCQUFnQixjQUFjLENBQUMsRUFBRSxZQUFZLE1BQU0sU0FBUztBQUMvRSxZQUFNLFNBQVMsY0FBYyxZQUFZLENBQUMsRUFBRSxLQUFLLElBQUssYUFBYSxvQkFBVTtBQUU3RSxhQUFPLEVBQUUsWUFBWSxPQUFPO0FBQUEsSUFDaEMsU0FBUyxPQUFQO0FBQ0UsY0FBUSxNQUFNLDBCQUEwQixLQUFLO0FBQzdDLGFBQU8sRUFBRSxZQUFZLE9BQU8sUUFBUSxrREFBZSxNQUFNLFVBQVU7QUFBQSxJQUN2RTtBQUFBLEVBQ0o7QUFDSjs7O0FDakVPLElBQU0sVUFBTixNQUFjO0FBQUEsRUFHakIsWUFBWSxRQUE4QjtBQUN0QyxTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRU8scUJBQXFCLE1BQWMsaUJBQXlCLGlCQUFpQztBQUNoRyxRQUFJLFNBQVMsS0FBSyxPQUFPLFNBQVM7QUFDbEMsYUFBUyxPQUFPLFFBQVEsYUFBYSxJQUFJO0FBQ3pDLGFBQVMsT0FBTyxRQUFRLHNCQUFzQixlQUFlO0FBQzdELGFBQVMsT0FBTyxRQUFRLHNCQUFzQixlQUFlO0FBQzdELFdBQU87QUFBQSxFQUNYO0FBQ0o7OztBQ2hCTyxTQUFTLGlCQUFpQixNQUFzQjtBQUVuRCxNQUFJLFlBQVksS0FBSyxRQUFRLGNBQWMsRUFBRSxFQUFFLEtBQUs7QUFFcEQsY0FBWSxVQUFVLFFBQVEsaUJBQWlCLEVBQUU7QUFFakQsU0FBTyxVQUFVLE1BQU0sR0FBRyxHQUFHO0FBQ2pDO0FBRU8sU0FBUyxnQkFBZ0IsU0FBMkI7QUFDdkQsUUFBTSxVQUFVLFFBQVEsTUFBTSxtQkFBbUI7QUFDakQsTUFBSSxDQUFDLFNBQVM7QUFDVixXQUFPLENBQUM7QUFBQSxFQUNaO0FBRUEsUUFBTSxRQUFRLFFBQVEsSUFBSSxXQUFTO0FBQy9CLFdBQU8sTUFBTSxNQUFNLEdBQUcsRUFBRSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLO0FBQUEsRUFDakQsQ0FBQztBQUNELFNBQU8sQ0FBQyxHQUFHLElBQUksSUFBSSxLQUFLLENBQUM7QUFDN0I7QUFFTyxTQUFTLG9CQUFvQixTQUF5QjtBQUN6RCxRQUFNLFVBQVUsUUFBUSxLQUFLO0FBQzdCLE1BQUksUUFBUSxXQUFXLGFBQWEsS0FBSyxRQUFRLFNBQVMsS0FBSyxHQUFHO0FBQzlELFFBQUksVUFBVSxRQUFRLFVBQVUsY0FBYyxRQUFRLFFBQVEsU0FBUyxNQUFNLE1BQU07QUFDbkYsV0FBTyxRQUFRLEtBQUs7QUFBQSxFQUN4QjtBQUNBLFNBQU87QUFDWDs7O0FKbkJPLElBQU0sU0FBTixNQUFhO0FBQUEsRUFTaEIsWUFBWSxRQUE4QjtBQUgxQyxTQUFRLFlBQXFCO0FBQzdCLFNBQVEsVUFBaUM7QUFHckMsU0FBSyxTQUFTO0FBQ2QsU0FBSyxNQUFNLE9BQU87QUFDbEIsU0FBSyxhQUFhLElBQUksV0FBVyxNQUFNO0FBQ3ZDLFNBQUssU0FBUyxJQUFJLE9BQU8sTUFBTTtBQUMvQixTQUFLLFVBQVUsSUFBSSxRQUFRLE1BQU07QUFBQSxFQUNyQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPTyxvQkFBMEI7QUFDN0IsUUFBSSxLQUFLLFdBQVc7QUFDaEIsV0FBSyxLQUFLO0FBQUEsSUFDZCxPQUFPO0FBQ0gsV0FBSyxNQUFNO0FBQUEsSUFDZjtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTU8sa0JBQWtCLFNBQTBCO0FBQy9DLFVBQU0sUUFBUSxLQUFLLG1CQUFtQixDQUFDLE9BQU8sQ0FBQztBQUMvQyxRQUFJLFFBQVEsR0FBRztBQUNYLFVBQUksd0JBQU8sSUFBSSxpRUFBb0I7QUFDbkMsV0FBSyxnQkFBZ0I7QUFDckIsYUFBTztBQUFBLElBQ1g7QUFDQSxRQUFJLHdCQUFPLElBQUkscUdBQTBCO0FBQ3pDLFdBQU87QUFBQSxFQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT08sbUJBQW1CLFVBQTRCO0FBQ2xELFVBQU0sZUFBZSxJQUFJLElBQUksS0FBSyxPQUFPLEtBQUssZUFBZTtBQUU3RCxVQUFNLGdCQUFnQixJQUFJLElBQUksS0FBSyxJQUFJLE1BQU0saUJBQWlCLEVBQUUsSUFBSSxPQUFLLEVBQUUsUUFBUSxDQUFDO0FBRXBGLFFBQUksYUFBYTtBQUNqQixlQUFXLFdBQVcsVUFBVTtBQUM1QixZQUFNLFlBQVksaUJBQWlCLE9BQU87QUFFMUMsVUFBSSxDQUFDLGFBQWEsSUFBSSxPQUFPLEtBQUssQ0FBQyxjQUFjLElBQUksU0FBUyxHQUFHO0FBQzdELGFBQUssT0FBTyxLQUFLLGdCQUFnQixLQUFLLE9BQU87QUFDN0MscUJBQWEsSUFBSSxPQUFPO0FBQ3hCO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFFQSxRQUFJLGFBQWEsR0FBRztBQUNoQixXQUFLLE9BQU8sZUFBZTtBQUMzQixXQUFLLGdCQUFnQjtBQUFBLElBQ3pCO0FBQ0EsV0FBTztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBYyxRQUF1QjtBQUNqQyxRQUFJLEtBQUs7QUFBVztBQUNwQixTQUFLLFlBQVk7QUFDakIsU0FBSyxPQUFPLEtBQUssU0FBUztBQUMxQixRQUFJLHdCQUFPLDhEQUFZO0FBQ3ZCLFNBQUssZ0JBQWdCO0FBRXJCLFNBQUssS0FBSztBQUFBLEVBQ2Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLE9BQWE7QUFDakIsUUFBSSxDQUFDLEtBQUs7QUFBVztBQUNyQixTQUFLLFlBQVk7QUFDakIsU0FBSyxPQUFPLEtBQUssU0FBUztBQUMxQixRQUFJLEtBQUssU0FBUztBQUNkLG1CQUFhLEtBQUssT0FBTztBQUN6QixXQUFLLFVBQVU7QUFBQSxJQUNuQjtBQUNBLFFBQUksd0JBQU8sOERBQVk7QUFDdkIsU0FBSyxnQkFBZ0I7QUFDckIsU0FBSyxPQUFPLGVBQWU7QUFBQSxFQUMvQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsbUJBQXlCO0FBQzdCLFFBQUksQ0FBQyxLQUFLO0FBQVc7QUFDckIsVUFBTSxRQUFRLEtBQUssT0FBTyxTQUFTLGdCQUFnQjtBQUNuRCxTQUFLLFVBQVUsV0FBVyxNQUFNLEtBQUssS0FBSyxHQUFHLEtBQUs7QUFBQSxFQUN0RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxNQUFjLE9BQXNCO0FBQ2hDLFFBQUksQ0FBQyxLQUFLO0FBQVc7QUFFckIsUUFBSTtBQUNBLFVBQUksZ0JBQWdCO0FBR3BCLFVBQUksS0FBSyxPQUFPLEtBQUssY0FBYyxTQUFTLEdBQUc7QUFDM0Msd0JBQWdCLE1BQU0sS0FBSyxpQkFBaUI7QUFBQSxNQUNoRCxXQUVTLEtBQUssT0FBTyxLQUFLLFlBQVksU0FBUyxHQUFHO0FBQzlDLHdCQUFnQixNQUFNLEtBQUssZUFBZTtBQUFBLE1BQzlDLFdBRVMsS0FBSyxPQUFPLEtBQUssZ0JBQWdCLFNBQVMsR0FBRztBQUNsRCx3QkFBZ0IsTUFBTSxLQUFLLG1CQUFtQjtBQUFBLE1BQ2xEO0FBR0EsVUFBSSxDQUFDLGlCQUNELEtBQUssT0FBTyxLQUFLLGdCQUFnQixXQUFXLEtBQzVDLEtBQUssT0FBTyxLQUFLLFlBQVksV0FBVyxLQUN4QyxLQUFLLE9BQU8sS0FBSyxjQUFjLFdBQVcsR0FBRztBQUU3QyxZQUFJLHdCQUFPLDBGQUFrQjtBQUM3QixhQUFLLFlBQVk7QUFDakIsYUFBSyxPQUFPLEtBQUssU0FBUztBQUMxQixhQUFLLGdCQUFnQjtBQUNyQixjQUFNLEtBQUssT0FBTyxlQUFlO0FBQ2pDO0FBQUEsTUFDSjtBQUFBLElBRUosU0FBUyxPQUFQO0FBQ0UsY0FBUSxNQUFNLDJEQUFtQixLQUFLO0FBQ3RDLFVBQUksd0JBQU8sOEdBQW9CO0FBQy9CLFdBQUssS0FBSztBQUNWO0FBQUEsSUFDSjtBQUdBLFNBQUssaUJBQWlCO0FBQUEsRUFDMUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxNQUFjLHFCQUF1QztBQUNqRCxVQUFNLFFBQVEsS0FBSyxPQUFPLEtBQUs7QUFDL0IsUUFBSSxNQUFNLFdBQVc7QUFBRyxhQUFPO0FBRS9CLFVBQU0sWUFBWSxLQUFLLE9BQU8sU0FBUztBQUV2QyxVQUFNLFFBQVEsTUFBTSxPQUFPLEdBQUcsS0FBSyxJQUFJLE1BQU0sUUFBUSxTQUFTLENBQUM7QUFFL0QsU0FBSyxnQkFBZ0I7QUFDckIsVUFBTSxLQUFLLE9BQU8sZUFBZTtBQUdqQyxVQUFNLFFBQVEsTUFBTSxJQUFJLFVBQVEsS0FBSyxlQUFlLElBQUksQ0FBQztBQUN6RCxVQUFNLFFBQVEsV0FBVyxLQUFLO0FBRTlCLFVBQU0sS0FBSyxPQUFPLGVBQWU7QUFDakMsV0FBTztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQWMsZUFBZSxNQUE2QjtBQUN0RCxVQUFNLFNBQVMsS0FBSyxPQUFPLFNBQVMsaUJBQWlCLFFBQVEsYUFBYSxJQUFJO0FBQzlFLFFBQUk7QUFDQSxZQUFNLFVBQVUsTUFBTSxLQUFLLFdBQVcsS0FBSyxNQUFNO0FBQ2pELFlBQU0saUJBQWlCLG9CQUFvQixPQUFPO0FBRWxELFdBQUssT0FBTyxLQUFLLFlBQVksS0FBSyxFQUFFLE1BQU0sU0FBUyxlQUFlLENBQUM7QUFDbkUsY0FBUSxJQUFJLHNDQUFhLE1BQU07QUFBQSxJQUNuQyxTQUFTLEdBQVA7QUFDRSxVQUFJLGFBQWEsc0JBQXNCO0FBQ25DLGdCQUFRLE1BQU0sc0NBQWEsVUFBVSxFQUFFLFNBQVM7QUFFaEQsYUFBSyxPQUFPLEtBQUssZ0JBQWdCLFFBQVEsSUFBSTtBQUFBLE1BQ2pEO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsTUFBYyxpQkFBbUM7QUFDN0MsVUFBTSxRQUFRLEtBQUssT0FBTyxLQUFLO0FBQy9CLFFBQUksTUFBTSxXQUFXO0FBQUcsYUFBTztBQUUvQixVQUFNLFlBQVksS0FBSyxPQUFPLFNBQVM7QUFDdkMsVUFBTSxnQkFBZ0IsTUFBTSxPQUFPLEdBQUcsS0FBSyxJQUFJLE1BQU0sUUFBUSxTQUFTLENBQUM7QUFFdkUsU0FBSyxnQkFBZ0I7QUFDckIsVUFBTSxLQUFLLE9BQU8sZUFBZTtBQUVqQyxRQUFJLGdCQUE2QixvQkFBSSxJQUFJO0FBRXpDLGVBQVcsUUFBUSxlQUFlO0FBQzlCLFlBQU0sRUFBRSxZQUFZLE9BQU8sSUFBSSxNQUFNLEtBQUssT0FBTyxNQUFNLEtBQUssT0FBTztBQUNuRSxVQUFJLFlBQVk7QUFFWixjQUFNLEtBQUssU0FBUyxLQUFLLE1BQU0sS0FBSyxPQUFPO0FBSTNDLFlBQUksS0FBSyxPQUFPLFNBQVMsc0JBQXNCO0FBQzNDLGdCQUFNLFFBQVEsZ0JBQWdCLEtBQUssT0FBTztBQUMxQyxnQkFBTSxRQUFRLENBQUMsU0FBUyxjQUFjLElBQUksSUFBSSxDQUFDO0FBQUEsUUFDbkQ7QUFHQSxnQkFBUSxJQUFJLHlDQUFjLEtBQUssTUFBTTtBQUFBLE1BQ3pDLE9BQU87QUFFSCxhQUFLLFNBQVM7QUFDZCxhQUFLLFdBQVcsS0FBSyxXQUFXLEtBQUs7QUFDckMsYUFBSyxPQUFPLEtBQUssY0FBYyxLQUFLLElBQUk7QUFDeEMsZ0JBQVEsS0FBSyx5Q0FBYyxLQUFLLFVBQVUsUUFBUTtBQUFBLE1BQ3REO0FBQUEsSUFDSjtBQUdBLFFBQUksY0FBYyxPQUFPLEdBQUc7QUFDeEIsV0FBSyxtQkFBbUIsTUFBTSxLQUFLLGFBQWEsQ0FBQztBQUFBLElBQ3JEO0FBRUEsVUFBTSxLQUFLLE9BQU8sZUFBZTtBQUNqQyxXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxNQUFjLG1CQUFxQztBQUMvQyxVQUFNLFFBQVEsS0FBSyxPQUFPLEtBQUs7QUFDL0IsUUFBSSxNQUFNLFdBQVc7QUFBRyxhQUFPO0FBRS9CLFVBQU0sWUFBWSxLQUFLLE9BQU8sU0FBUztBQUN2QyxVQUFNLGdCQUFnQixNQUFNLE9BQU8sR0FBRyxLQUFLLElBQUksTUFBTSxRQUFRLFNBQVMsQ0FBQztBQUV2RSxTQUFLLGdCQUFnQjtBQUNyQixVQUFNLEtBQUssT0FBTyxlQUFlO0FBRWpDLGVBQVcsUUFBUSxlQUFlO0FBRTlCLFdBQUssS0FBSyxXQUFXLE1BQU0sS0FBSyxPQUFPLFNBQVMsc0JBQXNCO0FBQ2xFLGFBQUssT0FBTyxLQUFLLGNBQWMsS0FBSyxJQUFJO0FBQ3hDLGdCQUFRLE1BQU0seUNBQWMsS0FBSyw2REFBZ0I7QUFDakQ7QUFBQSxNQUNKO0FBRUEsWUFBTSxLQUFLLGFBQWEsSUFBSTtBQUFBLElBQ2hDO0FBRUEsVUFBTSxLQUFLLE9BQU8sZUFBZTtBQUNqQyxXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBYyxhQUFhLE1BQStCO0FBQ3RELFVBQU0sU0FBUyxLQUFLLFFBQVEscUJBQXFCLEtBQUssTUFBTSxLQUFLLFNBQVMsS0FBSyxVQUFVLDBCQUFNO0FBQy9GLFFBQUk7QUFDQSxZQUFNLGFBQWEsTUFBTSxLQUFLLFdBQVcsS0FBSyxNQUFNO0FBQ3BELFlBQU0saUJBQWlCLG9CQUFvQixVQUFVO0FBQ3JELFlBQU0sY0FBd0IsRUFBRSxHQUFHLE1BQU0sU0FBUyxlQUFlO0FBRWpFLFdBQUssT0FBTyxLQUFLLFlBQVksS0FBSyxXQUFXO0FBQzdDLGNBQVEsSUFBSSx5Q0FBYyxLQUFLLE1BQU07QUFBQSxJQUN6QyxTQUFTLEdBQVA7QUFDRSxjQUFRLE1BQU0sc0NBQWEsS0FBSyxVQUFVLEVBQUUsU0FBUztBQUVyRCxXQUFLLE9BQU8sS0FBSyxjQUFjLFFBQVEsSUFBSTtBQUFBLElBQy9DO0FBQUEsRUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxNQUFjLFNBQVMsTUFBYyxTQUFnQztBQUNqRSxVQUFNLFdBQVcsaUJBQWlCLElBQUk7QUFDdEMsVUFBTSxhQUFhLEtBQUssT0FBTyxTQUFTO0FBR3hDLFFBQUksRUFBRSxLQUFLLElBQUksTUFBTSxzQkFBc0IsVUFBVSxhQUFhLDJCQUFVO0FBQ3hFLFVBQUk7QUFDQSxjQUFNLEtBQUssSUFBSSxNQUFNLGFBQWEsVUFBVTtBQUFBLE1BQ2hELFNBQVMsT0FBUDtBQUNFLGdCQUFRLE1BQU0sK0NBQVksY0FBYyxLQUFLO0FBQzdDLFlBQUksd0JBQU8sMkRBQWMsWUFBWTtBQUNyQztBQUFBLE1BQ0o7QUFBQSxJQUNKO0FBRUEsVUFBTSxlQUFXLGdDQUFjLEdBQUcsY0FBYyxhQUFhO0FBQzdELFVBQU0sT0FBTyxLQUFLLElBQUksTUFBTSxzQkFBc0IsUUFBUTtBQUUxRCxRQUFJO0FBQ0EsVUFBSSxnQkFBZ0Isd0JBQU87QUFFdkIsY0FBTSxLQUFLLElBQUksTUFBTSxPQUFPLE1BQU0sT0FBTztBQUN6QyxZQUFJLHdCQUFPLG1DQUFVLFVBQVU7QUFBQSxNQUNuQyxPQUFPO0FBRUgsY0FBTSxLQUFLLElBQUksTUFBTSxPQUFPLFVBQVUsT0FBTztBQUM3QyxZQUFJLHdCQUFPLG1DQUFVLFVBQVU7QUFBQSxNQUNuQztBQUFBLElBQ0osU0FBUyxPQUFQO0FBQ0UsY0FBUSxNQUFNLHlDQUFXLFlBQVksS0FBSztBQUMxQyxVQUFJLHdCQUFPLHlDQUFXLFVBQVU7QUFBQSxJQUNwQztBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtPLGtCQUF3QjtBQUMzQixRQUFJLENBQUMsS0FBSyxPQUFPO0FBQWE7QUFDOUIsVUFBTSxFQUFFLGlCQUFpQixhQUFhLGNBQWMsSUFBSSxLQUFLLE9BQU87QUFDcEUsVUFBTSxRQUFRLGdCQUFnQixTQUFTLFlBQVksU0FBUyxjQUFjO0FBRTFFLFNBQUssT0FBTyxZQUFZO0FBQUEsTUFDcEIsT0FBTyxLQUFLLE9BQU8sS0FBSyxjQUFjLGdCQUFnQixjQUFjLFlBQVksY0FBYyxjQUFjLGtCQUFrQjtBQUFBLElBQ2xJO0FBQUEsRUFDSjtBQUNKOzs7QUZ4V0EsSUFBTSxzQkFBa0M7QUFBQSxFQUNwQyxRQUFRO0FBQUEsRUFDUixpQkFBaUIsQ0FBQztBQUFBLEVBQ2xCLGFBQWEsQ0FBQztBQUFBLEVBQ2QsZUFBZSxDQUFDO0FBQUEsRUFDaEIsZUFBZSxDQUFDO0FBQ3BCO0FBRUEsSUFBcUIsdUJBQXJCLGNBQWtELHdCQUFPO0FBQUEsRUFNckQsTUFBTSxTQUFTO0FBRVgsVUFBTSxLQUFLLGFBQWE7QUFHeEIsVUFBTSxLQUFLLGVBQWU7QUFFMUIsU0FBSyxTQUFTLElBQUksT0FBTyxJQUFJO0FBRzdCLFVBQU0sZUFBZSxLQUFLLGNBQWMsaUJBQWlCLDhDQUFXLENBQUMsUUFBb0I7QUFDckYsV0FBSyxPQUFPLGtCQUFrQjtBQUFBLElBQ2xDLENBQUM7QUFDRCxpQkFBYSxTQUFTLHFDQUFxQztBQUczRCxTQUFLLGNBQWMsS0FBSyxpQkFBaUI7QUFDekMsU0FBSyxPQUFPLGdCQUFnQjtBQUc1QixTQUFLLGNBQWMsSUFBSSxjQUFjLEtBQUssS0FBSyxJQUFJLENBQUM7QUFHcEQsU0FBSyxXQUFXO0FBQUEsTUFDWixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDWixhQUFLLE9BQU8sa0JBQWtCO0FBQUEsTUFDbEM7QUFBQSxJQUNKLENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNaLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLGVBQWUsQ0FBQyxhQUFzQjtBQUNsQyxjQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsY0FBYztBQUM5QyxZQUFJLE1BQU07QUFDTixjQUFJLENBQUMsVUFBVTtBQUNYLGlCQUFLLE9BQU8sa0JBQWtCLEtBQUssUUFBUTtBQUFBLFVBQy9DO0FBQ0EsaUJBQU87QUFBQSxRQUNYO0FBQ0EsZUFBTztBQUFBLE1BQ1g7QUFBQSxJQUNKLENBQUM7QUFFRCxZQUFRLElBQUksOERBQVk7QUFBQSxFQUM1QjtBQUFBLEVBRUEsV0FBVztBQUNQLFlBQVEsSUFBSSw4REFBWTtBQUFBLEVBQzVCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxlQUFlO0FBQ2pCLFVBQU0saUJBQWlCLE1BQU0sa0JBQWtCO0FBRS9DLFVBQU0sWUFBWSxNQUFNLEtBQUssU0FBUztBQUV0QyxVQUFNLGdCQUFnQixhQUFhLENBQUM7QUFHcEMsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLGdCQUFnQixhQUFhO0FBQUEsRUFDckY7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsTUFBTSxlQUFlO0FBQ2pCLFVBQU0sYUFBYSxFQUFFLEdBQUcsS0FBSyxVQUFVLGFBQWEsS0FBSyxLQUFLO0FBQzlELFVBQU0sS0FBSyxTQUFTLFVBQVU7QUFBQSxFQUNsQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxNQUFNLGlCQUFpQjtBQUVuQixVQUFNLFlBQVksTUFBTSxLQUFLLFNBQVM7QUFFdEMsVUFBTSxjQUFhLHVDQUFXLGdCQUFlLENBQUM7QUFHOUMsU0FBSyxPQUFPLE9BQU8sT0FBTyxDQUFDLEdBQUcscUJBQXFCLFVBQVU7QUFBQSxFQUNqRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLE1BQU0saUJBQWlCO0FBQ25CLFVBQU0sS0FBSyxhQUFhO0FBQUEsRUFDNUI7QUFDSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
